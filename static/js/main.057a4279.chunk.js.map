{"version":3,"sources":["assets/github_logo.png","reducers/globalReducer.js","reducers/tableDataReducer.js","reducers/tableMetaReducer.js","reducers/index.js","styles/theme.js","styles/globalStyles.js","components/header/Header.jsx","actions/globalActions.js","components/FormulaBar/inputTagProps.js","components/Inputter/InputContext.js","formulas/Token.js","formulas/formulaFunctions.js","library/utils.js","formulas/TokenSanitizer.js","formulas/LexerRule.js","formulas/Lexer.js","components/Inputter/KeyboardActions.js","components/Inputter/KeyboardFocuser.js","components/Inputter/InputterHistory.js","actions/tableDataActions.js","library/ReduxConnector.js","formulas/ReduxStore.js","formulas/ast.js","formulas/Parser.js","formulas/Interpreter.js","formulas/graph.js","components/Table/TableHistory/reduxConnect.js","components/Table/TableHistory/actions/ReduxActions.js","components/Table/TableHistory/actions/AddFormula.js","components/Table/TableHistory/actions/ClearFormula.js","components/Table/TableHistory/commands/Command.js","components/Table/TableHistory/commands/AddFormulaCommand.js","components/Table/TableHistory/commands/ClearFormulaCommand.js","components/Table/TableHistory/TableHistory.js","components/Inputter/CellValueSetter.js","components/Inputter/Wrapper.jsx","components/Inputter/InputTag.jsx","components/Inputter/FuncDescription.jsx","library/InteractiveListItem.jsx","library/InteractiveList.jsx","components/Inputter/FuncSelector.jsx","components/Inputter/Suggestions.jsx","components/Inputter/Inputter.jsx","library/constants.js","components/cell/RowHeader.jsx","actions/tableMetaActions.js","components/FormulaBar/FormulaBar.jsx","components/FloatingInputter/inputTagProps.js","components/FloatingInputter/InputSizer.jsx","components/FloatingInputter/FloatingInputter.jsx","components/cell/ColHeader.jsx","components/Table/ColHeaderRow.jsx","components/ResultCell/Datum.jsx","components/ResultCell/Result.jsx","components/ResultCell/OutterBorder.jsx","components/ResultCell/ResultCell.jsx","components/Table/DataRow.jsx","components/Table/keyboardFocusMachine.js","components/Table/Table.jsx","components/Instructions/FunctionList.jsx","components/Instructions/SourceCode.jsx","components/Instructions/Instructions.jsx","App.jsx","Root.jsx","serviceWorker.js","index.js"],"names":["module","exports","createReducer","activeCell","entered","location","inputter","valueEvent","value","cursorPos","scheduledFloatingInputter","willOpen","isInteractive","floatingInputter","cellRect","isOpen","rows","columns","SET_TABLE_DIMENSIONS","state","_ref","payload","SET_ACTIVE_CELL","_ref2","SCHEDULE_FLOATING_INPUTTER","_ref3","UNSCHEDULE_FLOATING_INPUTTER","OPEN_FLOATING_INPUTTER","_ref4","Object","objectSpread","SET_FLOATING_INPUTTER_INTERACTIVE","_ref5","CLOSE_FLOATING_INPUTTER","SET_INPUTTER_VALUE_EVENT","_ref6","RESET_FLOATING_INPUTTER","_ref7","SET_CELL_DATA","data","DELETE_CELL_DATA","colWidths","rowHeights","SET_COL_WIDTH","colLabel","width","defineProperty","SET_ROW_HEIGHT","rowLabel","height","appStore","configureStore","reducer","global","globalReducer","tableData","tableDataReducer","tableMeta","tableMetaReducer","breaks","xs","sm","md","lg","breakBump","queries","concat","from","breakPoint","upTo","theme","colors","text","table","border","borderDark","labelBkg","dropdown","normal","active","primary","strong","light","field","background","shadow","globalStyles","css","Root","styled_base_browser_esm","target","name","styles","Name","props","Title","Header","react_default","a","createElement","href","rel","setInputterValueEvent","type","undefined","length","setActiveCell","dispatch","getState","Promise","resolve","closeFloatingInputter","createAction","inputTagProps","style","inputTagProps_ref","data-inputter","InputContext","React","createContext","Token","whitespace","category","index","classCallCheck","this","html","testArgsAllNumbers","args","forEach","arg","TypeError","Fn","AVERAGE","fn","_Fn$SUM","_Fn$COUNT","arguments","Error","SUM","apply","COUNT","definition","example","summary","CONCAT","result","_len","Array","_key","_i","_args","push","join","MAX","_len2","_key2","Math","max","MIN","_len3","_key3","min","POWER","_len4","_key4","base","exp","pow","SQRT","_len5","_key5","sqrt","_len6","_key6","reduce","prev","curr","AVG","POW","BASE_CODE_POINT","codePointAt","clamp","getColumnNames","cols","names","prevNames","remainCols","newNames","outerLoop","_prevNames","colName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","letter","err","return","toConsumableArray","getColumnLabel","num","label","basePoint","codePoint","String","fromCodePoint","floor","reverse","parseLocation","_location$split","split","_location$split2","slicedToArray","col","row","charCodeAt","isNumber","numStr","isPeriodsAndDigits","Boolean","match","periodCount","debounce","wait","timeout","isImmediate","setTimeout","clearTimeout","clearInterval","TokenSanitizer","tokens","_this","map","token","t","NUMBER","number","CELL","cell","FUNCTION","function","STRING","string","parseFloat","UNKNOWN","getCellLabel","getFunction","slice","toUpperCase","fnName","fnNode","formulaFuncs","LexerRule","regex","groupIndex","lastIndex","input","exec","TOKENS","EOF","EQUALS","COMMA","COLON","LPAREN","RPAREN","PLUS","MINUS","MULT","DIV","TEXT","GRAMMAR","Lexer","char","initChar","markers","nextToken","sanitizer","sanitize","isFormula","tokenTEXTorNUMBER","whitespaceLen","getWhitespaceLen","_GRAMMAR","rule","setIndex","test","consume","tokenUNKNOWN","chars","isEOF","isSeparator","isWhitespace","count","KeyboardActions","component","c","key","keyEvent","resetInputterValueEvent","onEscape","includes","refInput","current","selectionEnd","KeyboardFocuser","elQry","isFuncSelectorVisible","funcSelectorElQry","defaultElQry","focusElement","resultCellQry","_this$c$state$keyEven","shiftKey","left","right","down","_parseLocation","_parseLocation2","colIndex","rowIndex","endLocation","_parseLocation3","_parseLocation4","_parseLocation5","_parseLocation6","nextRowIndex","document","querySelector","focus","InputterHistory","maxUndo","history","lastUndo","pushValueEvent","bind","_this$c$props","metaKey","ctrlKey","redo","undo","isValueRepeated","truncateHistory","pop","shift","event","setCellData","clearCellData","ReduxConnector","store","funcs","_loop","_Object$entries","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","stop","entries","reduxConnector","dispatchFunctions","registerFunctions","ReduxStore","rc","_rc$getState$global","keys","AST","_name","TextNode","textNode","possibleConstructorReturn","getPrototypeOf","call","node","StringNode","_this2","NumberNode","_this3","CellNode","_this4","CellRange","leftCell","rightCell","_this5","UnaryOp","opNode","expr","_this6","evaluatedExpr","FuncOp","funcNode","argNodes","_this7","evaluatedArgs","BinaryOp","leftNode","rightNode","_this8","Parser","ast","peekType","equals","operator","term","factor","enclosedExpr","unaryOp","func","lparen","rparen","isCellRange","_this$invertCellRange","invertCellRange","_this$invertCellRange2","temp","list","listNode","cellRange","DQUOTE","stepsAhead","Interpreter","error","cache","lexer","getTokens","parse","vertex","graph","getVertex","visitNode","errorResponse","nodeName","constructor","eval","getCellResult","leftColIndex","leftRowIndex","rightColIndex","rightRowIndex","colIndexStart","colIndexEnd","rowIndexStart","rowIndexEnd","rowI","colI","otherLocation","isLocationValid","visitCell","childNode","errorMsg","message","Vertex","Graph","adj","pending","visited","reduxStore","setPendingNodes","dfs","updateStore","Set","add","size","visitAST","delete","hasVertex","testPathCycle","has","locationKeys","locations","currResult","willRecalculate","interpreter","oldVertex","getAST","recalculate","testMissingLocation","reduxConnect","ReduxActions","AddFormula","newVertex","previous","_this$previous","ClearFormula","getCellData","Command","AddFormulaCommand","addFormula","unexecute","execute","ClearFormulaCommand","clearFormula","TableHistory","recalcGraph","resetAll","addVertex","_undo","_redo","command","getEvent","construct","CellValueSetter","cellValue","inputValue","delVertex","sanitizeValue","getTokenValue","mapDispatchToProps","connect","cellValueSetter","refRoot","createRef","Wrapper_Root","ref","onBlur","contains","targetElement","run","setNewCellValue","onCommit","children","Input","InputTag","fwdRef","onChange","onKeyDown","core_browser_esm","assign","defaultProps","Pre","Subtitle","P","Hr","FuncDescription","currScope","_this$props","fnScopes","scope","startIndex","endIndex","getFnScope","inputRect","context","getFnNode","FuncDescription_Root","bottom","FuncDescription_ref","PureComponent","contextType","Li","DropdownItem","item","isActive","onMouseEnter","tabIndex","Ul","InteractiveList","items","InteractiveListItem","li","ul","renderListItems","propsTypes","PropTypes","array","isRequired","shape","object","baseItemStyle","ItemBaseRoot","ItemActiveRoot","FuncSelector","listItems","itemIndex","isVisible","handleOnClick","assertThisInitialized","setState","setListItems","nextProps","nextState","prevProps","prevState","updateContextData","updateListItems","keyActions","setIsFuncSelectorVisible","keyEventSetIndex","currInputValue","rightChunkIndex","leftChunk","rightChunk","filter","startsWith","sort","itemBase","itemActive","FuncSelector_Pre","FuncSelector_Subtitle","marginTop","boxShadow","nativeEvent","stopPropagation","_this$state","FuncSelector_Root","open","onClick","library_InteractiveList","getListStyles","Component","withTheme","Suggestions","setFnScopes","stack","b","getCurrTokenIndex","tokenBefore","tokenCurr","tokenAfter","_this$getCompareToken","getCompareTokens","_this$getCompareToken2","canSelectFunc","funcSelectorProps","getFuncSelector","Inputter_FuncSelector","Inputter_FuncDescription","NoOp","Inputter","_React$PureComponent","handleOnChange","handleOnKeyDown","keyboardActions","keyboardFocuser","setInputWidth","inherits","createClass","onMount","reset","focusInputTag","tokenizeInputValue","keyAction","inputEl","selectionStart","_event$target","altKey","preventDefault","setValueEvent","keyDownEventBehavior","setKeyEvent","Inputter_Suggestions","getBoundingClientRect","Provider","Inputter_Wrapper","Inputter_InputTag","renderSuggestions","_state$global","_state$global$activeC","MIN_COL_WIDTH","MAX_COL_WIDTH","MIN_ROW_HEIGHT","MAX_ROW_HEIGHT","ROW_HEADER_WIDTH","BtnHeight","RowHeader","pageY","btnBottom","isResizing","debSetRowHeight","delta","handleBtnHeightOnMouseDown","handleDocumentMouseMove","handleDocumentMouseUp","minHeight","setRowHeight","removeEventListener","addEventListener","RowHeader_Root","data-row","className","getRootStyle","getBtnHeightStyle","onMouseDown","onMouseMove","handleBtnHeightOnMouseMove","onMouseUp","handleBtnHeightOnMouseUp","ownProps","Fx","FormulaBar","handleOnFocus","handleOnBlur","scheduleFloatingInputter","relatedTarget","FormulaBar_Root","onFocus","components_Inputter_Inputter","mapDispatchtoProps","FloatingInputter_inputTagProps","BaseInput","InputSizer","textWidth","scrollWidth","ceil","InputSizer_Input","readOnly","FloatingInputter","handleOnMount","setFloatingInputterInteractive","_this$props$cellRect","top","FloatingInputter_Root","css_browser_esm","FloatingInputter_InputSizer","isInputterOpen","_state$global$floatin","BtnWidth","ColHeader","pageX","btnRight","debSetColWidth","handleBtnWidthOnMouseDown","setColWidth","ColHeader_Root","data-col","getBtnWidthStyle","handleBtnWidthOnMouseMove","handleBtnWidthOnMouseUp","Row","InnerBorder","ColHeaderRow","colLabels","fill","_","i","cell_ColHeader","Datum","onDoubleClick","Datum_Root","data-cell","data-location","whiteSpace","textOverflow","overflow","getStyle","Result","handleOnDoubleClick","refDatum","unscheduleFloatingInputter","openFloatingInputter","replaceValue","datumRect","JSON","stringify","element","activeElement","ResultCell_Datum","OutterBorder","OutterBorder_Root","_ownProps$location$sp","_ownProps$location$sp2","ResultCell","focusDatum","ResultCell_OutterBorder","ResultCell_Result","DataRow","rowNumber","DataRow_Row","cell_RowHeader","components_ResultCell_ResultCell","id","initial","wasFocused","states","idle","on","MOVE_FOCUS","actions","focusTarget","invoke","src","ctx","onDone","setNewContext","calcTargetLocation","getTargetLocation","getKeyboardFocusMachine","newContext","Machine","Grid","Table","keyboardFocusMachine","keyboardFocusService","interpret","refGrid","start","focusA_1","el","keyListenerService","focusService","dataset","send","Table_ColHeaderRow","Table_DataRow","renderColHeaderRow","renderDataRows","data-table","renderRows","mapDisptachToProps","FunctionList","FunctionList_Root","FunctionList_Title","FunctionList_Ul","FunctionList_Li","Img","SourceCode","SourceCode_Root","srcGithubLogo","alt","Instructions","Instructions_Root","Instructions_FunctionList","Instructions_SourceCode","Container","Main","App","components_FloatingInputter_FloatingInputter","data-dummy-focus-stop","header_Header","components_FormulaBar_FormulaBar","components_Table_Table","Instructions_Instructions","es","react_router_dom","emotion_theming_browser_esm","src_App","window","hostname","ReactDOM","render","src_Root","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"0EAAAA,EAAAC,QAAA,yiNC0BeC,cAxBc,CAC3BC,WAAY,CACVC,QAAS,GACTC,SAAU,IAEZC,SAAU,CACRC,WAAY,CACVC,MAAO,GACPC,UAAW,IAGfC,0BAA2B,CACzBC,UAAU,EACVC,eAAe,GAEjBC,iBAAkB,CAChBC,SAAU,GACVC,QAAQ,EACRH,eAAe,GAEjBI,KAAM,GACNC,QAAS,IAGiC,CAC1CC,qBAAwB,SAACC,EAADC,GAAwB,IAAdC,EAAcD,EAAdC,QAChCF,EAAMH,KAAOK,EAAQL,KACrBG,EAAMF,QAAUI,EAAQJ,SAG1BK,gBAAmB,SAACH,EAADI,GAAwB,IAAdF,EAAcE,EAAdF,QAC3BF,EAAMhB,WAAakB,GAGrBG,2BAA8B,SAACL,EAADM,GAAwB,IAC5Cb,EAD4Ca,EAAdJ,QAC9BT,cAERO,EAAMT,0BAA4B,CAChCC,UAAU,EACVC,kBAIJc,6BAAgC,SAACP,GAC/BA,EAAMT,0BAA4B,CAChCC,UAAU,EACVC,eAAe,IAInBe,uBAA0B,SAACR,EAADS,GAAwB,IAAdP,EAAcO,EAAdP,QAClCF,EAAMN,iBAANgB,OAAAC,EAAA,EAAAD,CAAA,GAA8BV,EAAMN,iBAAqBQ,IAG3DU,kCAAqC,SAACZ,EAADa,GAAwB,IAAdX,EAAcW,EAAdX,QAC7CF,EAAMN,iBAANgB,OAAAC,EAAA,EAAAD,CAAA,GAA8BV,EAAMN,iBAApC,CAAsDD,cAAeS,KAGvEY,wBAA2B,SAACd,GAC1BA,EAAMN,iBAAiBE,QAAS,GAGlCmB,yBAA4B,SAACf,EAADgB,GAAwB,IAAdd,EAAcc,EAAdd,QACpCF,EAAMb,SAASC,WAAac,GAG9Be,wBAA2B,SAACjB,EAADkB,GAAwB,IAAdhB,EAAcgB,EAAdhB,QACnCF,EAAMN,iBAANgB,OAAAC,EAAA,EAAAD,CAAA,GAA8BV,EAAMN,iBAAqBQ,MChE9CnB,cAFO,GAEsB,CAC1CoC,cAAiB,SAACnB,EAADC,GAAwB,IAAdC,EAAcD,EAAdC,QACjBhB,EAAmBgB,EAAnBhB,SAAUkC,EAASlB,EAATkB,KAClBpB,EAAMd,GAAYkC,GAGpBC,iBAAoB,SAACrB,EAADI,UACXJ,EADmCI,EAAdF,oBCJjBnB,cALO,CACpBuC,UAAW,GACXC,WAAY,IAG8B,CAE1CC,cAAiB,SAACxB,EAADC,GAAwB,IAAdC,EAAcD,EAAdC,QACjBuB,EAAoBvB,EAApBuB,SAAUC,EAAUxB,EAAVwB,MACVJ,EAActB,EAAdsB,UACRtB,EAAMsB,UAANZ,OAAAC,EAAA,EAAAD,CAAA,GAAuBY,EAAvBZ,OAAAiB,EAAA,EAAAjB,CAAA,GAAmCe,EAAWC,KAGhDE,eAAkB,SAAC5B,EAADI,GAAwB,IAAdF,EAAcE,EAAdF,QAClB2B,EAAqB3B,EAArB2B,SAAUC,EAAW5B,EAAX4B,OACVP,EAAevB,EAAfuB,WACRvB,EAAMuB,WAANb,OAAAC,EAAA,EAAAD,CAAA,GAAwBa,EAAxBb,OAAAiB,EAAA,EAAAjB,CAAA,GAAqCmB,EAAWC,OCErCC,EAZbC,YAAe,CACbC,QAAS,CACPC,OAAQC,EACRC,UAAWC,EACXC,UAAWC,KCSXC,EAAS,CACbC,GAAI,EACJC,GAAI,IACJC,GAAI,IACJC,GAAI,MAGAC,EAAY,CAChBJ,GAAI,KACJC,GAAI,KACJC,GAAI,MAGAG,EAAU,CACdL,GAAE,sBAAAM,OAAwBP,EAAOE,GAAK,EAApC,OACFA,GAAE,sBAAAK,OAAwBP,EAAOE,GAA/B,wBAAAK,OAAwDP,EAAOG,GAAK,EAApE,OACFA,GAAE,sBAAAI,OAAwBP,EAAOG,GAA/B,wBAAAI,OAAwDP,EAAOI,GAAK,EAApE,OACFA,GAAE,sBAAAG,OAAwBP,EAAOI,GAA/B,OACFI,KAAM,SAACC,GAAD,4BAAAF,OAAuCP,EAAOS,GAA9C,QACNC,KAAM,SAACD,GAAD,4BAAAF,OAAuCP,EAAQK,EAAUI,IAAgB,EAAzE,SASOE,EAND,CACZC,OA5Ca,CACbC,KAAM,UACNC,MAAO,CACLC,OAAQ,UACRC,WAAY,OACZC,SAAU,WAEZC,SAAU,CACRC,OAAQ,UACRC,OAAQ,WAEVC,QAAS,CACPC,OAAQ,UACRC,MAAO,UAETC,MAAO,CACLC,WAAY,WAEdC,OAAQ,WA2BR1B,SACAM,WCZaqB,EA5BMC,YAAH,cAELjB,EAAMC,OAAOC,KAFR,kOCFZgB,EAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,UAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,mDAMJC,EAAIhE,OAAA4D,EAAA,EAAA5D,CAAA,KAAA6D,OAAA,aAAA7D,CAAA,8BAEC,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOC,MAF7B,wDAUJuB,EAAKlE,OAAA4D,EAAA,EAAA5D,CAAA,MAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,2CAmBII,MAdf,WACE,OACEC,EAAAC,EAAAC,cAACX,EAAD,KACES,EAAAC,EAAAC,cAACN,EAAD,CACEO,KAAK,0BACLC,IAAI,uBAFN,oBAMAJ,EAAAC,EAAAC,cAACJ,EAAD,qECrBC,SAASO,EAAsB9F,EAAOC,GAC3C,MAAO,CACL8F,KAAM,2BACNlF,QAAS,CACPb,QACAC,eAAyB+F,IAAd/F,EACPD,EAAMiG,OACNhG,IAKH,SAASiG,EAAcrG,GAC5B,OAAO,SAACsG,EAAUC,GAChB,IACMxG,GADWwG,IAAWrD,UAAUlD,IACT,IAAID,SAAW,GAI5C,OAFAuG,EAASL,EAAsBlG,EAASA,EAAQqG,SAEzCI,QAAQC,QACbH,EAAS,CACPJ,KAAM,kBACNlF,QAAS,CACPjB,UACAC,gBAuEH,IAAM0G,EAAwBC,YAAa,0GC5FnCC,EAAA,CAAEC,MAVH,kBAAAC,GAUUrB,MAJV,CACZsB,gBAAiB,QCVNC,EAAeC,IAAMC,gBCSnBC,EAXb,SAAAA,EAAYjB,EAAM/B,EAAMiD,EAAYC,EAAUC,GAAQ9F,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAL,GACpDK,KAAKtB,KAAOA,EACZsB,KAAKH,SAAWA,EAChBG,KAAKrD,KAAOA,EACZqD,KAAKJ,WAAaA,EAClBI,KAAKF,MAAQA,EACbE,KAAKrH,MAAQ,KACbqH,KAAKC,KAAO,MCRhB,SAASC,EAAmBC,GAC1BA,EAAKC,QAAQ,SAAAC,GACX,GAAmB,kBAARA,EACT,MAAM,IAAIC,UAAJ,mCAAAjE,OAAiDgE,MAK7D,IAAME,EAAK,CACTC,QAAS,CACPC,GAAI,WAAa,IAAAC,EAAAC,EACf,GAAoB,IAAhBC,UAAKhC,OACP,MAAM,IAAIiC,MAAM,kBAGlB,OAAOH,EAAAH,EAAGO,KAAIL,GAAPM,MAAAL,EAAAE,YAAqBD,EAAAJ,EAAGS,OAAMP,GAATM,MAAAJ,EAAAC,YAE9BK,WAAY,+BACZC,QAAS,oBACTC,QAAS,iDAGXC,OAAQ,CACNX,GAAI,WAAa,IACf,IAAIY,EAAS,GADEC,EAAAV,UAAAhC,OAATuB,EAAS,IAAAoB,MAAAD,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAATrB,EAASqB,GAAAZ,UAAAY,GAGf,GAAoB,IAAhBrB,EAAKvB,OACP,MAAM,IAAIiC,MAAM,kBAGlB,QAAAY,EAAA,EAAAC,EAAgBvB,EAAhBsB,EAAAC,EAAA9C,OAAA6C,IAAsB,CAAjB,IAAIpB,EAAGqB,EAAAD,GACV,GAAmB,kBAARpB,EACT,MAAM,IAAIQ,MAAJ,4BAAAxE,OAAsCgE,IAG9CgB,EAAOM,KAAKtB,GAGd,OAAOgB,EAAOO,KAAK,KAErBX,WAAY,gCACZC,QAAS,uBACTC,QAAS,kEAGXH,MAAO,CACLP,GAAI,kBAAaG,UAAKhC,QACtBqC,WAAY,iCACZC,QAAS,sBACTC,QAAS,sDAGXU,IAAK,CACHpB,GAAI,WAAa,QAAAqB,EAAAlB,UAAAhC,OAATuB,EAAS,IAAAoB,MAAAO,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAT5B,EAAS4B,GAAAnB,UAAAmB,GACf,GAAoB,IAAhB5B,EAAKvB,OACP,MAAM,IAAIiC,MAAM,kBAIlB,OADAX,EAAmBC,GACZ6B,KAAKC,IAALlB,MAAAiB,KAAY7B,IAErBc,WAAY,2BACZC,QAAS,oBACTC,QAAS,sDAGXe,IAAK,CACHzB,GAAI,WAAa,QAAA0B,EAAAvB,UAAAhC,OAATuB,EAAS,IAAAoB,MAAAY,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAATjC,EAASiC,GAAAxB,UAAAwB,GACf,GAAoB,IAAhBjC,EAAKvB,OACP,MAAM,IAAIiC,MAAM,kBAIlB,OADAX,EAAmBC,GACZ6B,KAAKK,IAALtB,MAAAiB,KAAY7B,IAErBc,WAAY,2BACZC,QAAS,oBACTC,QAAS,uDAGXmB,MAAO,CACL7B,GAAI,WAAa,QAAA8B,EAAA3B,UAAAhC,OAATuB,EAAS,IAAAoB,MAAAgB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAATrC,EAASqC,GAAA5B,UAAA4B,GACf,GAAoB,IAAhBrC,EAAKvB,OACP,MAAM,IAAIiC,MAAM,mCAGlBX,EAAmBC,GALJ,IAMRsC,EAAatC,EANL,GAMFuC,EAAOvC,EANL,GAOf,OAAO6B,KAAKW,IAAIF,EAAMC,IAExBzB,WAAY,wBACZC,QAAS,cACTC,QAAS,2CAGXyB,KAAM,CACJnC,GAAI,WAAa,QAAAoC,EAAAjC,UAAAhC,OAATuB,EAAS,IAAAoB,MAAAsB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAT3C,EAAS2C,GAAAlC,UAAAkC,GACf,GAAoB,IAAhB3C,EAAKvB,OACP,MAAM,IAAIiC,MAAJ,kCAIR,OADAX,EAAmBC,GACZ6B,KAAKe,KAAK5C,EAAK,KAExBc,WAAY,cACZC,QAAS,sBACTC,QAAS,wCAGXL,IAAK,CACHL,GAAI,WAAa,QAAAuC,EAAApC,UAAAhC,OAATuB,EAAS,IAAAoB,MAAAyB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAT9C,EAAS8C,GAAArC,UAAAqC,GACf,GAAoB,IAAhB9C,EAAKvB,OACP,MAAM,IAAIiC,MAAM,kBAIlB,OADAX,EAAmBC,GACZA,EAAK+C,OAAO,SAACC,EAAMC,GAAP,OAAiBA,EAAOD,GAAO,IAEpDlC,WAAY,2BACZC,QAAS,oBACTC,QAAS,6CAKbZ,EAAG8C,IAAHrJ,OAAAC,EAAA,EAAAD,CAAA,GACKuG,EAAGC,QADR,CAEES,WAAY,2BACZC,QAAS,kBAGXX,EAAG+C,IAAHtJ,OAAAC,EAAA,EAAAD,CAAA,GACKuG,EAAG+B,MADR,CAEErB,WAAY,sBACZC,QAAS,cAGIX,wBCzITgD,EAAkB,IAAIC,YAAY,GAOjC,SAASC,EAAM9K,EAAO0J,EAAKJ,GAChC,OAAOD,KAAKK,IAAKL,KAAKC,IAAItJ,EAAO0J,GAAMJ,GAelC,SAASyB,EAAeC,GAM7B,IALA,IACIC,EAAQ,GACRC,EAAY,CAAC,IACbC,EAAaH,EAEVG,EAAa,GAAG,CACrB,IAAMC,EAAW,GAEjBC,EACA,QAAAvC,EAAA,EAAAwC,EAAoBJ,EAApBpC,EAAAwC,EAAArF,OAAA6C,IAA+B,CAA1B,IAAIyC,EAAOD,EAAAxC,GAAe0C,GAAA,EAAAC,GAAA,EAAAC,OAAA1F,EAAA,IAC7B,QAAA2F,EAAAC,EAVa,6BAUbC,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA6B,KAApBS,EAAoBN,EAAA3L,MAC3B,GAAmB,IAAfmL,EAAqB,MAAME,EAC/BD,EAASpC,KAAT,GAAAtF,OAAiB6H,GAAjB7H,OAA2BuI,IAC3Bd,GAAc,GAJa,MAAAe,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,IAQ/BR,EAAYE,EACZH,EAAK,GAAAvH,OAAArC,OAAA+K,EAAA,EAAA/K,CAAO4J,GAAUG,GAGxB,OAAOH,EAyBF,SAASoB,EAAeC,GAC7B,IAAMC,EAAQ,GACRC,EAAY5B,EACdH,EAAO6B,EAAM,EAEjB,EAAG,CAED,IACMG,EAAYD,GAFlB/B,GAAQ,GACsB,GAExBwB,EAASS,OAAOC,cAAcF,GACpCF,EAAMvD,KAAKiD,GAEXxB,EAAOpB,KAAKuD,MAAMnC,EAAO,UAClBA,EAAO,GAEhB,OAAO8B,EAAMM,UAAU5D,KAAK,IAGvB,SAAS6D,EAAcjN,GAAU,IAAAkN,EACrBlN,EAASmN,MAAM,KADMC,EAAA5L,OAAA6L,EAAA,EAAA7L,CAAA0L,EAAA,GACjCI,EADiCF,EAAA,GAC5BG,EAD4BH,EAAA,GAKtC,MAAO,CAH4BE,EA5BVH,MAAM,IACPzC,OAAO,SAACC,EAAMyB,GAAP,OACtB,GAAPzB,EAAYyB,EAAOoB,WAAW,GAAKzC,EAAkB,GACpD,GAEc,GAwBCwC,EAAM,GAKnB,SAASE,EAASC,GACvB,IAAMC,EAAqBC,QAAQF,EAAOG,MAAM,aAC1CC,GAAeJ,EAAOG,MAAM,QAAU,IAAIzH,OAEhD,QAAKuH,MACDG,EAAc,KACI,IAAlBJ,EAAOtH,QAA8B,MAAdsH,EAAO,KAI7B,SAASK,EAAS9F,EAAI+F,GAAwB,IAC/CC,EAD6BC,IAAkB9F,UAAAhC,OAAA,QAAAD,IAAAiC,UAAA,KAAAA,UAAA,GAGnD,OAAO,WAAa,QAAAU,EAAAV,UAAAhC,OAATuB,EAAS,IAAAoB,MAAAD,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAATrB,EAASqB,GAAAZ,UAAAY,GAClB,GAAIkF,EAAa,CACf,GAAID,EAAW,OAEfhG,EAAEM,WAAF,EAAMZ,GAENsG,EAAUE,WAAW,WACnBC,aAAaH,GACbA,EAAU,MACTD,QAEHK,cAAcJ,GAEdA,EAAUE,WAAW,WACnBlG,EAAEM,WAAF,EAAMZ,GACNsG,EAAU,MACTD,QCnDMM,aApEb,SAAAA,EAAYC,GAAS/M,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA8G,GACnB9G,KAAK+G,OAASA,yDAGL,IAAAC,EAAAhH,KACT,OAAOA,KAAK+G,OAAOE,IAAI,SAAAC,GACrB,OAAOA,EAAMxI,MACX,KAAKyI,GAAEC,OACL,OAAOJ,EAAKK,OAAOH,GACrB,KAAKC,GAAEG,KACL,OAAON,EAAKO,KAAKL,GACnB,KAAKC,GAAEK,SACL,OAAOR,EAAKS,SAASP,GACvB,KAAKC,GAAEO,OACL,OAAOV,EAAKW,OAAOT,GACrB,QACE,OAAOA,oCAKRA,GACL,OAAKjB,EAASiB,EAAMvK,OAKpBuK,EAAMvO,MAAQiP,WAAWV,EAAMvK,MACxBuK,IALLA,EAAMxI,KAAOyI,GAAEU,QACRX,gCAONA,GAEH,OADAA,EAAMvO,MAAQqH,KAAK8H,aAAaZ,GACzBA,mCAGAA,GACP,IAAMzG,EAAKT,KAAK+H,YAAYb,GAQ5B,OANIzG,EACFyG,EAAMvO,MAAQ8H,EAEdyG,EAAMxI,KAAOyI,GAAEU,QAGVX,iCAGFA,GAEL,OADAA,EAAMvO,MAAQuO,EAAMvK,KAAKqL,MAAM,GAAI,GAC5Bd,uCAGIA,GAAO,IACVvK,EAASuK,EAATvK,KACAmD,EAAUnD,EAAK0J,MAAM,OAArBvG,MACFgG,EAAMnJ,EAAKqL,MAAM,EAAGlI,GAAOmI,cAC3BlC,EAAMpJ,EAAKqL,MAAMlI,GACvB,SAAAzD,OAAUyJ,EAAV,KAAAzJ,OAAiB0J,uCAGPmB,GACV,IAAMgB,EAAShB,EAAMvK,KAAKsL,cACpBE,EAASC,EAAaF,GAC5B,OAAOC,GAAUA,EAAO1H,YCrDb4H,cAhBb,SAAAA,EAAYC,EAAOC,EAAYrB,EAAOrH,GAAW7F,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAqI,GAC/CrI,KAAKsI,MAAQA,EACbtI,KAAKuI,WAAaA,EAClBvI,KAAKkH,MAAQA,EACblH,KAAKH,SAAWA,uDAGTC,GACPE,KAAKsI,MAAME,UAAY1I,+BAGpB2I,GACH,OAAOzI,KAAKsI,MAAMI,KAAKD,YCPrBE,GAAS,CAEbC,IAAK,MAELC,OAAQ,SACRC,MAAO,QACPC,MAAO,QACPC,OAAQ,SACRC,OAAQ,SAERC,KAAM,OACNC,MAAO,QACPC,KAAM,OACNC,IAAK,MAELC,KAAM,OACNhC,KAAM,OACNI,OAAQ,SACRN,OAAQ,SACRI,SAAU,WACVK,QAAS,WAGLV,GAAIwB,GAEJY,GAAU,CAEd,IAAIlB,GAAU,KAAM,EAAGlB,GAAE0B,OAAQ,aACjC,IAAIR,GAAU,KAAM,EAAGlB,GAAE2B,MAAO,aAChC,IAAIT,GAAU,KAAM,EAAGlB,GAAE4B,MAAO,aAChC,IAAIV,GAAU,MAAO,EAAGlB,GAAE6B,OAAQ,aAClC,IAAIX,GAAU,MAAO,EAAGlB,GAAE8B,OAAQ,aAElC,IAAIZ,GAAU,MAAO,EAAGlB,GAAE+B,KAAM,YAChC,IAAIb,GAAU,MAAO,EAAGlB,GAAEgC,MAAO,YACjC,IAAId,GAAU,MAAO,EAAGlB,GAAEiC,KAAM,YAChC,IAAIf,GAAU,MAAO,EAAGlB,GAAEkC,IAAK,YAE/B,IAAIhB,GAAU,aAAc,EAAGlB,GAAEO,OAAQ,UACzC,IAAIW,GAAU,WAAY,EAAGlB,GAAEC,OAAQ,UACvC,IAAIiB,GAAU,gBAAiB,EAAGlB,GAAEG,KAAM,UAC1C,IAAIe,GAAU,eAAgB,EAAGlB,GAAEK,SAAU,WAIzCgC,cACJ,SAAAA,EAAYf,GAAQzO,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAwJ,GAClBxJ,KAAKyI,MAAQA,EACbzI,KAAKF,MAAQ,EACbE,KAAKyJ,KAAOzJ,KAAK0J,SAASjB,GAC1BzI,KAAK2J,QAAU,GACf3J,KAAK+G,OAAS,2DAId,KAAO/G,KAAKyJ,OAAStC,GAAEyB,KAAK,CAC1B,IAAM1B,EAAQlH,KAAK4J,YACnB5J,KAAK+G,OAAOpF,KAAKuF,GAGnB,IAAM2C,EAAY,IAAI/C,EAAe9G,KAAK+G,QAE1C,OADA/G,KAAK+G,OAAS8C,EAAUC,WACjB9J,KAAK+G,2CAIZ,GAAI/G,KAAKyJ,OAAStC,GAAEyB,IAClB,OAAO,IAAIjJ,EAAMwH,GAAEyB,IAAKzB,GAAEyB,IAAK,EAAG,MAAO5I,KAAKF,OAGhD,IAAKE,KAAK+J,YACR,OAAO/J,KAAKgK,oBAMd,IAHA,IACI9C,EADE+C,EAAgBjK,KAAKkK,mBAG3BzI,EAAA,EAAA0I,EAAiBZ,GAAjB9H,EAAA0I,EAAAvL,OAAA6C,IAA0B,CAArB,IAAI2I,EAAID,EAAA1I,GACX2I,EAAKC,SAASrK,KAAKF,OACnB,IAAMuG,EAAQ+D,EAAKE,KAAKtK,KAAKyI,OAE7B,GAAIpC,GAASA,EAAMvG,QAAUE,KAAKF,MAAO,CACvC,IAAMnD,EAAO0J,EAAM+D,EAAK7B,YACxBrB,EAAQ,IAAIvH,EAAMyK,EAAKlD,MAAOvK,EAAMsN,EAAeG,EAAKvK,SAAUG,KAAKF,OACvEE,KAAKF,OAASnD,EAAKiC,OAAS,EAC5BoB,KAAKuK,UACL,OAQJ,OAJKrD,IACHA,EAAQlH,KAAKwK,aAAaP,IAGrB/C,mCAGAuB,GAMP,OAL0B,IAAtBzI,KAAKyI,MAAM7J,SACboB,KAAKyI,MAAQ,IACbzI,KAAKF,OAAS,GAGT2I,EAAMzI,KAAKF,4CAGPF,GAGX,IAFA,IAAM6K,EAAQ,KAELzK,KAAK0K,SAAW1K,KAAK2K,eAAiB3K,KAAK4K,iBAClDH,EAAM9I,KAAK3B,KAAKyJ,MAChBzJ,KAAKuK,UAGP,IAAM5N,EAAO8N,EAAM7I,KAAK,IACxB,OAAO,IAAIjC,EAAMwH,GAAEU,QAASlL,EAAMiD,EAAY,SAAUI,KAAKF,MAAQnD,EAAKiC,oDAI1E,IAAIsI,EAUJ,OAPEA,EADEjB,EAASjG,KAAKyI,OACR,IAAI9I,EAAMwH,GAAEC,OAAQpH,KAAKyI,MAAO,EAAG,SAAUzI,KAAKF,OAElD,IAAIH,EAAMwH,GAAEmC,KAAMtJ,KAAKyI,MAAO,EAAG,SAAUzI,KAAKF,OAG1DE,KAAKF,MAAQE,KAAKyI,MAAM7J,OAAS,EACjCoB,KAAKuK,UACErD,oCAIPlH,KAAKF,QAEDE,KAAKF,MAAQE,KAAKyI,MAAM7J,OAC1BoB,KAAKyJ,KAAOzJ,KAAKyI,MAAMzI,KAAKF,OAE5BE,KAAKyJ,KAAOtC,GAAEyB,wCAKhB,MAAyB,MAAlB5I,KAAKyI,MAAM,mCAIlB,OAAOzI,KAAKyJ,OAAStC,GAAEyB,2CAIvB,OAAQ5I,KAAK0K,SAAWtE,QAAQpG,KAAKyJ,KAAKpD,MAAM,6CAIhD,OAAOD,QAAQpG,KAAKyJ,KAAKpD,MAAM,8DAM/B,IAFA,IAAIwE,EAAQ,EAEL7K,KAAK4K,gBACVC,IACA7K,KAAKuK,UAGP,OAAOM,WAIIrB,MC5JAsB,cAnBb,SAAAA,EAAYC,GAAY/Q,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA8K,GACtB9K,KAAKgL,EAAID,oDAGL,IACIE,EAAQjL,KAAKgL,EAAE1R,MAAM4R,SAArBD,IAEI,WAARA,GACFjL,KAAKgL,EAAE/M,MAAMkN,0BACbnL,KAAKgL,EAAE/M,MAAMmN,YACJ,CAAC,YAAa,cAAcC,SAASJ,IAC9CjL,KAAKgL,EAAE/M,MAAMQ,sBACXuB,KAAKgL,EAAE/M,MAAMvF,WAAWC,MACxBqH,KAAKgL,EAAEM,SAASC,QAAQC,uBCmEjBC,cA7Eb,SAAAA,EAAYV,GAAY/Q,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAyL,GACtBzL,KAAKgL,EAAID,oDAGL,IAEAW,EADIlT,EAAawH,KAAKgL,EAAE/M,MAApBzF,SAINkT,EADE1L,KAAKgL,EAAE1R,MAAMqS,sBACP3L,KAAK4L,kBAAkBpT,GAEvBwH,KAAK6L,aAAarT,GAG5BwH,KAAK8L,aAAaJ,6CAGFlT,GAGhB,GAAY,WAFIwH,KAAKgL,EAAE1R,MAAM4R,SAArBD,IAGN,OAAOjL,KAAK+L,cAAcvT,wCAIjBA,GAAU,IAAAwT,EACKhM,KAAKgL,EAAE1R,MAAM4R,SAA/BD,EADae,EACbf,IAAKgB,EADQD,EACRC,SAEb,MAAY,WAARhB,EACKjL,KAAK+L,cAAcvT,GACT,QAARyS,GAAiBgB,EACnBjM,KAAKkM,KAAK1T,GACA,QAARyS,EACFjL,KAAKmM,MAAM3T,GACD,UAARyS,EACFjL,KAAKoM,KAAK5T,QADZ,+BAKJA,GAAU,IAAA6T,EACgB5G,EAAcjN,GAD9B8T,EAAAtS,OAAA6L,EAAA,EAAA7L,CAAAqS,EAAA,GACNE,EADMD,EAAA,GACIE,EADJF,EAAA,GAGPvR,EAAWiK,EADIhD,KAAKC,IAAI,EAAGsK,EAAW,IAEtCpR,EAAW,IAAMqR,EAAW,GAC5BC,EAAW,GAAApQ,OAAMtB,EAAN,KAAAsB,OAAkBlB,GACnC,OAAO6E,KAAK+L,cAAcU,iCAGtBjU,GAAU,IAAAkU,EACejH,EAAcjN,GAD7BmU,EAAA3S,OAAA6L,EAAA,EAAA7L,CAAA0S,EAAA,GACPH,EADOI,EAAA,GACGH,EADHG,EAAA,GAGR5R,EAAWiK,EADIhD,KAAKK,IAAIrC,KAAKgL,EAAE/M,MAAM7E,QAAU,EAAGmT,EAAW,IAE7DpR,EAAW,IAAMqR,EAAW,GAC5BC,EAAW,GAAApQ,OAAMtB,EAAN,KAAAsB,OAAkBlB,GACnC,OAAO6E,KAAK+L,cAAcU,gCAGvBjU,GAAU,IAAAoU,EACgBnH,EAAcjN,GAD9BqU,EAAA7S,OAAA6L,EAAA,EAAA7L,CAAA4S,EAAA,GACNL,EADMM,EAAA,GACIL,EADJK,EAAA,GAEPC,EAAe9K,KAAKK,IAAIrC,KAAKgL,EAAE/M,MAAM9E,KAAO,EAAGqT,EAAW,GAC1DzR,EAAWiK,EAAeuH,GAC1BpR,EAAW,IAAM2R,EAAe,GAChCL,EAAW,GAAApQ,OAAMtB,EAAN,KAAAsB,OAAkBlB,GACnC,OAAO6E,KAAK+L,cAAcU,yCAGdjU,GACZ,6CAAA6D,OAA8C7D,EAA9C,2CAGWkT,GACNA,GACMqB,SAASC,cAActB,GAC/BuB,iBCYQC,cArFb,SAAAA,EAAYnC,EAAWoC,EAAS3G,GAAOxM,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAkN,GACrClN,KAAKgL,EAAID,EACT/K,KAAKmN,QAAUA,EACfnN,KAAKoN,QAAU,GACfpN,KAAKF,MAAQ,EACbE,KAAKqN,SAAW,KAChBrN,KAAK2B,KAAO4E,EAASvG,KAAKsN,eAAeC,KAAKvN,MAAOwG,GAAM,GAC3DxG,KAAK2B,KAAK4L,KAAKvN,0DAGT,IAAAwN,EAC0BxN,KAAKgL,EAAE/M,MAA/B1F,EADFiV,EACEjV,QAASG,EADX8U,EACW9U,WACjBsH,KAAKoN,QAAQxO,OAAS,EAElBrG,IAAYG,EAAWC,OACzBqH,KAAKoN,QAAQzL,KAAK,CAAEhJ,MAAOJ,EAASK,UAAWL,EAAQqG,SAGzDoB,KAAKF,MAAQ,EACbE,KAAKqN,SAAW,yCAGN,IAAArB,EACkChM,KAAKgL,EAAE1R,MAAM4R,SAAjDD,EADEe,EACFf,IAAKwC,EADHzB,EACGyB,QAASC,EADZ1B,EACY0B,QAASzB,EADrBD,EACqBC,SAEnB,MAARhB,GAAegB,IAAawB,GAAWC,GACzC1N,KAAK2N,OACY,MAAR1C,IAAgBwC,GAAWC,IACpC1N,KAAK4N,8CAIMlV,GACRsH,KAAKgL,EAAE/M,MAAMlF,gBACdiH,KAAK6N,gBAAgBnV,KACzBsH,KAAK8N,kBACL9N,KAAKoN,QAAQzL,KAAKjJ,GAClBsH,KAAKF,MAAQE,KAAKoN,QAAQxO,OAAS,EACnCoB,KAAKqN,SAAW,sCAKhB,IAAMvN,EAAQkC,KAAKC,IAAI,EAAGjC,KAAKF,MAAQ,GACvCE,KAAKvB,sBAAsBqB,kCAI3B,IAAMA,EAAQkC,KAAKK,IAAIrC,KAAKoN,QAAQxO,OAAS,EAAGoB,KAAKF,MAAQ,GAC7DE,KAAKvB,sBAAsBqB,2CAGbpH,GAAY,IAClBC,EAAUD,EAAVC,MAER,GAAIqH,KAAKqN,UAAYrN,KAAKqN,SAAS1U,QAAUA,EAC3C,OAAO,EACF,GAAIqH,KAAKoN,QAAQxO,OAAS,EAAG,CAClC,IAAMkB,EAAQE,KAAKoN,QAAQxO,OAAS,EACpC,OAAOoB,KAAKoN,QAAQtN,GAAOnH,QAAUA,EAGvC,OAAO,4CAIP,KAAOqH,KAAKF,MAAQE,KAAKoN,QAAQxO,OAAS,GACxCoB,KAAKoN,QAAQW,MAGX/N,KAAKoN,QAAQxO,SAAWoB,KAAKmN,SAC/BnN,KAAKoN,QAAQY,sDAIKlO,GACpB,GAAIA,IAAUE,KAAKF,MAAO,CACxB,IAAMmO,EAAQjO,KAAKoN,QAAQtN,GAC3BE,KAAKF,MAAQA,EACbE,KAAKqN,SAAWY,EAChBjO,KAAKgL,EAAE/M,MAAMQ,sBAAsBwP,EAAMtV,MAAOsV,EAAMrV,qBCpFrD,SAASsV,GAAY1V,EAAUD,EAAS8I,GAC7C,MAAO,CACL3C,KAAM,gBACNlF,QAAS,CAAEhB,WAAUkC,KAAM,CAAEnC,UAAS8I,YAInC,SAAS8M,GAAc3V,GAC5B,OAAO,SAACsG,EAAUC,GAGhB,YAAcJ,IAFAI,IAAWrD,UAAUlD,GAG1BwG,QAAQC,UAGVD,QAAQC,QAAQH,EAAS,CAC9BJ,KAAM,mBACNlF,QAAShB,uCCSA4V,cAtBb,SAAAA,IAA4B,IAAhBC,EAAgBzN,UAAAhC,OAAA,QAAAD,IAAAiC,UAAA,GAAAA,UAAA,GAAVvF,EAAUrB,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAoO,GAC1BpO,KAAKqO,MAAQA,EACbrO,KAAKsO,MAAQ,0DAQb,OAAOtO,KAAKqO,MAAMtP,qDAGFuP,GAChB,IADuB,IAAAtH,EAAAhH,KAAAuO,EAAA,eAAAhV,EAAAiV,EAAA/M,GACb3D,GADapE,EAAAM,OAAA6L,EAAA,EAAA7L,CAAAT,EAAA,OACPkH,EADO/G,EAAA,GAErBsN,EAAKsH,MAAMxQ,GAAQ9D,OAAAyU,GAAA,EAAAzU,CAAA0U,GAAArQ,EAAAsQ,KAAA,SAAAC,IAAA,IAAAlN,EAAAd,UAAA,OAAA8N,GAAArQ,EAAAwQ,KAAA,SAAAC,GAAA,cAAAA,EAAA3L,KAAA2L,EAAApK,MAAA,cAAAoK,EAAApK,KAAA,EACX1E,KAAKqO,MAAMvP,SAAU2B,EAAEM,WAAF,EAAAW,IADV,wBAAAoN,EAAAC,SAAAH,EAAA5O,SAEjBuN,KAAKvG,IAHTvF,EAAA,EAAA+M,EAAuBxU,OAAOgV,QAAQV,GAAtC7M,EAAA+M,EAAA5P,OAAA6C,IAA8C,KAAA/H,EAAA6U,gCAR9C,OAAOvO,KAAKsO,eCNVW,GAAiB,IAAIb,GAErBc,GAAoB,CACxBf,iBACAD,gBAGFe,GAAeE,kBAAkBD,QAgClBE,cA7Bb,SAAAA,IAA+B,IAAnBC,EAAmBzO,UAAAhC,OAAA,QAAAD,IAAAiC,UAAA,GAAAA,UAAA,GAAhBqO,GAAgBjV,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAoP,GAAA,IAAAE,EACHD,EAAGtQ,WAAWvD,OAAhCrC,EADqBmW,EACrBnW,KAAMC,EADekW,EACflW,QACd4G,KAAK7G,KAAOA,EACZ6G,KAAK5G,QAAUA,EACf4G,KAAKiP,eAAiBI,4DAWV7W,GACZ,IAAMkC,EAAOsF,KAAKtE,UAAUlD,GAC5B,OAAOkC,GAAQA,EAAK2G,2CAGV7I,EAAUD,EAAS8I,GAC7BrB,KAAKiP,eAAexO,GAAGyN,YAAY1V,EAAUD,EAAS8I,yCAG1C7I,GACZwH,KAAKiP,eAAexO,GAAG0N,cAAc3V,qCAjBrC,OAAOwH,KAAKiP,eAAelQ,WAAWrD,4CAItC,OAAO1B,OAAOuV,KAAKvP,KAAKtE,oBCvBtB8T,cACJ,SAAAA,EAAY1R,GAAO9D,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAwP,GACjBxP,KAAKyP,MAAQ3R,qDAIb,MAAM,IAAI+C,MAAM,8BAId6O,eACJ,SAAAA,EAAYC,GAAU,IAAA3I,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA0P,IACpB1I,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAA0V,GAAAI,KAAA9P,KAAM,cACD+P,KAAOJ,EAFQ3I,sEAMpB,OAAOhH,KAAK+P,KAAKpT,YAPE6S,IAWjBQ,eACJ,SAAAA,EAAYD,GAAM,IAAAE,EAAA,OAAAjW,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAgQ,IAChBC,EAAAjW,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAgW,GAAAF,KAAA9P,KAAM,gBACD+P,KAAOA,EAFIE,sEAMhB,OAAOjQ,KAAK+P,KAAKpX,aAPI6W,IAWnBU,eACJ,SAAAA,EAAYH,GAAM,IAAAI,EAAA,OAAAnW,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAkQ,IAChBC,EAAAnW,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAkW,GAAAJ,KAAA9P,KAAM,gBACD+P,KAAOA,EAFII,sEAMhB,OAAOnQ,KAAK+P,KAAKpX,aAPI6W,IAWnBY,eACJ,SAAAA,EAAYlJ,GAAO,IAAAmJ,EAAA,OAAArW,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAoQ,IACjBC,EAAArW,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAoW,GAAAN,KAAA9P,KAAM,cACDuH,KAAOL,EAFKmJ,wEAMjB,OAAOrQ,KAAKuH,KAAK5O,aAPE6W,IAWjBc,eACJ,SAAAA,EAAYC,EAAUC,GAAW,IAAAC,EAAA,OAAAzW,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAsQ,IAC/BG,EAAAzW,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAsW,GAAAR,KAAA9P,KAAM,eACDuQ,SAAWA,EAChBE,EAAKD,UAAYA,EAHcC,6BADXjB,IAQlBkB,eACJ,SAAAA,EAAYC,EAAQC,GAAM,IAAAC,EAAA,OAAA7W,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA0Q,IACxBG,EAAA7W,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAA0W,GAAAZ,KAAA9P,KAAM,aACD2Q,OAASA,EACdE,EAAKD,KAAOA,EAHYC,oEAMrBC,GACH,OAAI9Q,KAAK2Q,OAAOjS,OAASyI,GAAE+B,KAClB4H,EACE9Q,KAAK2Q,OAAOjS,OAASyI,GAAEgC,OACxB2H,OADH,SAVWtB,IAgBhBuB,eACJ,SAAAA,EAAYC,EAAUC,GAAU,IAAAC,EAAA,OAAAlX,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA+Q,IAC9BG,EAAAlX,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAA+W,GAAAjB,KAAA9P,KAAM,YACDgR,SAAWA,EAChBE,EAAKD,SAAWA,EAHcC,oEAM3BC,GAEH,OADWnR,KAAKgR,SAASrY,MAChBoI,WAAF,EAAA/G,OAAA+K,EAAA,EAAA/K,CAAMmX,WATI3B,IAaf4B,eACJ,SAAAA,EAAYC,EAAUV,EAAQW,GAAW,IAAAC,EAAA,OAAAvX,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAoR,IACvCG,EAAAvX,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAoX,GAAAtB,KAAA9P,KAAM,cACDqR,SAAWA,EAChBE,EAAKZ,OAASA,EACdY,EAAKD,UAAYA,EAJsBC,oEAOpCrF,EAAMC,GACT,OAAOnM,KAAK2Q,OAAOjS,MACjB,KAAKyI,GAAE+B,KACL,OAAOgD,EAAOC,EAChB,KAAKhF,GAAEgC,MACL,OAAO+C,EAAOC,EAChB,KAAKhF,GAAEkC,IACL,GAAc,IAAV8C,EACF,MAAM,IAAItL,MAAJ,qBAAAxE,OAA+B6P,EAA/B,KAAA7P,OAAuC8P,IAE7C,OAAOD,EAAOC,EAElB,KAAKhF,GAAEiC,KACL,OAAO8C,EAAOC,EAChB,QACE,MAAM,IAAItL,MAAJ,yBAAAxE,OAAmC2D,KAAKkH,MAAMvK,KAA9C,cAvBS6S,ICyMRgC,cAzRb,SAAAA,EAAYzK,GAAS/M,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAwR,GACnBxR,KAAKF,MAAQ,EACbE,KAAK+G,OAASA,EACd/G,KAAKoD,KAAOpD,KAAK+G,OAAO,GACxB/G,KAAKyR,IAAM,yDAIX,OAAQzR,KAAK0R,YACX,KAAKvK,GAAEmC,KACLtJ,KAAKyR,IAAMzR,KAAKrD,OAChB,MACF,KAAKwK,GAAEC,OACLpH,KAAKyR,IAAMzR,KAAKqH,SAChB,MACF,QACErH,KAAK2R,SACL3R,KAAKyR,IAAMzR,KAAK4Q,OAIpB,GAAkB,OAAd5Q,KAAKoD,KACP,MAAM,IAAIvC,MAAJ,4BAAAxE,OAAsC2D,KAAKF,MAA3C,OAAAzD,OAAsD2D,KAAKoD,KAAKzG,KAAhE,MAGR,OAAOqD,KAAKyR,mCAKZ,IAAI1B,EAAM6B,EAAUzF,EAIpB,IAFA4D,EAAO/P,KAAK6R,OAEJ,CAAC1K,GAAE+B,KAAM/B,GAAEgC,OAAOkC,SAASrL,KAAK0R,aACtCE,EAAW5R,KAAK4R,WAChBzF,EAAQnM,KAAK6R,OACb9B,EAAO,IAAIqB,GAASrB,EAAM6B,EAAUzF,GAGtC,OAAO4D,iCAKP,IAAIA,EAAM6B,EAAUzF,EAIpB,IAFA4D,EAAO/P,KAAK8R,SAEJ,CAAC3K,GAAEiC,KAAMjC,GAAEkC,KAAKgC,SAASrL,KAAK0R,aACpCE,EAAW5R,KAAK4R,WAChBzF,EAAQnM,KAAK8R,SACb/B,EAAO,IAAIqB,GAASrB,EAAM6B,EAAUzF,GAGtC,OAAO4D,mCAOP,OAAQ/P,KAAK0R,YACX,KAAKvK,GAAE6B,OACL,OAAOhJ,KAAK+R,eACd,KAAK5K,GAAE+B,KACP,KAAK/B,GAAEgC,MACL,OAAOnJ,KAAKgS,UACd,KAAK7K,GAAEC,OACL,OAAOpH,KAAKqH,SACd,KAAKF,GAAEG,KACL,OAAOtH,KAAKuH,OACd,KAAKJ,GAAEK,SACL,OAAOxH,KAAKiS,OACd,KAAK9K,GAAE8B,OACL,MAAM,IAAIpI,MAAJ,4BAAAxE,OAAsC2D,KAAKF,MAA3C,OAAAzD,OAAsD2D,KAAKoD,KAAKzG,KAAhE,MACR,QACE,MAAM,IAAIkE,MAAM,0DAKpBb,KAAKkS,SACL,IAAMnC,EAAO/P,KAAK4Q,OAElB,OADA5Q,KAAKmS,SACEpC,iCAIP,GAAI/P,KAAK0R,aAAevK,GAAEG,KACxB,MAAM,IAAIzG,MAAM,qBAGlB,IAAMkP,EAAO,IAAIK,GAASpQ,KAAKoD,MAE/B,OADApD,KAAKuK,UACEwF,sCAIP,IAAI7D,EAAMC,EAEV,IAAKnM,KAAKoS,cACR,MAAM,IAAIvR,MAAM,sBASlB,GANAqL,EAAO,IAAIkE,GAASpQ,KAAKoD,MACzBpD,KAAKuK,UACLvK,KAAKuK,UACL4B,EAAQ,IAAIiE,GAASpQ,KAAKoD,MAC1BpD,KAAKuK,UAED4B,EAAM3T,SAAW0T,EAAK1T,SAAU,KAAA6Z,EAClBrS,KAAKsS,gBAAgBpG,EAAMC,GADToG,EAAAvY,OAAA6L,EAAA,EAAA7L,CAAAqY,EAAA,GACjCnG,EADiCqG,EAAA,GAC3BpG,EAD2BoG,EAAA,GAIpC,OAAO,IAAIjC,GAAUpE,EAAMC,2CAGbD,EAAMC,GACpBnM,KAAK+G,OAAO/G,KAAKF,MAAQ,GAAKqM,EAAM5E,KACpCvH,KAAK+G,OAAO/G,KAAKF,OAASoM,EAAK3E,KAC/B,IAAIiL,EAAOtG,EAGX,MAAO,CAFPA,EAAOC,EACPA,EAAQqG,kCAKR,GAAIxS,KAAK0R,aAAevK,GAAEK,SACxB,MAAM,IAAI3G,MAAM,oBAGlB,IAAMoR,EAAOjS,KAAKoD,KAClBpD,KAAKuK,UACLvK,KAAKkS,SACL,IAAM/R,EAAOH,KAAKyS,OAElB,OADAzS,KAAKmS,SACE,IAAIpB,GAAOkB,EAAM9R,kCAIxB,IACI4P,EADE0C,EAAO,GAMb,IAHA1C,EAAO/P,KAAK0S,WACZD,EAAK9Q,KAAKoO,GAEH/P,KAAK0R,aAAevK,GAAE2B,OAC3B9I,KAAKuK,UACLwF,EAAO/P,KAAK0S,WACZD,EAAK9Q,KAAKoO,GAGZ,OAAO0C,qCAIP,OAAIzS,KAAKoS,cACApS,KAAK2S,YACH3S,KAAK0R,aAAevK,GAAEO,OACxB1H,KAAK2H,SAEL3H,KAAK4Q,sCAKd,IAAIb,EAEJ,GAAI/P,KAAK0R,aAAevK,GAAEmC,KACxB,MAAM,IAAIzI,MAAM,kBAKlB,OAFAkP,EAAO,IAAIL,GAAS1P,KAAKoD,MACzBpD,KAAKuK,UACEwF,mCAIP,IAAMA,EAAO,IAAIC,GAAWhQ,KAAKoD,MAEjC,OADApD,KAAKuK,UACEwF,mCAIP,GAAI/P,KAAK0R,aAAevK,GAAEC,OAAQ,CAChC,IAAM2I,EAAO,IAAIG,GAAWlQ,KAAKoD,MAEjC,OADApD,KAAKuK,UACEwF,EAEP,MAAM,IAAIlP,MAAM,qDAKlB,GAAI,CAACsG,GAAE+B,KAAM/B,GAAEgC,MAAOhC,GAAEiC,KAAMjC,GAAEkC,KAAKgC,SAASrL,KAAK0R,YAAa,CAC9D,IAAM3B,EAAO/P,KAAKoD,KAElB,OADApD,KAAKuK,UACEwF,EAEP,MAAM,IAAIlP,MAAM,qDAKlB,GAAIb,KAAK0R,aAAevK,GAAE0B,OACxB,MAAM,IAAIhI,MAAM,uBAGlBb,KAAKuK,2CAIL,GAAIvK,KAAK0R,aAAevK,GAAE6B,OACxB,MAAM,IAAInI,MAAM,4BAGlBb,KAAKuK,2CAIL,GAAIvK,KAAK0R,aAAevK,GAAE8B,OACxB,MAAM,IAAIpI,MAAM,6BAGlBb,KAAKuK,4CAIL,IAAK,CAACpD,GAAE+B,KAAM/B,GAAEgC,OAAOkC,SAASrL,KAAK0R,YACnC,MAAM,IAAI7Q,MAAM,0BAGlB,IAAMuC,EAAOpD,KAAKoD,KAGlB,OAFApD,KAAKuK,UACQ,IAAImG,GAAQtN,EAAMpD,KAAK8R,4CAKhC9R,KAAKF,MAAQE,KAAK+G,OAAOnI,OAAS,GACpCoB,KAAKF,QACLE,KAAKoD,KAAOpD,KAAK+G,OAAO/G,KAAKF,QAE7BE,KAAKoD,KAAO,2CAKd,OACEpD,KAAK0R,SAAS,KAAOvK,GAAEG,MACpBtH,KAAK0R,SAAS,KAAOvK,GAAE4B,OACvB/I,KAAK0R,SAAS,KAAOvK,GAAEG,wCAK5B,OACEtH,KAAK0R,SAAS,KAAOvK,GAAEyL,QACpB5S,KAAK0R,SAAS,KAAOvK,GAAEmC,MACvBtJ,KAAK0R,SAAS,KAAOvK,GAAEyL,wCAIrBC,GACP,IAAIA,EAWF,OAAO7S,KAAKoD,MAAQpD,KAAKoD,KAAK1E,KAV9B,GAAImU,EAAa,EACf,MAAM,IAAIhS,MAAM,qCAGlB,IAAMf,EAAQE,KAAKF,MAAQ+S,EAE3B,OAAI/S,EAAQE,KAAK+G,OAAOnI,OACfoB,KAAK+G,OAAOjH,GAAOpB,UAD5B,WCxFSoU,cA1Lb,SAAAA,EAAYta,GAAWwB,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA8S,GACrB9S,KAAKxH,SAAWA,EAChBwH,KAAK+S,MAAQ,KACb/S,KAAKgT,MAAQ,GACbhT,KAAKqB,OAAS,KACdrB,KAAKqO,MAAQ,IAAIe,sDAGZ7W,GACL,IACE,IAAM0a,EAAQ,IAAIzJ,GAAMjR,GAGxB,OAFe,IAAIiZ,GAAQyB,EAAMC,aACdC,QAEnB,MAAOJ,GAEP,MADA/S,KAAK+S,MAAQA,EACP,IAAIlS,MAnBI,6CAuBTrI,GACP,IAAM4a,EAASC,GAAMC,UAAU9a,GAE/B,IAAK4a,EAAO3B,IACV,OAAO2B,EAAO/R,OAGhB,IACErB,KAAKqB,OAAS+R,EAAO/R,OAASrB,KAAKuT,UAAUH,EAAO3B,KACpD,MAAOsB,GAGP,MAFA/S,KAAK+S,MAAQK,EAAOL,MAAQA,EAC5B/S,KAAKqB,OAAS+R,EAAO/R,OAASrB,KAAKwT,gBAC7BT,EAGR,OAAO/S,KAAKqB,yCAGJ0O,GACR,OAAQA,EAAKN,OACX,IAAK,aACH,OAAOzP,KAAKkQ,WAAWH,GACzB,IAAK,WACH,OAAO/P,KAAKoQ,SAASL,GACvB,IAAK,WACH,OAAO/P,KAAK0P,SAASK,GACvB,IAAK,aACH,OAAO/P,KAAKgQ,WAAWD,GACzB,IAAK,YACH,OAAO/P,KAAKsQ,UAAUP,GACxB,IAAK,SACH,OAAO/P,KAAK+Q,OAAOhB,GACrB,IAAK,WACH,OAAO/P,KAAKoR,SAASrB,GACvB,IAAK,UACH,OAAO/P,KAAK0Q,QAAQX,GACtB,QACE,IAAM0D,EAAW1D,EAAKN,QAAUM,EAAK2D,aAAe,IAAI5V,KACxD,MAAM,IAAI+C,MAAJ,yBAAAxE,OAAmCoX,sCAQtC1D,GACP,OAAOA,EAAK4D,0CAGH5D,GACT,OAAOA,EAAK4D,0CAGH5D,GACT,OAAOA,EAAK4D,uCAON5D,GACN,IAAM1O,EAASrB,KAAKuT,UAAUxD,EAAKa,MACnC,OAAOb,EAAK4D,KAAKtS,oCAGV0O,GACP,IAAM1O,EAASrB,KAAK4T,cAAc7D,EAAKvX,UACvC,YAAkBmG,IAAX0C,EACH,EACAA,mCAGG0O,GACP,IAAM7D,EAAOlM,KAAKuT,UAAUxD,EAAKsB,UAC3BlF,EAAQnM,KAAKuT,UAAUxD,EAAKuB,WAElC,GAAoB,kBAATpF,EACT,MAAM,IAAIrL,MAAJ,0BAAAxE,OAAoC6P,EAApC,MAGR,GAAqB,kBAAVC,EACT,MAAM,IAAItL,MAAJ,0BAAAxE,OAAoC8P,EAApC,MAGR,OAAO4D,EAAK4D,KAAKzH,EAAMC,qCAGf4D,GASR,IATc,IAAA1D,EACuB5G,EAAcsK,EAAKQ,SAAS/X,UADnD8T,EAAAtS,OAAA6L,EAAA,EAAA7L,CAAAqS,EAAA,GACPwH,EADOvH,EAAA,GACOwH,EADPxH,EAAA,GAAAI,EAEyBjH,EAAcsK,EAAKS,UAAUhY,UAFtDmU,EAAA3S,OAAA6L,EAAA,EAAA7L,CAAA0S,EAAA,GAEPqH,EAFOpH,EAAA,GAEQqH,EAFRrH,EAAA,GAGRsH,EAAgBjS,KAAKK,IAAIwR,EAAcE,GACvCG,EAAclS,KAAKC,IAAI4R,EAAcE,GACrCI,EAAgBnS,KAAKK,IAAIyR,EAAcE,GACvCI,EAAcpS,KAAKC,IAAI6R,EAAcE,GACrCvB,EAAO,GAEJ4B,EAAOF,EAAeE,GAAQD,EAAaC,IAClD,IAAK,IAAIC,EAAOL,EAAeK,GAAQJ,EAAaI,IAAQ,CAC1D,IAAM9b,EAAQ,GAAA6D,OAAM2I,EAAesP,GAArB,KAAAjY,OAA8BgY,EAAO,GAC7ChT,EAASrB,KAAK4T,cAAcpb,QAEnBmG,IAAX0C,GACFoR,EAAK9Q,KAAKN,GAKhB,OAAOoR,wCAGK8B,GACZ,IAAIlT,EAEJ,IAAKrB,KAAKwU,gBAAgBD,GACxB,MAAM,IAAI1T,MAAM,0BAGlB,YAAkClC,IAA9BqB,KAAKgT,MAAMuB,GACNvU,KAAKgT,MAAMuB,IAGpBlT,EAASgS,GAAMoB,UAAUF,GACzBvU,KAAKgT,MAAMuB,GAAiBlT,EACrBA,kCAGF0O,GACL,IAAMoB,EAAgB,GADXhN,GAAA,EAAAC,GAAA,EAAAC,OAAA1F,EAAA,IAGX,QAAA2F,EAAAC,EAAsBwL,EAAKkB,SAA3BzM,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAqC,KAA5BuQ,EAA4BpQ,EAAA3L,MAC7B0I,EAASrB,KAAKuT,UAAUmB,GAEN,cAApBA,EAAUjF,MACZ0B,EAAcxP,KAAdZ,MAAAoQ,EAAanX,OAAA+K,EAAA,EAAA/K,CAASqH,IAEtB8P,EAAcxP,KAAKN,IATZ,MAAAwD,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,GAaX,OAAO0L,EAAK4D,KAAKxC,2CAGH3Y,GAAU,IAAAoU,EACKnH,EAAcjN,GADnBqU,EAAA7S,OAAA6L,EAAA,EAAA7L,CAAA4S,EAAA,GACjBL,EADiBM,EAAA,GACPL,EADOK,EAAA,GAGxB,QAAI7K,KAAKK,IAAIkK,EAAUC,GAAY,OAC/BD,GAAYvM,KAAKqO,MAAMjV,YACvBoT,GAAYxM,KAAKqO,MAAMlV,+CAIb,IACGwb,EAAa3U,KAAK+S,MAA3B6B,QAER,OAAID,EAAStO,MAAM,qBArLM,UAuLdsO,EAAStO,MAAM,uBAtLC,QACX,mBCLdwO,GACJ,SAAAA,EAAYtc,GAAUyB,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA6U,GACpB7U,KAAKzH,QAAUA,EACfyH,KAAK+S,MAAQ,KACb/S,KAAKqB,OAAS,KACdrB,KAAKyR,IAAM,MA+IT4B,GAAQ,eA1IZ,SAAAyB,IAAe9a,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA8U,GACb9U,KAAK+U,IAAM,GACX/U,KAAKgV,QAAU,KACfhV,KAAKiV,QAAU,KACfjV,KAAKkV,WAAa,IAAI9F,2DAGZ5W,GACVwH,KAAKmV,kBACLnV,KAAKoV,IAAI5c,GACTwH,KAAKqV,wDAGW,IAAArO,EAAAhH,KAChBA,KAAKgV,QAAU,IAAIM,IAEnBtb,OAAOuV,KAAKvP,KAAK+U,KAAK3U,QAAQ,SAAAgT,GAC5BpM,EAAKgO,QAAQO,IAAInC,iCAIjB5a,GACF,IADY,IAAAyX,EAAAjQ,KACLA,KAAKgV,QAAQQ,KAAO,GAAG,CACvBhd,IACHA,EAAWwB,OAAA+K,EAAA,EAAA/K,CAAIgG,KAAKgV,SAAS,IAG/B,IACEhV,KAAKiV,QAAU,IAAIK,IAAI,CAAC9c,IACJ,IAAIsa,GAAYta,GACxBid,SAASjd,GACrB,MAAOua,IAET/S,KAAKiV,QAAQ7U,QAAQ,SAAA5H,GAAQ,OAAIyX,EAAK+E,QAAQU,OAAOld,KACrDA,EAAW,KAGbwH,KAAKiV,QAAU,KACfjV,KAAKgV,QAAU,uCAGPxc,GACR,GAAKwH,KAAK2V,UAAUnd,GAApB,CAIAwH,KAAK4V,cAAcpd,GACnBwH,KAAKgV,QAAQU,OAAOld,GACpBwH,KAAKiV,QAAQM,IAAI/c,GACjB,IACM6I,EADc,IAAIyR,GAAYta,GACTid,SAASjd,GAEpC,OADAwH,KAAKiV,QAAQS,OAAOld,GACb6I,yCAGK7I,GACZ,OAAIA,KAAYwH,KAAK+U,IACZ1B,GAAM0B,IAAIvc,GAAU6I,OAEpB,yCAIG7I,GACZ,GAAIwH,KAAKiV,QAAQY,IAAIrd,GACnB,MAAM,IAAIqI,MAAM,4DAOlB,IAFA,IAAMiV,EAAe,IAAIR,IAAItV,KAAKkV,WAAWa,WAE7CtU,EAAA,EAAA+M,EAA+BxU,OAAOgV,QAAQhP,KAAK+U,KAAnDtT,EAAA+M,EAAA5P,OAAA6C,IAAyD,KAAA7H,EAAA4U,EAAA/M,GAAA/H,EAAAM,OAAA6L,EAAA,EAAA7L,CAAAJ,EAAA,GAA/CpB,EAA+CkB,EAAA,GAArC0Z,EAAqC1Z,EAAA,GAC/CnB,EAAoB6a,EAApB7a,QAAS8I,EAAW+R,EAAX/R,OACX2U,EAAahW,KAAKkV,WAAWtB,cAAcpb,GAEjDsd,EAAaJ,OAAOld,GAEhB6I,IAAW2U,GACbhW,KAAKkV,WAAWhH,YAAY1V,EAAUD,EAAS8I,GAVvC,IAAA8C,GAAA,EAAAC,GAAA,EAAAC,OAAA1F,EAAA,IAcZ,QAAA2F,EAAAC,EAAqBuR,EAArBtR,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAmC,KAA1B3L,EAA0B8L,EAAA3L,MACjCqH,KAAKkV,WAAW/G,cAAc3V,IAfpB,MAAAqM,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,sCAmBJ7L,EAAUD,GAA+B,IAAtB0d,IAAsBrV,UAAAhC,OAAA,QAAAD,IAAAiC,UAAA,KAAAA,UAAA,GAC3CwS,EAAS,IAAIyB,GAAOtc,GACpB2d,EAAc,IAAIpD,GAAYta,GAC9B2d,EAAYnW,KAAK2V,UAAUnd,IAAawH,KAAKsT,UAAU9a,GAE7D,IAAI2d,GAAaA,EAAU5d,UAAYA,EAAvC,CAIA,IACEyH,KAAK+U,IAAIvc,GAAY4a,EACrBA,EAAO3B,IAAMyE,EAAYE,OAAO7d,GAChC,MAAOwa,GACPK,EAAOL,MAAQK,EAAO/R,OAAS0R,EAAM6B,QAIvC,OADAqB,GAAmBjW,KAAKqW,YAAY7d,GAC7B4a,qCAGC5a,GACR,OAAOA,KAAYwH,KAAK+U,sCAGhBvc,GAER,OADAwH,KAAKsW,oBAAoB9d,GAClBwH,KAAK+U,IAAIvc,qCAGRA,GACJA,KAAYwH,KAAK+U,aACZ/U,KAAK+U,IAAIvc,GAChBwH,KAAKqW,kDAKPrW,KAAK+U,IAAM,GACX/U,KAAKgV,QAAU,KACfhV,KAAKiV,QAAU,KACfjV,KAAKkV,WAAa,IAAI9F,+CAGJ5W,GAClB,IAAKwH,KAAK2V,UAAUnd,GAClB,MAAM,IAAIqI,MAAM,8BAQPwS,eCtJTkD,GAAe,IAAInI,GAEzBmI,GAAapH,kBAAkB,CAC7BhB,iBACAtP,gBACAqP,iBAGaqI,UCVTC,uGAOQhe,GACV,OAAOwH,KAAKuW,aAAaxX,WAAWrD,UAAUlD,wCAJ9C,OAAOge,EAAaD,sBAJlBC,GACGD,aAAeA,GAWTC,UCiBAC,eA5Bb,SAAAA,EAAYje,EAAU2d,EAAWO,GAAW,IAAA1P,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAyW,IAC1CzP,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAyc,GAAA3G,KAAA9P,QACKxH,SAAWA,EAChBwO,EAAKzO,QAAUme,EAAUne,QACzByO,EAAK3F,OAASqV,EAAUrV,OACxB2F,EAAK2P,SAAWR,GAAa,CAC3B5d,QAAS4d,EAAU5d,QACnB8I,OAAQ8U,EAAU9U,QAPsB2F,yEAY1ChH,KAAKuW,aAAa9V,GAAGyN,YAAYlO,KAAKxH,SAAUwH,KAAKzH,QAASyH,KAAKqB,QACnErB,KAAKuW,aAAa9V,GAAG5B,cAAcmB,KAAKxH,8CAIxC,GAAIwH,KAAK2W,SAAU,KAAAC,EACW5W,KAAK2W,SAAzBpe,EADSqe,EACTre,QAAS8I,EADAuV,EACAvV,OACjBrB,KAAKuW,aAAa9V,GAAGyN,YAAYlO,KAAKxH,SAAUD,EAAS8I,QAEzDrB,KAAKuW,aAAa9V,GAAG0N,cAAcnO,KAAKxH,UAG1CwH,KAAKuW,aAAa9V,GAAG5B,cAAcmB,KAAKxH,iBAzBnBge,ICoBVK,eAnBb,SAAAA,EAAYre,GAAU,IAAAwO,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA6W,IACpB7P,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAA6c,GAAA/G,KAAA9P,QACK2W,SAAW3P,EAAK8P,YAAYte,GACjCwO,EAAKxO,SAAWA,EAHIwO,yEAOpBhH,KAAKuW,aAAa9V,GAAG0N,cAAcnO,KAAKxH,UACxCwH,KAAKuW,aAAa9V,GAAG5B,cAAcmB,KAAKxH,8CAIxC,GAAKwH,KAAK2W,SAAV,CADU,IAAAC,EAEkB5W,KAAK2W,SAAzBpe,EAFEqe,EAEFre,QAAS8I,EAFPuV,EAEOvV,OACjBrB,KAAKuW,aAAa9V,GAAGyN,YAAYlO,KAAKxH,SAAUD,EAAS8I,GACzDrB,KAAKuW,aAAa9V,GAAG5B,cAAcmB,KAAKxH,kBAhBjBge,ICOZO,kGARX,MAAM,IAAIlW,MAAM,kEAIhB,MAAM,IAAIA,MAAM,4CCYLmW,eAdb,SAAAA,EAAYC,GAAY,IAAAjQ,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAgX,IACtBhQ,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAgd,GAAAlH,KAAA9P,QACKiX,WAAaA,EAFIjQ,sEAMtBhH,KAAKiX,WAAWC,2CAIhBlX,KAAKiX,WAAWE,iBAXYJ,ICejBK,eAdb,SAAAA,EAAYC,GAAc,IAAArQ,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAoX,IACxBpQ,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAod,GAAAtH,KAAA9P,QACKqX,aAAeA,EAFIrQ,sEAMxBhH,KAAKqX,aAAaH,2CAIlBlX,KAAKqX,aAAaF,iBAXYJ,IC8EnB3J,GAFC,eArEd,SAAAkK,EAAYjE,GAAwB,IAAArM,EAAAhH,KAAjBqP,EAAiBzO,UAAAhC,OAAA,QAAAD,IAAAiC,UAAA,GAAAA,UAAA,GAAd2V,GAAcvc,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAsX,GAAAtX,KA6CpCuX,YAAchR,EAAS,WACrB,IAAM3J,EAAQoK,EAAKuP,aAAaxX,WAAWrD,UAE3C2X,GAAMmE,WAENxd,OAAOgV,QAAQpS,GAAOwD,QAAQ,SAAA7G,GAAsB,IAAAG,EAAAM,OAAA6L,EAAA,EAAA7L,CAAAT,EAAA,GAApBf,EAAoBkB,EAAA,GAC1CnB,EAD0CmB,EAAA,GAC1CnB,QACR8a,GAAMoE,UAAUjf,EAAUD,GAAS,KAGrC8a,GAAMgD,eACL,KAAK,GAvDNrW,KAAKuW,aAAelH,EACpBrP,KAAKqT,MAAQA,EACbrT,KAAK0X,MAAQ,GACb1X,KAAK2X,MAAQ,GACb3X,KAAKmN,QAAU,oDAGZzO,GAAe,QAAA4C,EAAAV,UAAAhC,OAANuB,EAAM,IAAAoB,MAAAD,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAANrB,EAAMqB,EAAA,GAAAZ,UAAAY,GAClB,IAAMoW,EAAU5X,KAAK6X,SAAL9W,MAAAf,KAAA,CAActB,GAAdrC,OAAuB8D,IACvCH,KAAK8N,kBACL9N,KAAK0X,MAAM/V,KAAKiW,oCAGTlZ,GAAe,QAAAoD,EAAAlB,UAAAhC,OAANuB,EAAM,IAAAoB,MAAAO,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAN5B,EAAM4B,EAAA,GAAAnB,UAAAmB,GACtB,OAAQrD,GACN,IAAK,MACH,IAAMuY,EAAUjd,OAAA8d,GAAA,EAAA9d,CAAOyc,GAActW,GACrC,OAAO,IAAI6W,GAAkBC,GAC/B,IAAK,QACH,IAAMI,EAAYrd,OAAA8d,GAAA,EAAA9d,CAAO6c,GAAgB1W,GACzC,OAAO,IAAIiX,GAAoBC,mCAKnC,GAAIrX,KAAK0X,MAAM9Y,OAAS,EAAG,CACzB,IAAMgZ,EAAU5X,KAAK0X,MAAM3J,MAC3B/N,KAAK2X,MAAMhW,KAAKiW,GAChBA,EAAQhK,OAGV5N,KAAKuX,6CAIL,GAAIvX,KAAK2X,MAAM/Y,OAAS,EAAG,CACzB,IAAMgZ,EAAU5X,KAAK2X,MAAM5J,MAC3B/N,KAAK0X,MAAM/V,KAAKiW,GAChBA,EAAQjK,OAGV3N,KAAKuX,wDAiBDvX,KAAK0X,MAAM9Y,SAAWoB,KAAKmN,SAC7BnN,KAAK0X,MAAM1J,QAGThO,KAAK2X,MAAM/Y,OAAS,IACtBoB,KAAK2X,MAAM/Y,OAAS,YAKV,CAAiByU,ICXlB0E,cA9Db,SAAAA,EAAY9Z,GAAQjE,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA+X,GAClB/X,KAAK/B,MAAQA,oDAGT,IAGA+Z,EAFIxf,EAAawH,KAAK/B,MAAlBzF,SACFyf,EAAajY,KAAK/B,MAAMvF,WAAWC,MAGzC,GAAIqH,KAAK4K,aAAaqN,GAChBjY,KAAK/B,MAAM1F,QAAQqG,OAAS,IAC9BwO,GAAQzL,KAAK,QAASnJ,GACtB6a,GAAM6E,UAAU1f,QAHpB,CAUEwf,EADEhY,KAAK+J,UAAUkO,GACLjY,KAAKmY,cAAcF,GAEnBA,EAGd,IAAM9B,EAAY9C,GAAM0B,IAAIvc,GACtBke,EAAYrD,GAAMoE,UAAUjf,EAAUwf,GAC5C5K,GAAQzL,KAAK,MAAOnJ,EAAU2d,EAAWO,sCAGjC/Z,GACR,OAAOA,EAAKiC,OAAS,GAAiB,MAAZjC,EAAK,wCAGpBA,GACX,OAAuB,IAAhBA,EAAKiC,QAAgBwH,QAAQzJ,EAAK0J,MAAM,gDAGnC1N,GAAO,IAAAqO,EAAAhH,KAInB,OAHc,IAAIwJ,GAAM7Q,GACHua,YAGlBjM,IAAI,SAAAC,GACH,IAAMvO,EAAQqO,EAAKoR,cAAclR,GAEjC,OADmBA,EAAMtH,YAAc,EAAI,IAAM,IAC7BjH,IAErBiJ,KAAK,0CAGIsF,GACZ,OAAQA,EAAMxI,MACZ,KAAKyI,GAAEK,SACL,OAAON,EAAMvK,KAAKsL,cACpB,KAAKd,GAAEC,OACL,OAAOF,EAAMvO,MACf,QACE,OAAOuO,EAAMvK,eCtDfgB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,4BAuDV,IAAMsa,GAAqB,CACzBnK,gBAGaoK,eAlBf,SAAyBhf,GASvB,MAAO,CACLZ,WAHEY,EALFkC,OACE/C,SACEC,aAcgC2f,GAAzBC,CAtDf,SAAiBra,GAEf,IAAMsa,EAAkB,IAAIR,GAAgB9Z,GACtCua,EAAU/Y,IAAMgZ,YAatB,OACEra,EAAAC,EAAAC,cAACoa,GAAD,CACEC,IAAKH,EACLI,OARJ,SAAsB3K,IANtB,SAAyBA,GACnBuK,EAAQjN,QAAQsN,SAAS5K,EAAM6K,gBACR,WAAvB7a,EAAMiN,SAASD,KACnBsN,EAAgBQ,MAIhBC,CAAgB/K,GAChBhQ,EAAMgb,aAQHhb,EAAMib,YC5BAC,GAAKnf,OAAA4D,EAAA,EAAA5D,CAAA,SAAA6D,OAAA,WAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,qDAOlB,SAASqb,GAAT7f,GAAwE,IAApD8f,EAAoD9f,EAApD8f,OAAQ1gB,EAA4CY,EAA5CZ,MAAO0G,EAAqC9F,EAArC8F,MAAOpB,EAA8B1E,EAA9B0E,MAAOqb,EAAuB/f,EAAvB+f,SAAUC,EAAahgB,EAAbggB,UACzD,OACEvf,OAAAwf,EAAA,EAAAxf,CAACmf,GAADnf,OAAAyf,OAAA,CACEd,IAAKU,EACL3b,IAAK2B,EACL1G,MAAOA,EACP2gB,SAAUA,EACVC,UAAWA,GACPtb,IAiBVmb,GAASM,aAAe,CACtBra,MAAO,GACPpB,MAAO,IAGMmb,UClCTzb,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,cACM,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOM,SAASC,QAD3C,sCAGc,SAAAgB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOc,QAH1C,qBAIY,SAAAS,GAAK,OAAIA,EAAMxB,MAAMC,OAAOM,SAASE,QAJjD,gDAUJyc,GAAG3f,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,uDAMH6b,GAAQ5f,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,qCAKR8b,GAAC7f,OAAA4D,EAAA,EAAA5D,CAAA,KAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,oCAKD+b,GAAE9f,OAAA4D,EAAA,EAAA5D,CAAA,MAAA6D,OAAA,YAAA7D,CAAA,iCAEkB,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOM,SAASE,QAFvD,sDAKF6c,wLASS,IAEPC,EAFOC,EACqBja,KAAK/B,MAA7Bic,EADGD,EACHC,SAAUthB,EADPqhB,EACOrhB,UADPuL,GAAA,EAAAC,GAAA,EAAAC,OAAA1F,EAAA,IAIX,QAAA2F,EAAAC,EAAkB2V,EAAlB1V,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA4B,KAAnBgW,EAAmB7V,EAAA3L,MAC1B,KAAIC,GAAauhB,EAAMC,WAAa,GAGlC,MAFAJ,EAAYG,GANL,MAAAtV,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,GAYX,OAAI2V,GAAoC,OAAvBA,EAAUK,SAA4BL,EACnDA,GAAaphB,GAAaohB,EAAUK,SAAmBL,EACpD,uCAGCG,GACR,IAAMlP,EAAMkP,EAAMjS,OAAOD,cACzB,OAAOG,EAAa6C,oCAIpB,IAEI9C,EAFEgS,EAAQna,KAAKsa,aACXC,EAAcva,KAAKwa,QAAnBD,UAGR,OAAKJ,GACLhS,EAASnI,KAAKya,UAAUN,GAGtBngB,OAAAwf,EAAA,EAAAxf,CAAC0gB,GAAD,CACEhd,IAAKA,YAAF,OACM6c,EAAUI,OADhB,WAEOJ,EAAUrO,KAFjB,QAKHlS,OAAAwf,EAAA,EAAAxf,CAAC2f,GAAD,CACEjc,IAAGkd,IAIFzS,EAAOlH,YAEVjH,OAAAwf,EAAA,EAAAxf,CAAC8f,GAAD,MACA9f,OAAAwf,EAAA,EAAAxf,CAAC4f,GAAD,gBACA5f,OAAAwf,EAAA,EAAAxf,CAAC2f,GAAD,KAAMxR,EAAOjH,SACblH,OAAAwf,EAAA,EAAAxf,CAAC4f,GAAD,gBACA5f,OAAAwf,EAAA,EAAAxf,CAAC6f,GAAD,KAAI1R,EAAOhH,WArBM,YApCK1B,IAAMob,eAA9Bd,GAEGe,YAActb,EAkERua,8BCpGTgB,GAAE/gB,OAAA4D,EAAA,EAAA5D,CAAA,MAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,kBAIR,SAASid,GAATzhB,GAA+D,IAAvC0hB,EAAuC1hB,EAAvC0hB,KAAMnb,EAAiCvG,EAAjCuG,MAAOob,EAA0B3hB,EAA1B2hB,SAAUC,EAAgB5hB,EAAhB4hB,aAC7C,OACEnhB,OAAAwf,EAAA,EAAAxf,CAAC+gB,GAAD,CACEK,SAAU,EACVD,aAAc,kBAAMA,EAAarb,KAEhCob,GAAYD,EAAK/d,OAAS+d,EAAK/d,OAAS+d,EAAKxY,MAepDuY,GAAatB,aAAe,CAC1ByB,aA5BW,cA+BEH,UC9BTK,GAAErhB,OAAA4D,EAAA,EAAA5D,CAAA,MAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,wCAMFud,6LAWc,IAAAtU,EAAAhH,KAChB,OAAOA,KAAK/B,MAAMsd,MACftU,IAAI,SAACgU,EAAMnb,GAAP,OACH1B,EAAAC,EAAAC,cAACkd,GAAD,CACEvQ,IAAKnL,EACLA,MAAOA,EACPmb,KAAMA,EAAKA,KACX5b,MAAKrF,OAAAC,EAAA,EAAAD,CAAA,GAAMgN,EAAK/I,MAAMF,OAAO0d,IAC7BP,SAAUD,EAAKC,SACfC,aAAcnU,EAAK/I,MAAMkd,kDAKxB,IAAAlB,EACmBja,KAAK/B,MAAvBsd,EADDtB,EACCsB,MAAOxd,EADRkc,EACQlc,OAEf,OAAqB,IAAjBwd,EAAM3c,OAAuB,KAG/BR,EAAAC,EAAAC,cAAC+c,GAAD,CACED,UAAW,EACX/b,MAAOtB,EAAO2d,IAEb1b,KAAK2b,0BAnCgBlc,IAAMob,eAA9BS,GAEGM,WAAa,CAClBT,aAAcU,KAAU5J,KACxBsJ,MAAOM,KAAUC,MAAMC,WACvBhe,OAAQ8d,KAAUG,MAAM,CACtBN,GAAIG,KAAUI,OACdR,GAAII,KAAUI,UAkCLX,UC1CT3d,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,6BAKJme,GAAa,CAAApe,KAAA,SAAAC,OAAA,oBAIboe,GAAYniB,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CACdkiB,GADc,eAEF,SAAAje,GAAK,OAAIA,EAAMxB,MAAMC,OAAOM,SAASC,QAFnC,KAKZmf,GAAcpiB,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAChBkiB,GADgB,eAEJ,SAAAje,GAAK,OAAIA,EAAMxB,MAAMC,OAAOM,SAASE,QAFjC,KAKdyc,GAAG3f,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,uDAMH6b,GAAQ5f,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,oBAIRse,eAiBJ,SAAAA,IAAc,IAAArV,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAqc,IACZrV,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAqiB,GAAAvM,KAAA9P,QARF1G,MAAQ,CACNgjB,UAAW,GACXC,UAAW,EACXrR,SAAU,KACVsR,WAAW,GAKXxV,EAAKyV,cAAgBzV,EAAKyV,cAAclP,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACrBA,EAAKqD,SAAWrD,EAAKqD,SAASkD,KAAdvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAHJA,mFAMM,IAAAiJ,EAAAjQ,KAClBA,KAAK2c,SAAS,CAAEJ,UAAW,GAAK,WAC9BtM,EAAK2M,+DAIaC,EAAWC,GAC/B,OAAO9c,KAAK1G,MAAMgjB,YAAcQ,EAAUR,qDAGzBS,EAAWC,GAC5Bhd,KAAKid,kBAAkBD,GACvBhd,KAAKkd,gBAAgBH,GACrB/c,KAAKmd,4DAILnd,KAAKwa,QAAQ4C,0BAAyB,2CAGxBL,GAAW,IAAA5M,EAAAnQ,KACrB+c,EAAU7V,QAAUlH,KAAK/B,MAAMiJ,OAEnClH,KAAK2c,SAAS,CAAEJ,UAAW,GAAK,WAC9BpM,EAAKyM,2DAISI,GAAW,IACnB9R,EAAalL,KAAKwa,QAAlBtP,SAEJ8R,EAAU9R,WAAaA,IACzBlL,KAAK2c,SAAS,CAAEzR,aAChBlL,KAAKqd,iBAAiBnS,yCAIb,IACHA,EAAalL,KAAKwa,QAAlBtP,SACJlL,KAAK1G,MAAM4R,WAAaA,GACxB,CAAC,QAAS,OAAOG,SAASH,EAASD,MAAQjL,KAAK1G,MAAMkjB,WACxDxc,KAAKvB,wEAKP,IAAM6e,EAAiBtd,KAAKwa,QAAQ9hB,WAAWC,MACvCuO,EAAUlH,KAAK/B,MAAfiJ,MACAgB,EAAWlI,KAAK1G,MAAMgjB,UAAUtc,KAAK1G,MAAMijB,WAA3CrU,OACFqV,EAAkBrW,EAAMpH,MAAQoH,EAAMvK,KAAKiC,OAC3C4e,EAAYF,EAAetV,MAAM,EAAGd,EAAMpH,OAC1C2d,EAAaH,EAAetV,MAAMuV,GAClC5kB,EAAK,GAAA0D,OAAMmhB,GAANnhB,OAAkB6L,EAAlB,MAAA7L,OAA6BohB,GAClC7kB,EAAY4kB,EAAU5e,OAASsJ,EAAOtJ,OAAS,EACrDoB,KAAKwa,QAAQ/b,sBAAsB9F,EAAOC,0CAG7B,IAgBT2jB,EAhBSlM,EAAArQ,KAEPrD,EADYqD,KAAK/B,MAAfiJ,MACWvK,KAAKsL,cAClBqU,EAAYtiB,OACfuV,KAAKnH,GACLsV,OAAO,SAAAxV,GAAM,OAAIA,EAAOyV,WAAWhhB,KACnCihB,OACA3W,IAAI,SAAAiB,GAAM,MAAK,CACd+S,KAAM,CACJxY,KAAM4N,EAAKwN,SAAS3V,GACpBhL,OAAQmT,EAAKyN,WAAW5V,IAE1BgT,UAAU,EACVhT,YAEAsU,GAAY,EAGhBD,EAAYva,KAAKC,IAAID,KAAKK,IAAIia,EAAU1d,OAAS,EAAGoB,KAAK1G,MAAMijB,WAAY,GAEvED,EAAU1d,OAAS,IACrB0d,EAAUC,GAAWrB,SAAWsB,GAAY,GAG9Cxc,KAAKwa,QAAQ4C,yBAAyBZ,GACtCxc,KAAK2c,SAAS,CAAEL,YAAWC,YAAWC,uDAGvBtR,GAAU,IAAAuF,EAAAzQ,KACrBuc,EAAYvc,KAAK1G,MAAMijB,UAE3B,OAAQrR,EAASD,KACf,IAAK,UACDsR,EAAYvc,KAAK1G,MAAMijB,UAAY,EACrC,MACF,IAAK,YACDA,EAAYvc,KAAK1G,MAAMijB,UAAY,EAIzCvc,KAAK2c,SAAS,CAAEJ,aAAa,WAC3B9L,EAAKmM,kDAIAL,GAAW,IAAA1L,EAAA7Q,KAClBA,KAAK2c,SAAS,CAAEJ,aAAa,WAC3B1L,EAAK+L,kDAIA1U,GACP,OACElO,OAAAwf,EAAA,EAAAxf,CAACmiB,GAAD,KACEniB,OAAAwf,EAAA,EAAAxf,CAAC+jB,GAAD,KACG7V,uCAMEA,GACT,OACElO,OAAAwf,EAAA,EAAAxf,CAACoiB,GAAD,KACEpiB,OAAAwf,EAAA,EAAAxf,CAAC+jB,GAAD,KACG7V,GAEHlO,OAAAwf,EAAA,EAAAxf,CAACgkB,GAAD,KACG5V,EAAaF,GAAQ/G,kDAMd,IACN1E,EAAUuD,KAAK/B,MAAfxB,MAER,MAAO,CACLif,GAAI,CACFuC,UAAW,EACXC,UAAS,WAAA7hB,OAAaI,EAAMC,OAAOc,QACnCX,OAAM,aAAAR,OAAeI,EAAMC,OAAOM,SAASE,QAC3ClC,MAAO,4CAKCiT,GACZA,EAAMkQ,YAAYC,kBAClBpe,KAAKvB,yDAGE,IAAA4f,EAC0Bre,KAAK1G,MAA9BgjB,EADD+B,EACC/B,UAAWE,EADZ6B,EACY7B,UACXjC,EAAcva,KAAKwa,QAAnBD,UAER,OACEvgB,OAAAwf,EAAA,EAAAxf,CAACskB,GAAD,CACE5gB,IAAKA,YAAF,OACM6c,EAAUI,OADhB,WAEOJ,EAAUrO,KAFjB,OAIHqS,KAAM/B,EACNgC,QAASxe,KAAKyc,eAEdziB,OAAAwf,EAAA,EAAAxf,CAACykB,GAAD,CACElD,MAAOe,EACPve,OAAQiC,KAAK0e,gBACbvD,aAAcnb,KAAKqK,mBA5LF5K,IAAMkf,WAA3BtC,GAEGvB,YAActb,EAiMRof,mBAAUvC,ICxFVwC,8MAtIbvlB,MAAQ,CACN4gB,SAAU,uFAIVla,KAAK8e,yDAGY/B,GACbA,EAAUhW,SAAW/G,KAAK/B,MAAM8I,QAClC/G,KAAK8e,oDAKP,IAAMC,EAAQ,GACR7E,EAAW,GAFL/V,GAAA,EAAAC,GAAA,EAAAC,OAAA1F,EAAA,IAIZ,QAAA2F,EAAAC,EAAkBvE,KAAK/B,MAAM8I,OAA7BvC,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAqC,KAA5B+C,EAA4B5C,EAAA3L,MACnC,GAAIuO,EAAMxI,OAASyI,GAAEK,SAAU,CAC7B,IAAM2S,EAAQ,CAAEjS,OAAQhB,EAAMvK,KAAMyd,WAAYlT,EAAMpH,MAAOua,SAAU,MACvE0E,EAAMpd,KAAKwY,GACXD,EAASvY,KAAKwY,QACT,GAAIjT,EAAMxI,OAASyI,GAAE6B,OAC1B+V,EAAMpd,KAAK,UACN,GAAIuF,EAAMxI,OAASyI,GAAE8B,OAAQ,CAElC,GADA8V,EAAMhR,MACFgR,EAAMngB,OAAS,GAAiC,MAA5BmgB,EAAMA,EAAMngB,OAAS,GAC7BmgB,EAAMhR,MACdsM,SAAWnT,EAAMpH,QAfjB,MAAA+E,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,GAoBZ6V,EAAS0D,KAAK,SAACvf,EAAG2gB,GAAJ,OAAU3gB,EAAE+b,WAAa4E,EAAE5E,aACzCpa,KAAK2c,SAAS,CAAEzC,uDAGAnT,EAAQnO,GACxB,IAAIkH,EAEJ,IAAKA,EAAQ,EAAGA,EAAQiH,EAAOnI,OAAQkB,IAAS,CAC9C,IAAMoH,EAAQH,EAAOjH,GACfua,EAAWnT,EAAMpH,MAAQoH,EAAMvK,KAAKiC,OAE1C,GAAIhG,EAAYsO,EAAMpH,OAASlH,GAAayhB,EAC1C,MAIJ,OAAOva,6CAGU,IAAAma,EACaja,KAAK/B,MAA3B8I,EADSkT,EACTlT,OAAQnO,EADCqhB,EACDrhB,UACVkH,EAAQE,KAAKif,kBAAkBlY,EAAQnO,GAI7C,MAAO,CAHakH,EAAQ,GAAKiH,EAAOjH,EAAQ,GAC9BiH,EAAOjH,GACNA,EAAQiH,EAAOnI,OAAS,GAAKmI,EAAOjH,EAAQ,0CAInDof,EAAaC,EAAWC,GAEpC,SACEF,IACGC,GACCC,GACAF,EAAYxgB,OAASyI,GAAE0B,QAAmC,aAAzBqW,EAAYrf,WAC9C,CAACsH,GAAEU,QAASV,GAAEK,UAAU6D,SAAS8T,EAAUzgB,YAK9CwgB,GACGC,IACCC,GACD,CAACjY,GAAE6B,OAAQ7B,GAAE2B,OAAOuC,SAAS6T,EAAYxgB,OACzC,CAACyI,GAAEU,QAASV,GAAEK,UAAU6D,SAAS8T,EAAUzgB,aAK9CwgB,GACGC,GACAC,IACCF,EAAYxgB,OAASyI,GAAE0B,QAAmC,aAAzBqW,EAAYrf,WAC9C,CAACsH,GAAEU,QAASV,GAAEK,UAAU6D,SAAS8T,EAAUzgB,OACnB,aAAxB0gB,EAAWvf,cAKdqf,GACGC,GACAC,GACA,CAACjY,GAAE6B,OAAQ7B,GAAE2B,OAAOuC,SAAS6T,EAAYxgB,OACzC,CAACyI,GAAEU,QAASV,GAAEK,UAAU6D,SAAS8T,EAAUzgB,OAC3C,CAACyI,GAAE8B,OAAQ9B,GAAE2B,OAAOuC,SAAS+T,EAAW1gB,mDAM7B,IAAA2gB,EAC+Brf,KAAKsf,mBADpCC,EAAAvlB,OAAA6L,EAAA,EAAA7L,CAAAqlB,EAAA,GACRH,EADQK,EAAA,GACKJ,EADLI,EAAA,GACgBH,EADhBG,EAAA,GAGhB,OAAIvf,KAAK/B,MAAM8I,OAAOnI,OAAS,EAAY,KAEvCoB,KAAKwf,cAAcN,EAAaC,EAAWC,GACtC,CACLlY,MAAOiY,QAFX,mCAQA,QAA6BxgB,IAAzBqB,KAAK/B,MAAMrF,UAA2B,OAAO,KAEjD,IAAM6mB,EAAoBzf,KAAK0f,kBAE/B,OAAID,EACKrhB,EAAAC,EAAAC,cAACqhB,GAAiBF,GAGvBrhB,EAAAC,EAAAC,cAACshB,GAAD,CACEhnB,UAAWoH,KAAK/B,MAAMrF,UACtBshB,SAAUla,KAAK1G,MAAM4gB,kBAtILza,IAAMob,eCO1BgF,GAAO,aAEAC,GAAb,SAAAC,GA4BE,SAAAD,EAAY7hB,GAAO,IAAA+I,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA8f,IACjB9Y,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAA8lB,GAAAhQ,KAAA9P,KAAM/B,KASR3E,MAAQ,CACNyN,OAAQ,GACR4E,uBAAuB,EACvBT,SAAU,CAAED,IAAK,IACjBjQ,MAAO,MAdUgM,EAiBnBsE,SAAW7L,IAAMgZ,YAjBEzR,EAkBnBoG,QAAU,IAAIF,GAAJlT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,GAA0B,GAAI,KAhBtCA,EAAKgZ,eAAiBhZ,EAAKgZ,eAAezS,KAApBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACtBA,EAAKiZ,gBAAkBjZ,EAAKiZ,gBAAgB1S,KAArBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACvBA,EAAKkZ,gBAAkB,IAAIpV,GAAJ9Q,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACvBA,EAAKmZ,gBAAkB,IAAI1U,GAAJzR,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACvBA,EAAKoZ,cAAgBpZ,EAAKoZ,cAAc7S,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACrBA,EAAKoW,yBAA2BpW,EAAKoW,yBAAyB7P,KAA9BvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAPfA,EA5BrB,OAAAhN,OAAAqmB,EAAA,EAAArmB,CAAA8lB,EAAAC,GAAA/lB,OAAAsmB,EAAA,EAAAtmB,CAAA8lB,EAAA,EAAA7U,IAAA,oBAAAtS,MAAA,WAiDIqH,KAAK/B,MAAMsiB,QAAQvgB,KAAK/B,MAAO+B,KAAK1G,MAAO0G,KAAKsL,SAASC,SACzDvL,KAAKoN,QAAQoT,UAlDjB,CAAAvV,IAAA,qBAAAtS,MAAA,SAqDqBokB,EAAWC,GACxBD,EAAUvkB,WAAawH,KAAK/B,MAAMzF,UACpCwH,KAAKoN,QAAQoT,QAGXzD,EAAUrkB,aAAesH,KAAK/B,MAAMvF,aACtCsH,KAAKygB,gBACLzgB,KAAK0gB,qBACL1gB,KAAKoN,QAAQzL,KAAK3B,KAAK/B,MAAMvF,aAG3BskB,EAAU9R,WAAalL,KAAK1G,MAAM4R,WACpClL,KAAKoN,QAAQuT,YACb3gB,KAAKkgB,gBAAgBnH,MACrB/Y,KAAKmgB,gBAAgBpH,SAnE3B,CAAA9N,IAAA,gBAAAtS,MAAA,SAuEgBqC,GACRgF,KAAK1G,MAAM0B,QAAUA,GACvBgF,KAAK2c,SAAS,CAAE3hB,YAzEtB,CAAAiQ,IAAA,qBAAAtS,MAAA,WA6EuB,IACXA,EAAUqH,KAAK/B,MAAMvF,WAArBC,MAEFoO,EADQ,IAAIyC,GAAM7Q,GACHua,YACrBlT,KAAK2c,SAAS,CAAE5V,aAjFpB,CAAAkE,IAAA,2BAAAtS,MAAA,SAoF2BgT,GACvB3L,KAAK2c,SAAS,CAAEhR,4BArFpB,CAAAV,IAAA,gBAAAtS,MAAA,WAyFI,GAAKqH,KAAK/B,MAAMlF,cAAhB,CAEA,IAAM6nB,EAAU5gB,KAAKsL,SAASC,QACtB3S,EAAcoH,KAAK/B,MAAMvF,WAAzBE,UAERgoB,EAAQ3T,QAEJ2T,EAAQpV,eAAiB5S,IAC3BgoB,EAAQC,eAAiBjoB,EACzBgoB,EAAQpV,aAAe5S,MAlG7B,CAAAqS,IAAA,gBAAAtS,MAAA,SAsGgBsV,GAAO,IAAA6S,EAC2B7S,EAAtCpQ,OAAUlF,EADCmoB,EACDnoB,MAAOkoB,EADNC,EACMD,eACzB7gB,KAAK/B,MAAMQ,sBAAsB9F,EAAOkoB,KAxG5C,CAAA5V,IAAA,cAAAtS,MAAA,SA2GcsV,GAAO,IAAAgC,EAAAjQ,KACTiL,EAA4CgD,EAA5ChD,IAAK8V,EAAuC9S,EAAvC8S,OAAQrT,EAA+BO,EAA/BP,QAASzB,EAAsBgC,EAAtBhC,SAAUwB,EAAYQ,EAAZR,QAGxC9G,WAAW,WACT,IACM/N,EADQqX,EAAK3E,SAASC,QACJsV,eAClB3V,EAAW,CAAED,MAAK8V,SAAQrT,UAASzB,WAAUwB,UAAS7U,aAE5DqX,EAAK0M,SAAS,CAAEzR,cACf,KArHP,CAAAD,IAAA,uBAAAtS,MAAA,SAwHuBsV,GAAO,IAClBhD,EAA0BgD,EAA1BhD,IAAKwC,EAAqBQ,EAArBR,QAASC,EAAYO,EAAZP,QAElB,CAAC,MAAO,SAASrC,SAASJ,GAC5BgD,EAAM+S,iBACW,MAAR/V,IAAgBwC,GAAWC,IACpCO,EAAM+S,mBA9HZ,CAAA/V,IAAA,iBAAAtS,MAAA,SAkIiBsV,GACbjO,KAAKihB,cAAchT,KAnIvB,CAAAhD,IAAA,kBAAAtS,MAAA,SAsIkBsV,GACdjO,KAAKkhB,qBAAqBjT,GAC1BjO,KAAKmhB,YAAYlT,KAxIrB,CAAAhD,IAAA,oBAAAtS,MAAA,WA4II,OAAKqH,KAAK/B,MAAMlF,cAGdqF,EAAAC,EAAAC,cAAC8iB,GAAD,CACEra,OAAQ/G,KAAK1G,MAAMyN,OACnBnO,UAAWoH,KAAK1G,MAAM4R,SAAStS,YALK,OA5I5C,CAAAqS,IAAA,SAAAtS,MAAA,WAuJI,IAAMioB,EAAU5gB,KAAKsL,SAASC,QACxBgP,EAAYqG,GAAWA,EAAQS,wBAErC,OACEjjB,EAAAC,EAAAC,cAACkB,EAAa8hB,SAAd,CACE3oB,MAAO,CACL4hB,YACA6C,yBAA0Bpd,KAAKod,yBAC/BlS,SAAUlL,KAAK1G,MAAM4R,SACrBxS,WAAYsH,KAAK/B,MAAMvF,WACvB+F,sBAAuBuB,KAAK/B,MAAMQ,wBAGpCL,EAAAC,EAAAC,cAACijB,GAAD,CACEhpB,QAASyH,KAAK/B,MAAM1F,QACpB2S,SAAUlL,KAAK1G,MAAM4R,SACrB1S,SAAUwH,KAAK/B,MAAMzF,SACrBygB,SAAUjZ,KAAK/B,MAAMgb,UAErB7a,EAAAC,EAAAC,cAACkjB,GAAD,CACEnI,OAAQrZ,KAAKsL,SACbrN,MAAO+B,KAAK/B,MAAMmB,cAAcnB,MAChCoB,MAAOW,KAAK/B,MAAMmB,cAAcC,MAChC1G,MAAOqH,KAAK/B,MAAMvF,WAAWC,MAC7B2gB,SAAUtZ,KAAKggB,eACfzG,UAAWvZ,KAAKigB,kBAEjBjgB,KAAKyhB,0BAlLhB3B,EAAA,CAA8BrgB,IAAMob,eAAvBiF,GAoBJpG,aAAe,CACpBta,cAAe,GACfrG,eAAe,EACfkgB,SAAU4G,GACVzU,SAAUyU,GACVU,QAASV,IAwLb,IAAMxH,GAAqB,CACzBlN,wBnC3JK,WACL,OAAO,SAACrM,EAAUC,GAChB,IAAMvG,EAAWuG,IAAWvD,OAAOlD,WAAWE,SAI9CsG,EAASL,GAHQM,IAAWrD,UAAUlD,IACT,IAAID,SAAW,OmCwJ9CkG,yBAGa6Z,eA7Bf,SAAyBhf,GAAO,IAAAooB,EAa1BpoB,EAXFkC,OAF4BmmB,EAAAD,EAG1BppB,WACEC,EAJwBopB,EAIxBppB,QACAC,EALwBmpB,EAKxBnpB,SAGAE,EARwBgpB,EAO1BjpB,SACEC,WAEFS,EAV0BuoB,EAU1BvoB,KAKJ,MAAO,CACLC,QAhB4BsoB,EAW1BtoB,QAMFb,UACAC,WACAW,OACAT,eASoC2f,GAAzBC,CAA6CwH,ICtO/C8B,GAAgB,GAChBC,GAAgB,IAEhBC,GAAiB,GACjBC,GAAiB,ICOvB,IAAMC,GAAmB,GAE1BrkB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,uHAOkB,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YAPpD,4BAQmB,SAAAmB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YARrD,eASM,SAAAmB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAMG,UATxC,KAYJklB,GAASjoB,OAAA4D,EAAA,EAAA5D,CAAA,UAAA6D,OAAA,aAAA7D,CAAA,kLAeG,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOS,QAAQE,OAfvC,MAmBT6kB,eAQJ,SAAAA,IAAc,IAAAlb,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAkiB,IACZlb,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAkoB,GAAApS,KAAA9P,QAOF1G,MAAQ,CACN6oB,MAAO,EACP/mB,OAAQ,EACRgnB,UAAW,EACXC,YAAY,GAZArb,EAedwR,QAAU/Y,IAAMgZ,YAfFzR,EAiDdsb,gBAAkB/b,EAAS,SAAC0H,GAC1B,IAAMsU,EAAQtU,EAAMkU,MAAQnb,EAAK1N,MAAM6oB,MACvCnb,EAAK2V,SAAS,CAAEyF,UAAWG,KAC1B,IAlDDvb,EAAKwb,2BAA6Bxb,EAAKwb,2BAA2BjV,KAAhCvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAClCA,EAAKyb,wBAA0Bzb,EAAKyb,wBAAwBlV,KAA7BvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAC/BA,EAAK0b,sBAAwB1b,EAAK0b,sBAAsBnV,KAA3BvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAC7BA,EAAKsb,gBAAkBtb,EAAKsb,gBAAgB/U,KAArBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IALXA,8EAiBC,IACL5L,EAAW4E,KAAK/B,MAAhB7C,OACFiE,EAAQ,CACZrE,MAAOgnB,IAUT,OAPI5mB,EACFiE,EAAMjE,OAASA,GAEfiE,EAAMsjB,UD5EsB,GC6E5BtjB,EAAMjE,OAAS,QAGViE,8CAIP,GAAKW,KAAK1G,MAAM+oB,WAAhB,CAEA,IAGM1H,IAAWlX,EAHCzD,KAAK1G,MAAM8oB,UACXN,GAAiB9hB,KAAK1G,MAAM8B,OAC5B2mB,GAAiB/hB,KAAK1G,MAAM8B,QACY,GAE1D,OAAO,SAACqB,GAAD,OAAWiB,WAAX,mCAGKid,EAHL,iBAISle,EAAMC,OAAOS,QAAQE,MAJ9B,uDAae4Q,GACtBjO,KAAKsiB,gBAAgBrU,iDAGDA,GACpB,IAAMsU,EAAQtU,EAAMkU,MAAQniB,KAAK1G,MAAM6oB,MACjC/mB,EAAS4E,KAAK1G,MAAM8B,OAASmnB,EAEnCviB,KAAK/B,MAAM2kB,aAAa5iB,KAAK/B,MAAMiH,MAAO9J,GAC1C4E,KAAK2c,SAAS,CAAEyF,UAAW,EAAGC,YAAY,IAC1CtV,SAAS8V,oBAAoB,YAAa7iB,KAAKyiB,yBAC/C1V,SAAS8V,oBAAoB,UAAW7iB,KAAK0iB,0EAGpBzU,GACzBA,EAAM+S,iBAENhhB,KAAK2c,SAAS,CACZwF,MAAOlU,EAAMkU,MACb/mB,OAAQ4E,KAAK/B,MAAM7C,QAAU4E,KAAKwY,QAAQjN,QAAQ8V,wBAAwBjmB,OAC1EinB,YAAY,IAGdtV,SAAS+V,iBAAiB,YAAa9iB,KAAKyiB,yBAC5C1V,SAAS+V,iBAAiB,UAAW9iB,KAAK0iB,wDAGnC,IACCxd,EAAUlF,KAAK/B,MAAfiH,MAER,OACElL,OAAAwf,EAAA,EAAAxf,CAAC+oB,GAAD,CACEpK,IAAK3Y,KAAKwY,QACVwK,WAAU9d,EACV+d,UAAU,mBACVvlB,IAAKsC,KAAKkjB,gBAEThe,EACDlL,OAAAwf,EAAA,EAAAxf,CAACioB,GAAD,CACEvkB,IAAKsC,KAAKmjB,oBACV/H,SAAS,KACTgI,YAAapjB,KAAKwiB,2BAClBa,YAAarjB,KAAKsjB,2BAClBC,UAAWvjB,KAAKwjB,mCAzGF/jB,IAAMob,eAqH9B,IAAMxC,GAAqB,CAAEuK,aC9ItB,SAAsBznB,EAAUC,GACrC,GAAsB,kBAAXA,EACT,MAAM,IAAIyF,MAAM,0BAGlB,MAAO,CACLnC,KAAM,iBACNlF,QAAS,CAAE2B,WAAUC,OAAQqI,EAAMrI,EAAQ0mB,GAAgBC,QDyIhDzJ,eAPf,SAAyBhf,EAAOmqB,GAE9B,MAAO,CAAEroB,OADM9B,EAAMsC,UAAUf,WAAW4oB,EAASve,SAMbmT,GAAzBC,CAA6C4J,IEzJtDvkB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,uEAIQ,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YAJ1C,yDAWJ4mB,GAAE1pB,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,iFAIoB,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YAJtD,UAKGklB,GAAmB,EALtB,YAMG,SAAA/jB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YANrC,uBAUF6mB,eAQJ,SAAAA,EAAY1lB,GAAO,IAAA+I,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA2jB,IACjB3c,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAA2pB,GAAA7T,KAAA9P,KAAM/B,KAKR3E,MAAQ,CACNP,eAAe,GAPEiO,EAUnBwR,QAAU/Y,IAAMgZ,YARdzR,EAAK4c,cAAgB5c,EAAK4c,cAAcrW,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACrBA,EAAK6c,aAAe7c,EAAK6c,aAAatW,KAAlBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAHHA,+EAajBhH,KAAK2c,SAAS,CAAE5jB,eAAe,IAC/BiH,KAAK/B,MAAM6lB,0BAAyB,wCAGzB7V,GACNjO,KAAKwY,QAAQjN,QAAQsN,SAAS5K,EAAM8V,iBACvC/jB,KAAK/B,MAAMiB,wBACXc,KAAK2c,SAAS,CAAE5jB,eAAe,sCAKjC,OACEqF,EAAAC,EAAAC,cAAC0lB,GAAD,CACErL,IAAK3Y,KAAKwY,QACVyL,QAASjkB,KAAK4jB,cACdhL,OAAQ5Y,KAAK6jB,cAEbzlB,EAAAC,EAAAC,cAAColB,GAAD,gBACAtlB,EAAAC,EAAAC,cAAC4lB,GAAD,CACEnrB,cAAeiH,KAAK1G,MAAMP,cAC1BqG,cAAeA,YA1CAK,IAAMob,eA6D/B,IAAMsJ,GAAqB,CAAEL,yBvCXtB,SAAkC/qB,GACvC,OAAO,SAAC+F,EAAUC,GAAa,IACrB/F,EAAqB+F,IAAWvD,OAAhCxC,iBAER,IAAIA,EAAiBE,QAAUF,EAAiBD,gBAAkBA,EAIlE,OAAOiG,QAAQC,QACbH,EAAS,CACPJ,KAAM,6BACNlF,QAAS,CACPT,sBuCD6CmG,yBAExCoZ,eAdf,SAAyBhf,GASvB,MAAO,CAAEd,SAFLc,EALFkC,OACElD,WACEE,WAUgC2rB,GAAzB7L,CAA6CqL,aC3E7CS,GAAA,CAAE/kB,MAdH,SAAA5C,GAAK,OAAIiB,WAAJ,yFAIKjB,EAAMC,OAAOc,OAJlB,4EAcKS,MAJV,CACZsB,gBAAiB,aCJb4Z,GAAQnf,OAAA4D,EAAA,EAAA5D,CAAOqqB,GAAP,CAAAxmB,OAAA,YAAA7D,CAAH,CAAA8D,KAAA,UAAAC,OAAA,2DAMLumB,8MAeJhZ,SAAW7L,IAAMgZ,+FAGfzY,KAAKogB,2DAGYrD,EAAWC,GACxBD,EAAUrkB,aAAesH,KAAK/B,MAAMvF,YACtCsH,KAAKogB,wDAKP,IACMmE,EADUvkB,KAAKsL,SAASC,QACJiZ,YACpBxpB,EAAQupB,EAvCM,EAuCwBvkB,KAAK/B,MAAMhF,SAAS+B,MAC5DgH,KAAKyiB,KAAKF,GAvCG,EAwCbvkB,KAAK/B,MAAMhF,SAAS+B,MAExBgF,KAAK/B,MAAMmiB,cAAcplB,oCAGlB,IAAAiV,EAAAjQ,KACP,OACEhG,OAAAwf,EAAA,EAAAxf,CAAC0qB,GAAD,CACEC,UAAQ,EACRhM,IAAK3Y,KAAKsL,SACV3S,MAAOqH,KAAK/B,MAAMvF,WAAWC,MAC7B+E,IAAK,SAAAjB,GAGH,MAAO,CAFQwT,EAAKhS,MAAMoB,MAAM5C,GACpB,UAAAJ,OAAa4T,EAAKhS,MAAMhF,SAAS+B,MAAjC,kBA7CGyE,IAAMob,eAAzByJ,GAWG5K,aAAe,CACpBra,MAtBS,cA+DEilB,UC3DT3mB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,oBAIG6mB,GAAb,SAAA7E,GAmBE,SAAA6E,EAAY3mB,GAAO,IAAA+I,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAA4kB,IACjB5d,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAA4qB,GAAA9U,KAAA9P,KAAM/B,KAMR3E,MAAQ,CACN0B,MAAO,QARUgM,EAWnBwR,QAAU/Y,IAAMgZ,YATdzR,EAAK4c,cAAgB5c,EAAK4c,cAAcrW,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACrBA,EAAK6d,cAAgB7d,EAAK6d,cAActX,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACrBA,EAAKoZ,cAAgBpZ,EAAKoZ,cAAc7S,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAJJA,EAnBrB,OAAAhN,OAAAqmB,EAAA,EAAArmB,CAAA4qB,EAAA7E,GAAA/lB,OAAAsmB,EAAA,EAAAtmB,CAAA4qB,EAAA,EAAA3Z,IAAA,gBAAAtS,MAAA,SAgCgBqC,GACRgF,KAAK1G,MAAM0B,QAAUA,GACvBgF,KAAK2c,SAAS,CAAE3hB,YAlCtB,CAAAiQ,IAAA,gBAAAtS,MAAA,SAsCgBsF,EAAO3E,EAAOsnB,GACtB5gB,KAAK/B,MAAMxF,SAASM,gBACtB6nB,EAAQ3T,QACR2T,EAAQpV,aAAeoV,EAAQjoB,MAAMiG,UAzC3C,CAAAqM,IAAA,gBAAAtS,MAAA,WA8CSqH,KAAK/B,MAAMxF,SAASM,eACvBiH,KAAK/B,MAAM6mB,gCAA+B,KA/ChD,CAAA7Z,IAAA,SAAAtS,MAAA,WAoDI,IAAKqH,KAAK/B,MAAMxF,SAASS,OAAU,OAAO,KADnC,IAAA6rB,EAGuB/kB,KAAK/B,MAAMhF,SAAjC+rB,EAHDD,EAGCC,IAAK9Y,EAHN6Y,EAGM7Y,KAAM9Q,EAHZ2pB,EAGY3pB,OACXJ,EAAUgF,KAAK1G,MAAf0B,MAER,OACEhB,OAAAwf,EAAA,EAAAxf,CAACirB,GAAD,CACEvnB,IAAG1D,OAAAkrB,GAAA,EAAAlrB,CAAE,CAAEgrB,MAAK9Y,OAAMlR,QAAOI,WACzB6oB,QAASjkB,KAAK4jB,cACdjL,IAAK3Y,KAAKwY,SAEVxe,OAAAwf,EAAA,EAAAxf,CAACmrB,GAAD,CACElsB,SAAU+G,KAAK/B,MAAMhF,SACrBmnB,cAAepgB,KAAKogB,cACpB/gB,MAAOD,GAAcC,MACrB3G,WAAYsH,KAAK/B,MAAMvF,aAEzBsB,OAAAwf,EAAA,EAAAxf,CAACkqB,GAAD,CACE9kB,cAAeA,GACfrG,cAAeiH,KAAK/B,MAAMxF,SAASM,cACnCkgB,SAAUjZ,KAAK/B,MAAMiB,sBACrBkM,SAAUpL,KAAK/B,MAAMiB,sBACrBqhB,QAASvgB,KAAK6kB,qBA1ExBD,EAAA,CAAsCnlB,IAAMob,eAA/B+J,GAcJlL,aAAe,CACpBzgB,SAAU,GACVmsB,gBAAgB,GA0FpB,IAAM/M,GAAqB,CAAEnZ,wBAAuB4lB,+B1C/E7C,SAAwC/rB,GAC7C,MAAO,CACL2F,KAAM,oCACNlF,QAAST,K0C8EEuf,eA3Bf,SAAyBhf,GAAO,IAAAooB,EAe1BpoB,EAbFkC,OAEIhD,EAJwBkpB,EAG1BppB,WACEE,SAGAE,EAPwBgpB,EAM1BjpB,SACEC,WAPwB2sB,EAAA3D,EAS1B1oB,iBAaJ,MAAO,CAAEC,SAtBqBosB,EAUxBpsB,SAYaP,aAAYF,WAAUC,SALxB,CACfS,OAlB4BmsB,EAWxBnsB,OAQJH,cAnB4BssB,EAYxBtsB,iBAegCsf,GAAzBC,CAA6CsM,aCjHxDjnB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,mGAKoB,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YALtD,4BAMqB,SAAAmB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YANvD,eAOQ,SAAAmB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAMG,UAP1C,oBAWFuoB,GAAQtrB,OAAA4D,EAAA,EAAA5D,CAAA,UAAA6D,OAAA,aAAA7D,CAAA,gLAeI,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOS,QAAQE,OAfxC,MAmBRkoB,eAYJ,SAAAA,IAAc,IAAAve,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAulB,IACZve,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAurB,GAAAzV,KAAA9P,QAOF1G,MAAQ,CACNksB,MAAO,EACPxqB,MAAO,EACPyqB,SAAU,EACVpD,YAAY,GAZArb,EA+Bd0e,eAAiBnf,EAAS,SAAC0H,GACzB,IAAMsU,EAAQtU,EAAMuX,MAAQxe,EAAK1N,MAAMksB,MACvCxe,EAAK2V,SAAS,CAAE8I,SAAUlD,KACzB,IAhCDvb,EAAK2e,0BAA4B3e,EAAK2e,0BAA0BpY,KAA/BvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACjCA,EAAKyb,wBAA0Bzb,EAAKyb,wBAAwBlV,KAA7BvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAC/BA,EAAK0b,sBAAwB1b,EAAK0b,sBAAsBnV,KAA3BvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAC7BA,EAAK0e,eAAiB1e,EAAK0e,eAAenY,KAApBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IALVA,kFAgBZ,GAAKhH,KAAK1G,MAAM+oB,WAAhB,CAEA,IAGMlW,IAAU1I,EAHCzD,KAAK1G,MAAMmsB,SACX7D,GAAgB5hB,KAAK1G,MAAM0B,MAC3B6mB,GAAgB7hB,KAAK1G,MAAM0B,OACU,GAEtD,OAAO,SAACyB,GAAD,OAAWiB,WAAX,kCAGIyO,EAHJ,iBAIS1P,EAAMC,OAAOS,QAAQE,MAJ9B,uDAae4Q,GACtBjO,KAAK0lB,eAAezX,iDAGAA,GACpB,IAAMsU,EAAQtU,EAAMuX,MAAQxlB,KAAK1G,MAAMksB,MACjCxqB,EAAQgF,KAAK1G,MAAM0B,MAAQunB,EAEjCviB,KAAK/B,MAAM2nB,YAAY5lB,KAAK/B,MAAMiH,MAAOlK,GACzCgF,KAAK2c,SAAS,CAAE8I,SAAU,EAAGpD,YAAY,IACzCtV,SAAS8V,oBAAoB,YAAa7iB,KAAKyiB,yBAC/C1V,SAAS8V,oBAAoB,UAAW7iB,KAAK0iB,yEAGrBzU,GACxBA,EAAM+S,iBAENhhB,KAAK2c,SAAS,CACZ6I,MAAOvX,EAAMuX,MACbxqB,MAAOgF,KAAK/B,MAAMjD,MAClBqnB,YAAY,IAGdtV,SAAS+V,iBAAiB,YAAa9iB,KAAKyiB,yBAC5C1V,SAAS+V,iBAAiB,UAAW9iB,KAAK0iB,wDAGnC,IAAAzI,EACkBja,KAAK/B,MAAtBiH,EADD+U,EACC/U,MAAOlK,EADRif,EACQjf,MAEf,OACEhB,OAAAwf,EAAA,EAAAxf,CAAC6rB,GAAD,CACEC,WAAU5gB,EACV+d,UAAU,mBACVvlB,IAAKA,YAAF,SACQ1C,EADR,oBAKFkK,EACDlL,OAAAwf,EAAA,EAAAxf,CAACsrB,GAAD,CACE5nB,IAAKsC,KAAK+lB,mBACV3K,SAAS,KACTgI,YAAapjB,KAAK2lB,0BAClBtC,YAAarjB,KAAKgmB,0BAClBzC,UAAWvjB,KAAKimB,kCA7FFxmB,IAAMob,eAAxB0K,GAQG7L,aAAe,CACpB1e,MPnD6B,KOmJjC,IAAMqd,GAAqB,CAAEuN,YL1ItB,SAAqB7qB,EAAUC,GACpC,GAAqB,kBAAVA,EACT,MAAM,IAAI6F,MAAM,yBAGlB,MAAO,CACLnC,KAAM,gBACNlF,QAAS,CAAEuB,WAAUC,MAAOyI,EAAMzI,EAAO4mB,GAAeC,QKqI7CvJ,eAPf,SAAyBhf,EAAOmqB,GAE9B,MAAO,CAAEzoB,MADK1B,EAAMsC,UAAUhB,UAAU6oB,EAASve,SAMXmT,GAAzBC,CAA6CiN,IC3ItDW,GAAGlsB,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,0DAOHooB,GAAWnsB,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,yHAQW,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YAR7C,4BASY,SAAAmB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YAT9C,eAUD,SAAAmB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAMG,UAVjC,KA8CFqpB,OAjCf,SAAA7sB,GAAqC,IAAb8sB,EAAa9sB,EAAb8sB,UAmBtB,OACErsB,OAAAwf,EAAA,EAAAxf,CAACksB,GAAD,CACElD,WAAS,UAnBXhpB,OAAAwf,EAAA,EAAAxf,CAACmsB,GAAD,CACEzoB,IAAKA,YAAF,SACQskB,GADR,qBAQL,IAAIzgB,MAAM8kB,EAAUznB,QAAQ0nB,KAAK,GAAGrf,IAAI,SAACsf,EAAGC,GAAJ,OACtCxsB,OAAAwf,EAAA,EAAAxf,CAACysB,GAAD,CACExb,IAAKub,EACLthB,MAAOmhB,EAAUG,SCrCnB7oB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,uHAqEK2oB,OA3Df,SAAAntB,GASG,IARD8f,EAQC9f,EARD8f,OACA6B,EAOC3hB,EAPD2hB,SACA1iB,EAMCe,EANDf,SACAgmB,EAKCjlB,EALDilB,QACAmI,EAICptB,EAJDotB,cACA1C,EAGC1qB,EAHD0qB,QACA1K,EAEChgB,EAFDggB,UACAlY,EACC9H,EADD8H,OAqBA,OACErH,OAAAwf,EAAA,EAAAxf,CAAC4sB,GAAD,CACEjO,IAAKU,EACLwN,YAAU,SACVC,gBAAetuB,EACfkF,IAvBa,WACf,IAAI2B,EAAQ,GAcZ,MAZsB,kBAAXgC,IACThC,EAAQ,CACN0nB,WAAY,SACZC,aAAc,OACdC,SAAU,WAIV/L,IACF7b,EAAMxC,OAAS,oBAGVwC,EAQA6nB,GACL9L,SAAS,IACToD,QAASA,EACTjF,UAAWA,EACXoN,cAAeA,EACf1C,QAASA,GAEV5iB,IC/CQ8lB,GAAb,SAAApH,GAoBE,SAAAoH,EAAYlpB,GAAO,IAAA+I,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAmnB,IACjBngB,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAmtB,GAAArX,KAAA9P,KAAM/B,KAQRmP,QAAUA,GAPRpG,EAAKyV,cAAgBzV,EAAKyV,cAAclP,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACrBA,EAAKogB,oBAAsBpgB,EAAKogB,oBAAoB7Z,KAAzBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAC3BA,EAAK4c,cAAgB5c,EAAK4c,cAAcrW,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACrBA,EAAKiZ,gBAAkBjZ,EAAKiZ,gBAAgB1S,KAArBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACvBA,EAAKqgB,SAAWppB,EAAMob,OANLrS,EApBrB,OAAAhN,OAAAqmB,EAAA,EAAArmB,CAAAmtB,EAAApH,GAAA/lB,OAAAsmB,EAAA,EAAAtmB,CAAAmtB,EAAA,EAAAlc,IAAA,qBAAAtS,MAAA,SA+BqBokB,GACjB/c,KAAKnH,4BACLmH,KAAKiN,MAAM8P,KAjCf,CAAA9R,IAAA,4BAAAtS,MAAA,WAqCI,GAAKqH,KAAK/B,MAAMid,UACXlb,KAAK/B,MAAMpF,0BAA0BC,SAA1C,CAF0B,IAIlBC,EAAkBiH,KAAK/B,MAAMpF,0BAA7BE,cACRiH,KAAK/B,MAAMqpB,6BACXtnB,KAAKunB,qBAAqBxuB,MA1C9B,CAAAkS,IAAA,uBAAAtS,MAAA,SA6CuBI,EAAeyuB,GAClC,IAAMC,EAAYznB,KAAKqnB,SAAS9b,QAAQ8V,wBAClCpoB,EAAWyuB,KAAKvU,MAAMuU,KAAKC,UAAUF,IAC3CznB,KAAK/B,MAAMspB,qBAAqBtuB,EAAUF,EAAeyuB,KAhD7D,CAAAvc,IAAA,QAAAtS,MAAA,SAmDQokB,GACJ,IAAKA,EAAU7B,UAAYlb,KAAK/B,MAAMid,SAAU,CAC9C,IAAM0M,EAAU5nB,KAAK/B,MAAMob,OAAO9N,QAE9BwB,SAAS8a,gBAAkBD,GAC7BA,EAAQ3a,WAxDhB,CAAAhC,IAAA,gBAAAtS,MAAA,WA8DIqH,KAAK/B,MAAMY,cAAcmB,KAAK/B,MAAMzF,YA9DxC,CAAAyS,IAAA,gBAAAtS,MAAA,SAiEgBsV,GACZA,EAAMmQ,oBAlEV,CAAAnT,IAAA,sBAAAtS,MAAA,SAqEsBsV,GAClBA,EAAMmQ,kBACNpe,KAAKunB,sBAAqB,KAvE9B,CAAAtc,IAAA,kBAAAtS,MAAA,SA0EkBsV,GAAO,IACbhD,EAA0BgD,EAA1BhD,IAAKwC,EAAqBQ,EAArBR,QAASC,EAAYO,EAAZP,QAEtB,GAAI,CAAC,SAAU,aAAarC,SAASJ,IAGnC,IAFiB,GAAKjL,KAAK/B,MAAMoD,QAEpBzC,OAAS,EAAG,KACfpG,EAAawH,KAAK/B,MAAlBzF,SACR4U,GAAQzL,KAAK,QAASnJ,GACtB6a,GAAM6E,UAAU1f,SAIM,IAAfyS,EAAIrM,QAAkB6O,GAAWC,GAC1C1N,KAAKunB,sBAAqB,EAAMtc,KAxFtC,CAAAA,IAAA,SAAAtS,MAAA,WA6FI,OACEyF,EAAAC,EAAAC,cAACwpB,GAAD,CACEzO,OAAQrZ,KAAKqnB,SACb7uB,SAAUwH,KAAK/B,MAAMzF,SACrB6I,OAAQrB,KAAK/B,MAAMoD,OACnB6Z,SAAUlb,KAAK/B,MAAMid,SACrBsD,QAASxe,KAAKyc,cACdkK,cAAe3mB,KAAKonB,oBACpBnD,QAASjkB,KAAK4jB,cACdrK,UAAWvZ,KAAKigB,sBAtGxBkH,EAAA,CAA4B1nB,IAAMob,eAoHlC,IAAMxC,GAAqB,CACzBkP,qB9C7EK,SAA8BtuB,EAAUF,EAAeyuB,GAC5D,OAAO,SAAC1oB,EAAUC,GAChB,IAAMzF,EAAQyF,IAKd,OAFAD,EAASL,EAFK+oB,GAA8BluB,EAAMkC,OAAOlD,WAAWC,UAI7DyG,QAAQC,QACbH,EAAS,CACPJ,KAAM,yBACNlF,QAAS,CACPP,WACAC,QAAQ,EACRH,gBACAD,UAAU,Q8CgElB+F,gBACAyoB,2B9C7BK,WACL,MAAO,CACL5oB,KAAM,+BACNlF,QAAS,Q8C6BE8e,eAdf,SAAyBhf,EAAOmqB,GAC9B,IAAMvI,EAAW5hB,EAAMkC,OAAOlD,WAAWE,WAAairB,EAASjrB,SACvDK,EAA8BS,EAAMkC,OAApC3C,0BACF0O,EAAOjO,EAAMoC,UAAU+nB,EAASjrB,UAEtC,MAAO,CAAE6I,OADMkG,EAAOA,EAAKlG,OAAS,GACnB6Z,WAAUriB,8BASWwf,GAAzBC,CAA6C6O,IC3HtDxpB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,qEAIkB,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAMC,QAJpD,4BAKmB,SAAAoB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAMC,QALrD,kBASH,SAASkrB,GAATxuB,GAA2E,IAAnDyB,EAAmDzB,EAAnDyB,MAAOI,EAA4C7B,EAA5C6B,OAAQojB,EAAoCjlB,EAApCilB,QAASmI,EAA2BptB,EAA3BotB,cAAezN,EAAY3f,EAAZ2f,SACpE,OACElf,OAAAwf,EAAA,EAAAxf,CAACguB,GAAD,CACEnB,YAAU,SACVrI,QAASA,EACTmI,cAAeA,EACfjpB,IAAG1D,OAAAkrB,GAAA,EAAAlrB,CAAE,CACHgB,QACAI,OAAQA,GAAUA,KAGnB8d,GAaP6O,GAAarO,aAAe,CAC1B1e,MX5C+B,KWsDlBsd,mBAPf,SAAyBhf,EAAOmqB,GAAU,IAAAwE,EACXxE,EAASjrB,SAASmN,MAAM,KADbuiB,EAAAluB,OAAA6L,EAAA,EAAA7L,CAAAiuB,EAAA,GACjCltB,EADiCmtB,EAAA,GACvB/sB,EADuB+sB,EAAA,GAIxC,MAAO,CAAEltB,MAFK1B,EAAMsC,UAAUhB,UAAUG,GAExBK,OADD9B,EAAMsC,UAAUf,WAAWM,KAI7Bmd,CAAyByP,ICJzBI,eApCb,SAAAA,IAAc,IAAAnhB,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAmoB,IACZnhB,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAmuB,GAAArY,KAAA9P,QAHFqnB,SAAW5nB,IAAMgZ,YAIfzR,EAAKyV,cAAgBzV,EAAKyV,cAAclP,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACrBA,EAAKogB,oBAAsBpgB,EAAKogB,oBAAoB7Z,KAAzBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IAHfA,4EAMD,IAAAiJ,EAAAjQ,KACX2G,WAAW,kBAAMsJ,EAAKoX,SAAS9b,QAAQ0B,SAAS,2CAIhDjN,KAAKooB,2DAILpoB,KAAKooB,8CAGE,IACC5vB,EAAawH,KAAK/B,MAAlBzF,SAER,OACE4F,EAAAC,EAAAC,cAAC+pB,GAAD,CACE7vB,SAAUA,EACVgmB,QAASxe,KAAKyc,cACdkK,cAAe3mB,KAAKonB,qBAEpBhpB,EAAAC,EAAAC,cAACgqB,GAAD,CACE9vB,SAAUA,EACV6gB,OAAQrZ,KAAKqnB,mBArCE5nB,IAAMob,eCEzBqL,GAAGlsB,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,oCAmCMwqB,OA9Bf,SAAAhvB,GAA2C,IAAxBivB,EAAwBjvB,EAAxBivB,UAAWnC,EAAa9sB,EAAb8sB,UAa5B,OACEjoB,EAAAC,EAAAC,cAACmqB,GAAD,CACEzF,WAAUwF,GAEVpqB,EAAAC,EAAAC,cAACoqB,GAAD,CACExjB,MAAOsjB,IAhBX,IAAIjnB,MAAM8kB,EAAUznB,QAAQ0nB,KAAK,GAAGrf,IAAI,SAACsf,EAAGC,GAC1C,IAAMhuB,EAAQ,GAAA6D,OAAMgqB,EAAUG,GAAhB,KAAAnqB,OAAsBmsB,GACpC,OACEpqB,EAAAC,EAAAC,cAACqqB,GAAD,CACE1d,IAAKub,EACLhuB,SAAUA,0BCmBpB,IAAMc,GAAQ,CACZsvB,GAAI,cACJC,QAAS,OACTrO,QAAS,CACPphB,QAAS,KACTD,KAAM,KACN+R,SAAU,KACVqB,SAAU,KACVC,SAAU,KACVC,YAAa,KACbqc,YAAY,GAEdC,OAAQ,CACNC,KAAM,CACJC,GAAI,CACFC,WAAc,CACZC,QAAS,CAAC,gBAAiB,sBAC3BtrB,OAAQ,iBAIdurB,YAAa,CACXC,OAAQ,CACNC,IApCR,SAAyBC,GACvB,OAAKA,EAAI9c,YAEF,IAAIzN,QAAQ,SAAAC,GACjB0H,WAAW,WACT,IAAMiiB,EAAE,mBAAAvsB,OAAsBktB,EAAI9c,YAA1B,MACFlF,EAAOwF,SAASC,cAAc4b,GAChCrhB,GAAQA,EAAK0F,QACjBhO,GAAQ,IACP,KAR0BD,QAAQC,SAAQ,IAoCzCuqB,OAAQ,CACNL,QAAS1P,aAAO,CAAEqP,WAAY,SAACS,EAAKtb,GAAN,OAAgBA,EAAMvT,QACpDmD,OAAQ,YAOZsrB,GAAU,CACdA,QAAS,CACPM,cAAehQ,aAAO,SAAC8P,EAAD7vB,GAAiC,IAAzBwR,EAAyBxR,EAAzBwR,SAAyBmB,EACxB5G,EADwB/L,EAAflB,UAAe8T,EAAAtS,OAAA6L,EAAA,EAAA7L,CAAAqS,EAAA,GAErD,MAAO,CAAEE,SAF4CD,EAAA,GAElCE,SAFkCF,EAAA,GAExBpB,cAE/Bwe,mBAAoBjQ,aAAO,CACzBhN,YAAa,SAAC8c,GACZ,OA3ER,SAAAhwB,GAA4E,IAA/CJ,EAA+CI,EAA/CJ,KAAMC,EAAyCG,EAAzCH,QAASoT,EAAgCjT,EAAhCiT,SAAUD,EAAsBhT,EAAtBgT,SAAUrB,EAAY3R,EAAZ2R,SACtDD,EAAmCC,EAAnCD,IAAsBgB,GAAaf,EAA9B6V,OAA8B7V,EAAtBwC,QAAsBxC,EAAbe,UAE9B,GAAY,YAARhB,EACFuB,EAAWxK,KAAKC,IAAI,EAAGuK,EAAW,QAC7B,GAAY,eAARvB,GAAiC,QAARA,IAAkBgB,EACpDM,EAAWvK,KAAKK,IAAIjJ,EAAU,EAAGmT,EAAW,QACvC,GAAI,CAAC,YAAa,SAASlB,SAASJ,GACzCuB,EAAWxK,KAAKK,IAAIlJ,EAAO,EAAGqT,EAAW,OACpC,MAAY,cAARvB,GAAgC,QAARA,GAAiBgB,GAGlD,OAAO,KAFPM,EAAWvK,KAAKC,IAAI,EAAGsK,EAAW,GAKpC,IAAMxR,EAAWiK,EAAeuH,GAC1BpR,EAAW,IAAMqR,EAAW,GAElC,SAAAnQ,OAAUtB,EAAV,KAAAsB,OAAsBlB,GAyDTwuB,CAAkBJ,QAuBlBK,OAjBf,SAAiCzwB,EAAMC,GACrC,IAAMywB,EAAU7vB,OAAAC,EAAA,EAAAD,CAAA,GACXV,GAAMkhB,QADK,CAEdphB,UACAD,SAGF,OAAO2wB,aAAQxwB,GAAO6vB,GAASU,IC/E3BE,GAAI/vB,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,mGAMgB,SAAAiE,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YANlD,0BAOiB,SAAAmB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YAPnD,2BAQkB,SAAAmB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YARpD,4BASmB,SAAAmB,GAAK,OAAIA,EAAMxB,MAAMC,OAAOE,MAAME,YATrD,8CAiBGktB,GAAb,SAAAjK,GAOE,SAAAiK,EAAY/rB,GAAO,IAAA+I,EAAA,OAAAhN,OAAA+F,EAAA,EAAA/F,CAAAgG,KAAAgqB,IACjBhjB,EAAAhN,OAAA4V,EAAA,EAAA5V,CAAAgG,KAAAhG,OAAA6V,EAAA,EAAA7V,CAAAgwB,GAAAla,KAAA9P,KAAM/B,KAMRgsB,qBAAuBL,GAAwB5iB,EAAK/I,MAAM9E,KAAM6N,EAAK/I,MAAM7E,SAPxD4N,EAQnBkjB,qBAAuBC,aAAUnjB,EAAKijB,sBARnBjjB,EASnBojB,QAAU3qB,IAAMgZ,YAPdzR,EAAKyV,cAAgBzV,EAAKyV,cAAclP,KAAnBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACrBA,EAAKiZ,gBAAkBjZ,EAAKiZ,gBAAgB1S,KAArBvT,OAAA0iB,EAAA,EAAA1iB,CAAAgN,IACvBA,EAAKqf,UAAY3iB,EAAezF,EAAM7E,SAJrB4N,EAPrB,OAAAhN,OAAAqmB,EAAA,EAAArmB,CAAAgwB,EAAAjK,GAAA/lB,OAAAsmB,EAAA,EAAAtmB,CAAAgwB,EAAA,EAAA/e,IAAA,oBAAAtS,MAAA,WAmBIqH,KAAKkqB,qBAAqBG,QAC1BrqB,KAAK/B,MAAMY,cAAc,OACzBmB,KAAKsqB,aArBT,CAAArf,IAAA,uBAAAtS,MAAA,WAyBIqH,KAAKkqB,qBAAqBnb,SAzB9B,CAAA9D,IAAA,WAAAtS,MAAA,WA6BI,IAAM4xB,EAAKxd,SAASC,cAAc,yBAClCud,GAAMA,EAAGtd,UA9Bb,CAAAhC,IAAA,gBAAAtS,MAAA,SAiCgBsV,GACZA,EAAMmQ,oBAlCV,CAAAnT,IAAA,kBAAAtS,MAAA,SAqCkBsV,GACdA,EAAMmQ,kBACNnQ,EAAM+S,iBAENhhB,KAAKwqB,mBAAmBvc,GACxBjO,KAAKyqB,aAAaxc,KA1CtB,CAAAhD,IAAA,qBAAAtS,MAAA,SA6CqBsV,GAAO,IAChBhD,EAAoCgD,EAApChD,IAAKgB,EAA+BgC,EAA/BhC,SAAUwB,EAAqBQ,EAArBR,QAASC,EAAYO,EAAZP,QAEpB,MAARzC,GAAegB,IAAawB,GAAWC,GACzCN,GAAQO,OACS,MAAR1C,IAAgBwC,GAAWC,IACpCN,GAAQQ,SAnDd,CAAA3C,IAAA,eAAAtS,MAAA,SAuDesV,GAAO,IACVzV,EAAayV,EAAMpQ,OAAO6sB,QAA1BlyB,SAER,GAAKA,EAAL,CAHkB,IAMZ0S,EAAW,CAAED,IADwBgD,EAAnChD,IACgB8V,OADmB9S,EAA9B8S,OACmBrT,QADWO,EAAtBP,QACoBzB,SADEgC,EAAbhC,UAE9BjM,KAAKkqB,qBAAqBS,KAAK,CAAEjsB,KAAM,aAAcwM,WAAU1S,gBA9DnE,CAAAyS,IAAA,qBAAAtS,MAAA,SAiEqB6tB,GACjB,OACEpoB,EAAAC,EAAAC,cAACssB,GAAD,CACE3f,IAAKub,EACLrtB,KAAM6G,KAAK/B,MAAM9E,KACjBktB,UAAWrmB,KAAKqmB,cAtExB,CAAApb,IAAA,iBAAAtS,MAAA,SA2EiB6vB,GACb,OACEpqB,EAAAC,EAAAC,cAACusB,GAAD,CACE5f,IAAKud,EACLA,UAAWA,EACXnC,UAAWrmB,KAAKqmB,cAhFxB,CAAApb,IAAA,aAAAtS,MAAA,WAqFe,IAAAsX,EAAAjQ,KACX,OAAO,IAAIuB,MAAMvB,KAAK/B,MAAM9E,KAAO,GAAGmtB,KAAK,GAAGrf,IAAI,SAACsf,EAAGC,GACpD,OAAU,IAANA,EACKvW,EAAK6a,mBAAmBtE,GAExBvW,EAAK8a,eAAevE,OA1FnC,CAAAvb,IAAA,SAAAtS,MAAA,WAgGI,OACEyF,EAAAC,EAAAC,cAACyrB,GAAD,CACEpR,IAAK3Y,KAAKoqB,QACVY,aAAW,MACXxM,QAASxe,KAAKyc,cACdlD,UAAWvZ,KAAKigB,iBAEfjgB,KAAKirB,kBAvGdjB,EAAA,CAA2BvqB,IAAMob,eAkH3BqQ,GAAqB,CAAErsB,iBAEdyZ,eAPS,SAAChf,GAAU,IAAAooB,EACPpoB,EAAMkC,OAChC,MAAO,CAAErC,KAFwBuoB,EACzBvoB,KACOC,QAFkBsoB,EACnBtoB,UAMwB8xB,GAAzB5S,CAA6C0R,IC/ItDrsB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,mCAKJG,GAAKlE,OAAA4D,EAAA,EAAA5D,CAAA,MAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,yBAILsd,GAAErhB,OAAA4D,EAAA,EAAA5D,CAAA,MAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,oCAKFgd,GAAE/gB,OAAA4D,EAAA,EAAA5D,CAAA,MAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,oBAwBOotB,OApBf,WACE,OACE/sB,EAAAC,EAAAC,cAAC8sB,GAAD,KACEhtB,EAAAC,EAAAC,cAAC+sB,GAAD,4BACAjtB,EAAAC,EAAAC,cAACgtB,GAAD,KACEltB,EAAAC,EAAAC,cAACitB,GAAD,gBACAntB,EAAAC,EAAAC,cAACitB,GAAD,YACAntB,EAAAC,EAAAC,cAACitB,GAAD,eACAntB,EAAAC,EAAAC,cAACitB,GAAD,cACAntB,EAAAC,EAAAC,cAACitB,GAAD,YACAntB,EAAAC,EAAAC,cAACitB,GAAD,YACAntB,EAAAC,EAAAC,cAACitB,GAAD,YACAntB,EAAAC,EAAAC,cAACitB,GAAD,cACAntB,EAAAC,EAAAC,cAACitB,GAAD,aACAntB,EAAAC,EAAAC,cAACitB,GAAD,mCC9BF5tB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,oDAMJytB,GAAGxxB,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,aAAA7D,CAAA,CAAA8D,KAAA,UAAAC,OAAA,gCAuBM0tB,OAlBf,WACE,OACErtB,EAAAC,EAAAC,cAACotB,GAAD,sBAEEttB,EAAAC,EAAAC,cAAA,KACEC,KAAK,8CACLC,IAAI,sBACJX,OAAO,UAEPO,EAAAC,EAAAC,cAACktB,GAAD,CACElC,IAAKqC,KACLC,IAAI,0BCtBRjuB,GAAI3D,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,4DAeK8tB,OATf,WACE,OACEztB,EAAAC,EAAAC,cAACwtB,GAAD,KACE1tB,EAAAC,EAAAC,cAACytB,GAAD,MACA3tB,EAAAC,EAAAC,cAAC0tB,GAAD,QCJAC,GAASjyB,OAAA4D,EAAA,EAAA5D,CAAA,OAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,2FAOTmuB,GAAIlyB,OAAA4D,EAAA,EAAA5D,CAAA,QAAA6D,OAAA,YAAA7D,CAAA,CAAA8D,KAAA,SAAAC,OAAA,oBAuBKouB,OAnBf,WACE,OACE/tB,EAAAC,EAAAC,cAAC2tB,GAAD,KACE7tB,EAAAC,EAAAC,cAAC4tB,GAAD,KACE9tB,EAAAC,EAAAC,cAAC8tB,GAAD,MACAhuB,EAAAC,EAAAC,cAAA,OAAK+tB,yBAAA,EAAsBjR,SAAS,MACpChd,EAAAC,EAAAC,cAACguB,EAAD,MACAluB,EAAAC,EAAAC,cAACiuB,GAAD,MACAnuB,EAAAC,EAAAC,cAACkuB,GAAD,MACApuB,EAAAC,EAAAC,cAACmuB,GAAD,SCNO9uB,OAbf,WACE,OACES,EAAAC,EAAAC,cAACouB,EAAA,EAAD,CAAUre,MAAOhT,GACf+C,EAAAC,EAAAC,cAACquB,EAAA,EAAD,KACEvuB,EAAAC,EAAAC,cAACsuB,EAAA,EAAD,CAAenwB,MAAOA,GACpB2B,EAAAC,EAAAC,cAACkb,EAAA,EAAD,CAAQzb,OAAQN,IAChBW,EAAAC,EAAAC,cAACuuB,GAAD,UCPUzmB,QACW,cAA7B0mB,OAAOt0B,SAASu0B,UAEe,UAA7BD,OAAOt0B,SAASu0B,UAEhBD,OAAOt0B,SAASu0B,SAAS1mB,MACvB,2DCbN2mB,IAASC,OAAO7uB,EAAAC,EAAAC,cAAC4uB,GAAD,MAAUngB,SAASogB,eAAe,SD4H5C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.057a4279.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAfCAYAAAARB2hWAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABsVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+MDwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MzE8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MTAwPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDpGQTdGMTE3NDA3MjA2ODExQjM0QkRCMTI3QTg3OTlBMDwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOkNCODc4QkZEMzgzRjExRTNBNkQxQjQwMjJCMkQwMUY1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOkNCODc4QkZFMzgzRjExRTNBNkQxQjQwMjJCMkQwMUY1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOkQ2NTYzQjExMzQyMDY4MTE4MDgzRjE0OEE2QjUzMjZEPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOkZBN0YxMTc0MDcyMDY4MTFCMzRCREIxMjdBODc5OUEwPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8ZGM6c3ViamVjdD4KICAgICAgICAgICAgPHJkZjpTZXEvPgogICAgICAgICA8L2RjOnN1YmplY3Q+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE5OjAzOjE0IDE5OjAzOjIwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5QaXhlbG1hdG9yIDMuOC4xPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4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\"","import { createReducer } from 'redux-starter-kit'\n\nexport const INITIAL_STATE = {\n  activeCell: {\n    entered: '',\n    location: '',\n  },\n  inputter: {\n    valueEvent: {\n      value: '',\n      cursorPos: 0,\n    }\n  },\n  scheduledFloatingInputter: {\n    willOpen: false,\n    isInteractive: false,\n  },\n  floatingInputter: {\n    cellRect: {},\n    isOpen: false,\n    isInteractive: false,\n  },\n  rows: 30,\n  columns: 10,\n}\n\nexport default createReducer(INITIAL_STATE, {\n  'SET_TABLE_DIMENSIONS': (state, { payload }) => {\n    state.rows = payload.rows\n    state.columns = payload.columns\n  },\n  \n  'SET_ACTIVE_CELL': (state, { payload }) => {\n    state.activeCell = payload\n  },\n\n  'SCHEDULE_FLOATING_INPUTTER': (state, { payload }) => {\n    const { isInteractive } = payload\n\n    state.scheduledFloatingInputter = {\n      willOpen: true,\n      isInteractive,\n    }\n  },\n\n  'UNSCHEDULE_FLOATING_INPUTTER': (state) => {\n    state.scheduledFloatingInputter = {\n      willOpen: false,\n      isInteractive: false,\n    }\n  },\n\n  'OPEN_FLOATING_INPUTTER': (state, { payload }) => {\n    state.floatingInputter = { ...state.floatingInputter, ...payload }\n  },\n\n  'SET_FLOATING_INPUTTER_INTERACTIVE': (state, { payload }) => {\n    state.floatingInputter = { ...state.floatingInputter, isInteractive: payload }\n  },\n\n  'CLOSE_FLOATING_INPUTTER': (state) => {\n    state.floatingInputter.isOpen = false\n  },\n\n  'SET_INPUTTER_VALUE_EVENT': (state, { payload }) => {\n    state.inputter.valueEvent = payload\n  },\n\n  'RESET_FLOATING_INPUTTER': (state, { payload }) => {\n    state.floatingInputter = { ...state.floatingInputter, ...payload }\n  },\n})\n\n","import { createReducer } from 'redux-starter-kit'\n\n\nconst INITIAL_STATE = {}\n\nexport default createReducer(INITIAL_STATE, {\n  'SET_CELL_DATA': (state, { payload }) => {\n    const { location, data } = payload\n    state[location] = data\n  },\n\n  'DELETE_CELL_DATA': (state, { payload }) => {\n    delete state[payload]\n  }\n})\n","import { createReducer } from 'redux-starter-kit'\n\nconst INITIAL_STATE = {\n  colWidths: {},\n  rowHeights: {},\n}\n\nexport default createReducer(INITIAL_STATE, {\n\n  'SET_COL_WIDTH': (state, { payload }) => {\n    const { colLabel, width } = payload\n    const { colWidths } = state\n    state.colWidths = { ...colWidths, [colLabel]: width }\n  },\n\n  'SET_ROW_HEIGHT': (state, { payload }) => {\n    const { rowLabel, height } = payload\n    const { rowHeights } = state\n    state.rowHeights = { ...rowHeights, [rowLabel]: height }\n  },\n\n})\n","import { configureStore } from 'redux-starter-kit'\n\nimport globalReducer from './globalReducer'\nimport tableDataReducer from './tableDataReducer'\nimport tableMetaReducer from './tableMetaReducer'\n\n\nconst appStoreGen = () => (\n  configureStore({\n    reducer: {\n      global: globalReducer,\n      tableData: tableDataReducer,\n      tableMeta: tableMetaReducer,\n    }\n  })\n)\n\nconst appStore = appStoreGen()\n\n\nexport default appStore\nexport { appStoreGen }\n","const colors = {\n  text: '#3D3D3D',\n  table: {\n    border: '#dfdfdf',\n    borderDark: '#CCC',\n    labelBkg: '#F5F5F5'\n  },\n  dropdown: {\n    normal: '#fafafa',\n    active: '#ebebeb',\n  },\n  primary: {\n    strong: '#E10D75',\n    light: 'salmon',\n  },\n  field: {\n    background: '#F0F0F0',\n  },\n  shadow: '#939393',\n}\n\nconst breaks = {\n  xs: 0,\n  sm: 420,\n  md: 900,\n  lg: 1200,\n}\n\nconst breakBump = {\n  xs: 'sm',\n  sm: 'md',\n  md: 'lg',\n}\n\nconst queries = {\n  xs: `@media (max-width: ${breaks.sm - 1}px)`,\n  sm: `@media (min-width: ${breaks.sm}px) and (max-width: ${breaks.md - 1}px)`,\n  md: `@media (min-width: ${breaks.md}px) and (max-width: ${breaks.lg - 1}px)`,\n  lg: `@media (min-width: ${breaks.lg}px)`,\n  from: (breakPoint) => (`@media (min-width: ${breaks[breakPoint]}px)`),\n  upTo: (breakPoint) => (`@media (max-width: ${breaks[ breakBump[breakPoint] ] - 1}px)`),\n}\n\nconst theme = {\n  colors,\n  breaks,\n  queries,\n}\n\nexport default theme\n","/* @jsx jsx */\nimport { jsx, css } from '@emotion/core'\n\nimport theme from './theme'\n\n\nconst globalStyles = css`\n  body {\n    color: ${theme.colors.text};\n    line-height: 1.3em;\n    font-family: Arial, Helvetica, sans-serif;\n  }\n\n  table, th, td {\n    border: 0;\n    border-spacing: 0;\n    border-collapse: collapse;\n  }\n\n  td {\n    padding: 0;\n    line-height: 1.2em;\n  }\n\n  pre, p, h1, h2, h3, h4, h5, h6 {\n    margin: 0;\n  }\n\n  ul, li {\n    margin: 0;\n    padding: 0;\n  }\n`\n\nexport default globalStyles\n","import React from 'react'\nimport styled from '@emotion/styled'\n\n\nconst Root = styled.header`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n`\n\nconst Name = styled.a`\n  text-decoration: none;\n  color: ${props => props.theme.colors.text};\n  padding: 10px 0 0;\n\n  :hover {\n    text-decoration: underline;\n  }\n`\n\nconst Title = styled.h3`\n  align-self: center;\n  padding: 10px 0 20px;\n`\n\nfunction Header() {\n  return (\n    <Root>\n      <Name\n        href='https://www.cimarron.me'\n        rel='noopener noreferrer'\n      >\n        Julian Hernandez\n      </Name>\n      <Title>Spreadsheet App</Title>\n    </Root>\n  )\n}\n\nexport default Header\n","import { createAction } from 'redux-starter-kit'\n\n\nexport function setTableDimensions(rows, columns) {\n  return {\n    type: 'SET_TABLE_DIMENSIONS',\n    payload: {\n      rows,\n      columns,\n    }\n  }\n}\n\nexport function setInputterValueEvent(value, cursorPos) {\n  return {\n    type: 'SET_INPUTTER_VALUE_EVENT',\n    payload: {\n      value,\n      cursorPos: cursorPos === undefined\n        ? value.length\n        : cursorPos\n    }\n  }\n}\n\nexport function setActiveCell(location) {\n  return (dispatch, getState) => {\n    const cellData = getState().tableData[location]\n    const entered = (cellData || {}).entered || ''\n\n    dispatch(setInputterValueEvent(entered, entered.length))\n\n    return Promise.resolve(\n      dispatch({\n        type: 'SET_ACTIVE_CELL',\n        payload: {\n          entered,\n          location,\n        }\n      })\n    )\n  }\n}\n\nexport function setFloatingInputterInteractive(isInteractive) {\n  return {\n    type: 'SET_FLOATING_INPUTTER_INTERACTIVE',\n    payload: isInteractive\n  }\n}\n\nexport function openFloatingInputter(cellRect, isInteractive, replaceValue) {\n  return (dispatch, getState) => {\n    const state = getState()\n    const value = replaceValue ? replaceValue : state.global.activeCell.entered\n\n    dispatch(setInputterValueEvent(value))\n\n    return Promise.resolve(\n      dispatch({\n        type: 'OPEN_FLOATING_INPUTTER',\n        payload: {\n          cellRect,\n          isOpen: true,\n          isInteractive,\n          willOpen: false,\n        }\n      })\n    )\n  }\n}\n\nexport function resetInputterValueEvent() {\n  return (dispatch, getState) => {\n    const location = getState().global.activeCell.location\n    const cellData = getState().tableData[location]\n    const entered = (cellData || {}).entered || ''\n\n    dispatch(setInputterValueEvent(entered))\n  }\n}\n\nexport function scheduleFloatingInputter(isInteractive) {\n  return (dispatch, getState) => {\n    const { floatingInputter } = getState().global\n\n    if (floatingInputter.isOpen && floatingInputter.isInteractive === isInteractive) {\n      return\n    }\n\n    return Promise.resolve(\n      dispatch({\n        type: 'SCHEDULE_FLOATING_INPUTTER',\n        payload: {\n          isInteractive\n        },\n      })\n    )\n  }\n}\n\nexport function unscheduleFloatingInputter() {\n  return {\n    type: 'UNSCHEDULE_FLOATING_INPUTTER',\n    payload: null,\n  }\n}\n\nexport const closeFloatingInputter = createAction('CLOSE_FLOATING_INPUTTER')\n","\n/* @jsx jsx */\nimport React from 'react' // eslint-disable-line\nimport { jsx, css } from '@emotion/core'\n\n\nconst style = () => css`\n  border: 0;\n  display: flex;\n  font-size: 13px;\n  padding: 0 8px;\n`\nconst props = {\n  'data-inputter': 'bar',\n}\n\nexport default { style, props }\n","import React from 'react'\n\n\nexport const InputContext = React.createContext()\n","class Token {\n  constructor(type, text, whitespace, category, index) {\n    this.type = type\n    this.category = category\n    this.text = text\n    this.whitespace = whitespace\n    this.index = index\n    this.value = null\n    this.html = null\n  }\n}\n\nexport default Token\n","function testArgsAllNumbers(args) {\n  args.forEach(arg => {\n    if (typeof arg !== 'number') {\n      throw new TypeError(`Function argument not a number: ${arg}`)\n    }\n  })\n}\n\nconst Fn = {\n  AVERAGE: {\n    fn: (...args) => {\n      if (args.length === 0) {\n        throw new Error('Empty elements')\n      }\n\n      return Fn.SUM.fn(...args) / Fn.COUNT.fn(...args)\n    },\n    definition: 'AVERAGE(value1, value2, ...)',\n    example: 'AVERAGE(A1:B3, 3)',\n    summary: 'Returns the average from a series of numbers.',\n  },\n\n  CONCAT: {\n    fn: (...args) => {\n      let result = []\n\n      if (args.length === 0) {\n        throw new Error('Empty elements')\n      }\n\n      for (let arg of args) {\n        if (typeof arg !== 'string') {\n          throw new Error(`Element is not a string: ${arg}`)\n        }\n\n        result.push(arg)\n      }\n\n      return result.join('')\n    },\n    definition: 'CONCAT(\"text1\", \"text2\", ...)',\n    example: 'CONCAT(\"one\", \"two\")',\n    summary: 'Returns a single concatenated string from a series of strings.',\n  },\n\n  COUNT: {\n    fn: (...args) => args.length,\n    definition: 'COUNT(element1, element2, ...)',\n    example: 'COUNT(A1:B3, 2, C4)',\n    summary: 'Returns the number of non-empty elements in a set.',\n  },\n\n  MAX: {\n    fn: (...args) => {\n      if (args.length === 0) {\n        throw new Error('Empty elements')\n      }\n\n      testArgsAllNumbers(args)\n      return Math.max(...args)\n    },\n    definition: 'MAX(value1, value2, ...)',\n    example: 'MAX(A1:B3, 4, C3)',\n    summary: 'Returns the maximum value from a series of numbers',\n  },\n\n  MIN: {\n    fn: (...args) => {\n      if (args.length === 0) {\n        throw new Error('Empty elements')\n      }\n\n      testArgsAllNumbers(args)\n      return Math.min(...args)\n    },\n    definition: 'MIN(value1, value2, ...)',\n    example: 'MIN(A1:B3, 4, C3)',\n    summary: 'Returns the minimum value from a series of numbers.',\n  },\n\n  POWER: {\n    fn: (...args) => {\n      if (args.length !== 2) {\n        throw new Error('Formula takes only two elements')\n      }\n\n      testArgsAllNumbers(args)\n      const [base, exp] = args\n      return Math.pow(base, exp)\n    },\n    definition: 'POWER(base, exponent)',\n    example: 'POWER(A3,2)',\n    summary: 'Returns a number raised to an exponent.'\n  },\n\n  SQRT: {\n    fn: (...args) => {\n      if (args.length !== 1) {\n        throw new Error(`Formula takes only one element`)\n      }\n\n      testArgsAllNumbers(args)\n      return Math.sqrt(args[0])\n    },\n    definition: 'SQRT(value)',\n    example: 'SQRT(9) or SQRT(A3)',\n    summary: 'Returns the square root of a number.'\n  },\n\n  SUM: {\n    fn: (...args) => {\n      if (args.length === 0) {\n        throw new Error('Empty elements')\n      }\n\n      testArgsAllNumbers(args)\n      return args.reduce((prev, curr) => (curr + prev), 0)\n    },\n    definition: 'SUM(value1, value2, ...)',\n    example: 'SUM(A1:B3, 3, C5)',\n    summary: 'Retuns the sum from a series of numbers.',\n  }\n}\n\n// aliases\nFn.AVG = {\n  ...Fn.AVERAGE,\n  definition: 'AVG(value1, value2, ...)',\n  example: 'AVG(A1:B3, 3)',\n}\n\nFn.POW = {\n  ...Fn.POWER,\n  definition: 'POW(base, exponent)',\n  example: 'POW(A3,2)',\n}\n\nexport default Fn\n","const BASE_CODE_POINT = 'A'.codePointAt(0)\n\nexport function buildUrl(baseUrl, query={}) {\n  const urlQuery = Object.entries(query).map(([key, val]) => `${key}=${val}`).join('&')\n  return [baseUrl.trim(), urlQuery].join('?')\n}\n\nexport function clamp(value, min, max) {\n  return Math.min( Math.max(value, min), max )\n}\n\nexport function getRangeArray(min, max, isString=false) {\n  const range = []\n\n  for (let num = min; num <= max; num++) {\n    range.push( isString ? num.toString() : num )\n  }\n\n  return range\n}\n\nexport const sleep = (ms) => new Promise(resolve => setTimeout(() => resolve(), ms))\n\nexport function getColumnNames(cols) {\n  const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n  let names = []\n  let prevNames = ['']\n  let remainCols = cols\n\n  while (remainCols > 0) {\n    const newNames = []\n\n    outerLoop:\n    for (let colName of prevNames) {  \n      for (let letter of alphabet) {\n        if (remainCols === 0)  { break outerLoop }\n        newNames.push(`${colName}${letter}`)\n        remainCols -= 1\n      }\n    }\n\n    prevNames = newNames\n    names = [...names, ...newNames]\n  }\n\n  return names\n}\n\nexport function getCellNames(rows, cols) {\n  const names = []\n  let colNames = getColumnNames(cols)\n\n  for (let row=1; row <= rows; row++) {\n    for (let col of colNames) {\n      names.push(`${col}-${row}`)\n    }\n  }\n\n  return names\n}\n\nexport function getColumnPosition(colLabel) {\n  const letters = colLabel.split('')\n  const oneBase = letters.reduce((prev, letter) => (\n    prev * 26 + letter.charCodeAt(0) - BASE_CODE_POINT + 1\n  ), 0)\n\n  return oneBase - 1\n}\n\nexport function getColumnLabel(num) {\n  const label = []\n  const basePoint = BASE_CODE_POINT\n  let curr = num + 1\n\n  do {\n    curr -= 1\n    const letterPosition = curr % 26\n    const codePoint = basePoint + letterPosition\n    const letter = String.fromCodePoint(codePoint)\n    label.push(letter)\n\n    curr = Math.floor(curr / 26)\n  } while (curr > 0)\n\n  return label.reverse().join('')\n}\n\nexport function parseLocation(location) {\n  let [col, row] = location.split('-')\n  const colIndex = getColumnPosition(col)\n  const rowIndex = +row - 1\n\n  return [colIndex, rowIndex]\n}\n\nexport function isNumber(numStr) {\n  const isPeriodsAndDigits = Boolean(numStr.match(/^[.\\d]+$/))\n  const periodCount = (numStr.match(/\\./g) || []).length\n\n  if (!isPeriodsAndDigits) { return false }\n  if (periodCount > 1) { return false }\n  if (numStr.length === 1 && numStr[0] === '.') { return false }\n  return true\n}\n\nexport function debounce(fn, wait, isImmediate=true) {\n  let timeout\n\n  return (...args) => {\n    if (isImmediate) {\n      if (timeout) { return }\n\n      fn(...args)\n\n      timeout = setTimeout(() => {\n        clearTimeout(timeout)\n        timeout = null\n      }, wait)\n    } else {\n      clearInterval(timeout)\n\n      timeout = setTimeout(() => {\n        fn(...args)\n        timeout = null\n      }, wait)\n    }\n  }\n}\n","import { TOKENS as t } from './Lexer'\nimport formulaFuncs from './formulaFunctions'\nimport { isNumber } from '~/library/utils'\n\n\nclass TokenSanitizer {\n  constructor(tokens) {\n    this.tokens = tokens\n  }\n\n  sanitize() {\n    return this.tokens.map(token => {\n      switch(token.type) {\n        case t.NUMBER:\n          return this.number(token)\n        case t.CELL:\n          return this.cell(token)\n        case t.FUNCTION:\n          return this.function(token)\n        case t.STRING:\n          return this.string(token)\n        default:\n          return token\n      }\n    })\n  }\n\n  number(token) {\n    if (!isNumber(token.text)) {\n      token.type = t.UNKNOWN\n      return token\n    }\n\n    token.value = parseFloat(token.text)\n    return token\n  }\n\n  cell(token) {\n    token.value = this.getCellLabel(token)\n    return token\n  }\n\n  function(token) {\n    const fn = this.getFunction(token)\n    \n    if (fn) {\n      token.value = fn\n    } else {\n      token.type = t.UNKNOWN\n    }\n\n    return token\n  }\n\n  string(token) {\n    token.value = token.text.slice(1, -1)\n    return token\n  }\n\n  getCellLabel(token) {\n    const { text } = token\n    const { index } = text.match(/\\d+/)\n    const col = text.slice(0, index).toUpperCase()\n    const row = text.slice(index)\n    return `${col}-${row}`\n  }\n\n  getFunction(token) {\n    const fnName = token.text.toUpperCase()\n    const fnNode = formulaFuncs[fnName]\n    return fnNode && fnNode.fn\n  }\n}\n\nexport default TokenSanitizer\n","class LexerRule {\n  constructor(regex, groupIndex, token, category) {\n    this.regex = regex\n    this.groupIndex = groupIndex\n    this.token = token\n    this.category = category\n  }\n\n  setIndex(index) {\n    this.regex.lastIndex = index\n  }\n\n  test(input) {\n    return this.regex.exec(input)\n  }\n}\n\nexport default LexerRule\n","import Token from './Token'\nimport TokenSanitizer from './TokenSanitizer'\nimport LexerRule from './LexerRule'\nimport { isNumber } from '~/library/utils'\n\n\nconst TOKENS = {\n  // internal\n  EOF: 'EOF',\n  // structure\n  EQUALS: 'EQUALS',\n  COMMA: 'COMMA',\n  COLON: 'COLON',\n  LPAREN: 'LPAREN',\n  RPAREN: 'RPAREN',\n  // operators\n  PLUS: 'PLUS',\n  MINUS: 'MINUS',\n  MULT: 'MULT',\n  DIV: 'DIV',\n  // entities\n  TEXT: 'TEXT',\n  CELL: 'CELL',\n  STRING: 'STRING',\n  NUMBER: 'NUMBER',\n  FUNCTION: 'FUNCTION',\n  UNKNOWN: 'UNKNOWN',\n}\n\nconst t = TOKENS\n\nconst GRAMMAR = [\n  // structure\n  new LexerRule(/=/g, 0, t.EQUALS, 'structure'),\n  new LexerRule(/,/g, 0, t.COMMA, 'structure'),\n  new LexerRule(/:/g, 0, t.COLON, 'structure'),\n  new LexerRule(/\\(/g, 0, t.LPAREN, 'structure'),\n  new LexerRule(/\\)/g, 0, t.RPAREN, 'structure'),\n  // operators\n  new LexerRule(/\\+/g, 0, t.PLUS, 'operator'),\n  new LexerRule(/\\-/g, 0, t.MINUS, 'operator'), // eslint-disable-line\n  new LexerRule(/\\*/g, 0, t.MULT, 'operator'),\n  new LexerRule(/\\//g, 0, t.DIV, 'operator'),\n  // multi-character\n  new LexerRule(/(\"[^\"]+\")/g, 1, t.STRING, 'entity'), // eslint-disable-line\n  new LexerRule(/[\\d\\.]+/g, 0, t.NUMBER, 'entity'), // eslint-disable-line\n  new LexerRule(/[a-z]+[\\d]+/gi, 0, t.CELL, 'entity'),\n  new LexerRule(/([a-z]+)\\(/gi, 1, t.FUNCTION, 'entity'),\n]\n\n\nclass Lexer {\n  constructor(input) {\n    this.input = input\n    this.index = 0\n    this.char = this.initChar(input)\n    this.markers = []\n    this.tokens = []\n  }\n\n  getTokens() {\n    while (this.char !== t.EOF) {\n      const token = this.nextToken()\n      this.tokens.push(token)\n    }\n\n    const sanitizer = new TokenSanitizer(this.tokens)\n    this.tokens = sanitizer.sanitize()\n    return this.tokens\n  }\n\n  nextToken() {\n    if (this.char === t.EOF) {\n      return new Token(t.EOF, t.EOF, 0, 'eof', this.index)\n    }\n\n    if (!this.isFormula()) {\n      return this.tokenTEXTorNUMBER()\n    }\n\n    const whitespaceLen = this.getWhitespaceLen()\n    let token\n\n    for (let rule of GRAMMAR) {\n      rule.setIndex(this.index)\n      const match = rule.test(this.input)\n\n      if (match && match.index === this.index) {\n        const text = match[rule.groupIndex]\n        token = new Token(rule.token, text, whitespaceLen, rule.category, this.index)\n        this.index += text.length - 1\n        this.consume()\n        break\n      }\n    }\n\n    if (!token) {\n      token = this.tokenUNKNOWN(whitespaceLen)\n    }\n\n    return token\n  }\n\n  initChar(input) {\n    if (this.input.length === 0) {\n      this.input = '0'\n      this.index = -1\n    }\n\n    return input[this.index]\n  }\n\n  tokenUNKNOWN(whitespace) {\n    const chars = []\n\n    while (!(this.isEOF() || this.isSeparator() || this.isWhitespace())) {\n      chars.push(this.char)\n      this.consume()\n    }\n\n    const text = chars.join('')\n    return new Token(t.UNKNOWN, text, whitespace, 'entity', this.index - text.length)\n  }\n\n  tokenTEXTorNUMBER() {\n    let token\n\n    if (isNumber(this.input)) {\n      token = new Token(t.NUMBER, this.input, 0, 'entity', this.index)\n    } else {\n      token = new Token(t.TEXT, this.input, 0, 'entity', this.index)\n    }\n\n    this.index = this.input.length - 1\n    this.consume()\n    return token\n  }\n\n  consume() {\n    this.index++\n\n    if (this.index < this.input.length) {\n      this.char = this.input[this.index]\n    } else {\n      this.char = t.EOF\n    }\n  }\n\n  isFormula() {\n    return this.input[0] === '='\n  }\n\n  isEOF() {\n    return this.char === t.EOF\n  }\n\n  isWhitespace() {\n    return !this.isEOF() && Boolean(this.char.match(/\\s/))\n  }\n\n  isSeparator() {\n    return Boolean(this.char.match(/[\\(\\)\\+\\-\\/\\*]/)) // eslint-disable-line\n  }\n\n  getWhitespaceLen() {\n    let count = 0\n\n    while (this.isWhitespace()) {\n      count++\n      this.consume()\n    }\n\n    return count\n  }\n}\n\nexport default Lexer\nexport { GRAMMAR, TOKENS, Lexer }\n","class KeyboardActions {\n  constructor(component) {\n    this.c = component\n  }\n\n  run() {\n    const { key } = this.c.state.keyEvent\n\n    if (key === 'Escape') {\n      this.c.props.resetInputterValueEvent()\n      this.c.props.onEscape()\n    } else if (['ArrowLeft', 'ArrowRight'].includes(key)) {\n      this.c.props.setInputterValueEvent(\n        this.c.props.valueEvent.value,\n        this.c.refInput.current.selectionEnd\n      )\n    }\n  }\n}\n\nexport default KeyboardActions\n","import { parseLocation, getColumnLabel } from '~/library/utils'\n\n\nclass KeyboardFocuser {\n  constructor(component) {\n    this.c = component\n  }\n\n  run() {\n    const { location } = this.c.props\n    let elQry\n\n    if (this.c.state.isFuncSelectorVisible) {\n      elQry = this.funcSelectorElQry(location)\n    } else {\n      elQry = this.defaultElQry(location)\n    }\n\n    this.focusElement(elQry)\n  }\n\n  funcSelectorElQry(location) {\n    const { key } = this.c.state.keyEvent\n\n    if (key === 'Escape') {\n      return this.resultCellQry(location)\n    }\n  }\n\n  defaultElQry(location) {\n    const { key, shiftKey } = this.c.state.keyEvent\n\n    if (key === 'Escape') {\n      return this.resultCellQry(location)\n    } else if (key === 'Tab' && shiftKey) {\n      return this.left(location)\n    } else if (key === 'Tab') {\n      return this.right(location)\n    } else if (key === 'Enter') {\n      return this.down(location)\n    }\n  }\n\n  left(location) {\n    const [colIndex, rowIndex] = parseLocation(location)\n    const nextColIndex = Math.max(0, colIndex - 1)\n    const colLabel = getColumnLabel(nextColIndex)\n    const rowLabel = '' + (rowIndex + 1)\n    const endLocation = `${colLabel}-${rowLabel}`\n    return this.resultCellQry(endLocation)\n  }\n\n  right(location) {\n    const [colIndex, rowIndex] = parseLocation(location)\n    const nextColIndex = Math.min(this.c.props.columns - 1, colIndex + 1)\n    const colLabel = getColumnLabel(nextColIndex)\n    const rowLabel = '' + (rowIndex + 1)\n    const endLocation = `${colLabel}-${rowLabel}`\n    return this.resultCellQry(endLocation)\n  }\n\n  down(location) {\n    const [colIndex, rowIndex] = parseLocation(location)\n    const nextRowIndex = Math.min(this.c.props.rows - 1, rowIndex + 1)\n    const colLabel = getColumnLabel(colIndex)\n    const rowLabel = '' + (nextRowIndex + 1)\n    const endLocation = `${colLabel}-${rowLabel}`\n    return this.resultCellQry(endLocation)\n  }\n\n  resultCellQry(location) {\n    return `[data-cell=\"result\"][data-location=\"${location}\"]`\n  }\n\n  focusElement(elQry) {\n    if (!elQry) { return }\n    const el = document.querySelector(elQry)\n    el.focus()\n  }\n}\n\nexport default KeyboardFocuser\n","import { debounce } from '~/library/utils'\n\n\nclass InputterHistory {\n  constructor(component, maxUndo, wait) {\n    this.c = component\n    this.maxUndo = maxUndo\n    this.history = []\n    this.index = 0\n    this.lastUndo = null\n    this.push = debounce(this.pushValueEvent.bind(this), wait, false)\n    this.push.bind(this)\n  }\n\n  reset() {\n    const { entered, valueEvent } = this.c.props\n    this.history.length = 0\n\n    if (entered !== valueEvent.value) {\n      this.history.push({ value: entered, cursorPos: entered.length })\n    }\n\n    this.index = 0\n    this.lastUndo = null\n  }\n\n  keyAction() {\n    const { key, metaKey, ctrlKey, shiftKey } = this.c.state.keyEvent\n\n    if (key === 'z' && shiftKey && (metaKey || ctrlKey)) {\n      this.redo()\n    } else if (key === 'z' && (metaKey || ctrlKey)) {\n      this.undo()\n    }\n  }\n\n  pushValueEvent(valueEvent) {\n    if (!this.c.props.isInteractive) { return }\n    if (this.isValueRepeated(valueEvent)) { return }\n    this.truncateHistory()\n    this.history.push(valueEvent)\n    this.index = this.history.length - 1\n    this.lastUndo = null\n  }\n\n\n  undo() {\n    const index = Math.max(0, this.index - 1)\n    this.setInputterValueEvent(index)\n  }\n\n  redo() {\n    const index = Math.min(this.history.length - 1, this.index + 1)\n    this.setInputterValueEvent(index)\n  }\n\n  isValueRepeated(valueEvent) {\n    const { value } = valueEvent\n\n    if (this.lastUndo && this.lastUndo.value === value) {\n      return true\n    } else if (this.history.length > 0) {\n      const index = this.history.length - 1\n      return this.history[index].value === value\n    }\n\n    return false\n  }\n\n  truncateHistory() {\n    while (this.index < this.history.length - 1) {\n      this.history.pop()\n    }\n\n    if (this.history.length === this.maxUndo) {\n      this.history.shift()\n    }\n  }\n\n  setInputterValueEvent(index) {\n    if (index !== this.index) {\n      const event = this.history[index]\n      this.index = index\n      this.lastUndo = event\n      this.c.props.setInputterValueEvent(event.value, event.cursorPos)\n    }\n  }\n}\n\nexport default InputterHistory\n","export function setCellData(location, entered, result) {\n  return {\n    type: 'SET_CELL_DATA',\n    payload: { location, data: { entered, result } },\n  }\n}\n\nexport function clearCellData(location) {\n  return (dispatch, getState) => {\n    const value = getState().tableData[location]\n\n    if (value === undefined) {\n      return Promise.resolve()\n    }\n\n    return Promise.resolve(dispatch({\n      type: 'DELETE_CELL_DATA',\n      payload: location,\n    }))\n  }\n}\n","import appStore from '~/reducers/'\n\n\nclass ReduxConnector {\n  constructor(store=appStore) {\n    this.store = store\n    this.funcs = {}\n  }\n\n  get fn() {\n    return this.funcs\n  }\n\n  getState() {\n    return this.store.getState()\n  }\n\n  registerFunctions(funcs) {\n    for (let [name, fn] of Object.entries(funcs)) {\n      this.funcs[name] = async function(...args) {\n        await this.store.dispatch( fn(...args) )\n      }.bind(this)\n    }\n  }\n}\n\nexport default ReduxConnector\n","import ReduxConnector from '~/library/ReduxConnector'\nimport { clearCellData, setCellData } from '~/actions/tableDataActions'\n\n\nconst reduxConnector = new ReduxConnector()\n\nconst dispatchFunctions = {\n  clearCellData,\n  setCellData,\n}\n\nreduxConnector.registerFunctions(dispatchFunctions)\n\nclass ReduxStore {\n  constructor(rc=reduxConnector) {\n    const { rows, columns } = rc.getState().global\n    this.rows = rows\n    this.columns = columns\n    this.reduxConnector = rc\n  }\n\n  get tableData() {\n    return this.reduxConnector.getState().tableData\n  }\n\n  get locations() {\n    return Object.keys(this.tableData)\n  }\n\n  getCellResult(location) {\n    const data = this.tableData[location]\n    return data && data.result\n  }\n\n  setCellData(location, entered, result) {\n    this.reduxConnector.fn.setCellData(location, entered, result)\n  }\n\n  clearCellData(location) {\n    this.reduxConnector.fn.clearCellData(location)\n  }\n}\n\nexport default ReduxStore\nexport { dispatchFunctions }\n","import { TOKENS as t } from './Lexer'\n\n\nclass AST {\n  constructor(name) {\n    this._name = name\n  }\n\n  eval() {\n    throw new Error('Implement method.')\n  }\n}\n\nclass TextNode extends AST {\n  constructor(textNode) {\n    super('TextNode')\n    this.node = textNode\n  }\n\n  eval() {\n    return this.node.text\n  }\n}\n\nclass StringNode extends AST {\n  constructor(node) {\n    super('StringNode')\n    this.node = node\n  }\n\n  eval() {\n    return this.node.value\n  }\n}\n\nclass NumberNode extends AST {\n  constructor(node) {\n    super('NumberNode')\n    this.node = node\n  }\n\n  eval() {\n    return this.node.value\n  }\n}\n\nclass CellNode extends AST {\n  constructor(token) {\n    super('CellNode')\n    this.cell = token\n  }\n\n  get location() {\n    return this.cell.value\n  }\n}\n\nclass CellRange extends AST {\n  constructor(leftCell, rightCell) {\n    super('CellRange')\n    this.leftCell = leftCell\n    this.rightCell = rightCell\n  }\n}\n\nclass UnaryOp extends AST {\n  constructor(opNode, expr) {\n    super('UnaryOp')\n    this.opNode = opNode\n    this.expr = expr\n  }\n\n  eval(evaluatedExpr) {\n    if (this.opNode.type === t.PLUS) {\n      return evaluatedExpr\n    } else if (this.opNode.type === t.MINUS) {\n      return -evaluatedExpr\n    }\n  }\n}\n\nclass FuncOp extends AST {\n  constructor(funcNode, argNodes) {\n    super('FuncOp')\n    this.funcNode = funcNode\n    this.argNodes = argNodes\n  }\n\n  eval(evaluatedArgs) {\n    const fn = this.funcNode.value\n    return fn(...evaluatedArgs)\n  }\n}\n\nclass BinaryOp extends AST {\n  constructor(leftNode, opNode, rightNode) {\n    super('BinaryOp')\n    this.leftNode = leftNode\n    this.opNode = opNode\n    this.rightNode = rightNode\n  }\n\n  eval(left, right) {\n    switch(this.opNode.type) {\n      case t.PLUS:\n        return left + right\n      case t.MINUS:\n        return left - right\n      case t.DIV:\n        if (right === 0) {\n          throw new Error(`Division by zero: ${left}/${right}`)\n        } else {\n          return left / right\n        }\n      case t.MULT:\n        return left * right\n      default:\n        throw new Error(`Unsupported operator \"${this.token.text}\"`)\n    }\n  }\n}\n\nexport {\n  TextNode,\n  StringNode,\n  NumberNode,\n  CellNode,\n  CellRange,\n  BinaryOp,\n  UnaryOp,\n  FuncOp,\n}\n","import { TOKENS as t } from './Lexer'\nimport {\n  TextNode,\n  StringNode,\n  NumberNode,\n  CellNode,\n  CellRange,\n  BinaryOp,\n  UnaryOp,\n  FuncOp\n} from './ast'\n\n\nclass Parser {\n  constructor(tokens) {\n    this.index = 0\n    this.tokens = tokens\n    this.curr = this.tokens[0]\n    this.ast = null\n  }\n\n  parse() {\n    switch (this.peekType()) {\n      case t.TEXT:\n        this.ast = this.text()\n        break\n      case t.NUMBER:\n        this.ast = this.number()\n        break\n      default:\n        this.equals()\n        this.ast = this.expr()\n        break\n    }\n\n    if (this.curr !== null) {\n      throw new Error(`Unexpected term at index ${this.index}: \"${this.curr.text}\"`)\n    }\n\n    return this.ast\n  }\n\n  expr() {\n    // expr : term ( ( PLUS | MINUS ) term ) *\n    let node, operator, right\n\n    node = this.term()\n\n    while ( [t.PLUS, t.MINUS].includes(this.peekType()) ) {\n      operator = this.operator()\n      right = this.term()\n      node = new BinaryOp(node, operator, right)\n    }\n\n    return node\n  }\n\n  term() {\n    // term : factor ( ( MULT | DIV ) factor ) *\n    let node, operator, right\n\n    node = this.factor()\n\n    while ( [t.MULT, t.DIV].includes(this.peekType()) ) {\n      operator = this.operator()\n      right = this.factor()\n      node = new BinaryOp(node, operator, right)\n    }\n\n    return node\n  }\n\n  factor() {\n    // factor : ( PLUS | MINUS ) ( NUMBER | CELL )\n    //          | LPAREN expr RPAREN\n    //          | FUNCTION LPAREN list RPAREN\n    switch (this.peekType()) {\n      case t.LPAREN:\n        return this.enclosedExpr()\n      case t.PLUS:\n      case t.MINUS:\n        return this.unaryOp()\n      case t.NUMBER:\n        return this.number()\n      case t.CELL:\n        return this.cell()\n      case t.FUNCTION:\n        return this.func()\n      case t.RPAREN:\n        throw new Error(`Unexpected term at index ${this.index}: \"${this.curr.text}\"`)\n      default:\n        throw new Error('Missing factor')\n    }\n  }\n\n  enclosedExpr() {\n    this.lparen()\n    const node = this.expr()\n    this.rparen()\n    return node\n  }\n\n  cell() {\n    if (this.peekType() !== t.CELL) {\n      throw new Error('Missing cell node')\n    }\n\n    const node = new CellNode(this.curr)\n    this.consume()\n    return node\n  }\n\n  cellRange() {\n    let left, right\n\n    if (!this.isCellRange()) {\n      throw new Error('Missing cell range')\n    }\n\n    left = new CellNode(this.curr)\n    this.consume() // skip colon\n    this.consume()\n    right = new CellNode(this.curr)\n    this.consume()\n\n    if (right.location < left.location) {\n      [left, right] = this.invertCellRange(left, right)\n    }\n\n    return new CellRange(left, right)\n  }\n\n  invertCellRange(left, right) {\n    this.tokens[this.index - 2] = right.cell\n    this.tokens[this.index] = left.cell\n    let temp = left\n    left = right\n    right = temp\n    return [left, right]\n  }\n\n  func() {\n    if (this.peekType() !== t.FUNCTION) {\n      throw new Error('Missing function')\n    }\n\n    const func = this.curr\n    this.consume()\n    this.lparen()\n    const args = this.list()\n    this.rparen()\n    return new FuncOp(func, args)\n  }\n\n  list() {\n    const list = []\n    let node\n\n    node = this.listNode()\n    list.push(node)\n\n    while (this.peekType() === t.COMMA) {\n      this.consume() // skip comma token\n      node = this.listNode()\n      list.push(node)\n    }\n\n    return list\n  }\n\n  listNode() {\n    if (this.isCellRange()) {\n      return this.cellRange()\n    } else if (this.peekType() === t.STRING) {\n      return this.string()\n    } else {\n      return this.expr()\n    }\n  }\n\n  text() {\n    let node\n\n    if (this.peekType() !== t.TEXT) {\n      throw new Error('Missing string')\n    }\n\n    node = new TextNode(this.curr)\n    this.consume()\n    return node\n  }\n\n  string() {\n    const node = new StringNode(this.curr)\n    this.consume()\n    return node\n  }\n\n  number() {\n    if (this.peekType() === t.NUMBER) {\n      const node = new NumberNode(this.curr)\n      this.consume()\n      return node\n    } else {\n      throw new Error('Missing number')\n    }\n  }\n\n  operator() {\n    if ([t.PLUS, t.MINUS, t.MULT, t.DIV].includes(this.peekType())) {\n      const node = this.curr\n      this.consume()\n      return node\n    } else {\n      throw new Error('Missing operator')\n    }\n  }\n\n  equals() {\n    if (this.peekType() !== t.EQUALS) {\n      throw new Error('Missing equals sign')\n    }\n\n    this.consume()\n  }\n\n  lparen() {\n    if (this.peekType() !== t.LPAREN) {\n      throw new Error('Missing left parenthesis')\n    }\n\n    this.consume()\n  }\n\n  rparen() {\n    if (this.peekType() !== t.RPAREN) {\n      throw new Error('Missing right parenthesis')\n    }\n\n    this.consume()\n  }\n\n  unaryOp() {\n    if (![t.PLUS, t.MINUS].includes(this.peekType())) {\n      throw new Error('Missing unary operator')\n    }\n\n    const curr = this.curr\n    this.consume()\n    const node = new UnaryOp(curr, this.factor())\n    return node\n  }\n\n  consume() {\n    if (this.index < this.tokens.length - 1) {\n      this.index++\n      this.curr = this.tokens[this.index]\n    } else {\n      this.curr = null\n    }\n  }\n\n  isCellRange() {\n    return (\n      this.peekType(0) === t.CELL\n      && this.peekType(1) === t.COLON\n      && this.peekType(2) === t.CELL\n    )\n  }\n\n  isString() {\n    return (\n      this.peekType(0) === t.DQUOTE\n      && this.peekType(1) === t.TEXT\n      && this.peekType(2) === t.DQUOTE\n    )\n  }\n\n  peekType(stepsAhead) {\n    if (stepsAhead) {\n      if (stepsAhead < 0) {\n        throw new Error('peak ahead index must be positive')\n      }\n\n      const index = this.index + stepsAhead\n\n      if (index < this.tokens.length) {\n        return this.tokens[index].type\n      }\n    } else {\n      return this.curr && this.curr.type\n    }\n  }\n}\n\nexport default Parser\n","import { Lexer } from './Lexer'\nimport { parseLocation, getColumnLabel } from '~/library/utils'\nimport graph from '~/formulas/graph'\nimport Parser from './Parser'\nimport ReduxStore from './ReduxStore'\n\n\nconst ERR_DIVISION_BY_ZERO = '#DIV/0!'\nconst ERR_CIRCULAR_REFERENCE = '#REF!'\nconst ERR_GENERIC = '#ERROR!'\n\nclass Interpreter {\n  constructor(location) {\n    this.location = location\n    this.error = null\n    this.cache = {}\n    this.result = null\n    this.store = new ReduxStore()\n  }\n\n  getAST(entered) {\n    try {\n      const lexer = new Lexer(entered)\n      const parser = new Parser( lexer.getTokens() )\n      const ast = parser.parse()\n      return ast\n    } catch (error) {\n      this.error = error\n      throw new Error(ERR_GENERIC)\n    }\n  }\n\n  visitAST(location) {\n    const vertex = graph.getVertex(location)\n\n    if (!vertex.ast) {\n      return vertex.result\n    }\n\n    try {\n      this.result = vertex.result = this.visitNode(vertex.ast)\n    } catch (error) {\n      this.error = vertex.error = error\n      this.result = vertex.result = this.errorResponse()\n      throw error\n    }\n\n    return this.result\n  }\n\n  visitNode(node) {\n    switch (node._name) {\n      case 'NumberNode':\n        return this.NumberNode(node)\n      case 'CellNode':\n        return this.CellNode(node)\n      case 'TextNode':\n        return this.TextNode(node)\n      case 'StringNode':\n        return this.StringNode(node)\n      case 'CellRange':\n        return this.CellRange(node)\n      case 'FuncOp':\n        return this.FuncOp(node)\n      case 'BinaryOp':\n        return this.BinaryOp(node)\n      case 'UnaryOp':\n        return this.UnaryOp(node)\n      default:\n        const nodeName = node._name || (node.constructor || {}).name\n        throw new Error(`Unrecognized AST node ${nodeName}`)\n    }\n  }\n  \n  /* ***************************************\n   * Nodes that don't require processing\n   ****************************************/\n\n  TextNode(node) {\n    return node.eval()\n  }\n\n  StringNode(node) {\n    return node.eval()\n  }\n\n  NumberNode(node) {\n    return node.eval()\n  }\n\n  /* ***************************************\n   * Nodes requiring processing\n   ****************************************/\n\n  UnaryOp(node) {\n    const result = this.visitNode(node.expr)\n    return node.eval(result)\n  }\n\n  CellNode(node) {\n    const result = this.getCellResult(node.location)\n    return result === undefined\n      ? 0\n      : result\n  }\n\n  BinaryOp(node) {\n    const left = this.visitNode(node.leftNode)\n    const right = this.visitNode(node.rightNode)\n\n    if (typeof left !== 'number') {\n      throw new Error(`term is not a number: \"${left}\"`)\n    }\n\n    if (typeof right !== 'number') {\n      throw new Error(`term is not a number: \"${right}\"`)\n    }\n\n    return node.eval(left, right)\n  }\n\n  CellRange(node) {\n    const [leftColIndex, leftRowIndex] = parseLocation(node.leftCell.location)\n    const [rightColIndex, rightRowIndex] = parseLocation(node.rightCell.location)\n    const colIndexStart = Math.min(leftColIndex, rightColIndex)\n    const colIndexEnd = Math.max(leftColIndex, rightColIndex)\n    const rowIndexStart = Math.min(leftRowIndex, rightRowIndex)\n    const rowIndexEnd = Math.max(leftRowIndex, rightRowIndex)\n    const list = []\n\n    for (let rowI = rowIndexStart; rowI <= rowIndexEnd; rowI++) {\n      for (let colI = colIndexStart; colI <= colIndexEnd; colI++) {\n        const location = `${getColumnLabel(colI)}-${rowI + 1}`\n        const result = this.getCellResult(location)\n\n        if (result !== undefined) {\n          list.push(result)\n        }\n      }\n    }\n\n    return list\n  }\n\n  getCellResult(otherLocation) {\n    let result\n\n    if (!this.isLocationValid(otherLocation)) {\n      throw new Error('Location out of bounds')\n    }\n\n    if (this.cache[otherLocation] !== undefined) {\n      return this.cache[otherLocation]\n    }\n\n    result = graph.visitCell(otherLocation)\n    this.cache[otherLocation] = result\n    return result\n  }\n\n  FuncOp(node) {\n    const evaluatedArgs = []\n\n    for (let childNode of node.argNodes) {\n      const result = this.visitNode(childNode)\n\n      if (childNode._name === 'CellRange') {\n        evaluatedArgs.push(...result)\n      } else {\n        evaluatedArgs.push(result)\n      }\n    }\n\n    return node.eval(evaluatedArgs)\n  }\n\n  isLocationValid(location) {\n    const [colIndex, rowIndex] = parseLocation(location)\n\n    if (Math.min(colIndex, rowIndex) < 0) { return false }\n    if (colIndex >= this.store.columns) { return false }\n    if (rowIndex >= this.store.rows) { return false }\n    return true\n  }\n\n  errorResponse() {\n    const { message: errorMsg } = this.error\n\n    if (errorMsg.match(/division by zero/i)) {\n      return ERR_DIVISION_BY_ZERO\n    } else if (errorMsg.match(/circular reference/i)) {\n      return ERR_CIRCULAR_REFERENCE\n    } else {\n      return ERR_GENERIC\n    }\n  }\n}\n\nexport default Interpreter\nexport {\n  ERR_DIVISION_BY_ZERO,\n  ERR_CIRCULAR_REFERENCE,\n  ERR_GENERIC,\n}\n","import ReduxStore from './ReduxStore'\nimport Interpreter from './Interpreter'\n\n\nclass Vertex {\n  constructor(entered) {\n    this.entered = entered\n    this.error = null\n    this.result = null\n    this.ast = null\n  }\n}\n\nclass Graph {\n  constructor() {\n    this.adj = {}\n    this.pending = null\n    this.visited = null\n    this.reduxStore = new ReduxStore()\n  }\n\n  recalculate(location) {\n    this.setPendingNodes()\n    this.dfs(location)\n    this.updateStore()\n  }\n\n  setPendingNodes() {\n    this.pending = new Set()\n\n    Object.keys(this.adj).forEach(vertex => {\n      this.pending.add(vertex)\n    })\n  }\n\n  dfs(location) {\n    while (this.pending.size > 0) {\n      if (!location) {\n        location = [...this.pending][0]\n      }\n\n      try {\n        this.visited = new Set([location])\n        const interpreter = new Interpreter(location)\n        interpreter.visitAST(location)\n      } catch (error) {}\n\n      this.visited.forEach(location => this.pending.delete(location))\n      location = null\n    }\n\n    this.visited = null\n    this.pending = null\n  }\n\n  visitCell(location) {\n    if (!this.hasVertex(location)) {\n      return\n    }\n\n    this.testPathCycle(location)\n    this.pending.delete(location)\n    this.visited.add(location)\n    const interpreter = new Interpreter(location)\n    const result = interpreter.visitAST(location)\n    this.visited.delete(location)\n    return result\n  }\n\n  getCellResult(location) {\n    if (location in this.adj) {\n      return graph.adj[location].result\n    } else {\n      return ''\n    }\n  }\n\n  testPathCycle(location) {\n    if (this.visited.has(location)) {\n      throw new Error('Circular reference')\n    }\n  }\n\n  updateStore() {\n    const locationKeys = new Set(this.reduxStore.locations)\n\n    for (let [location, vertex] of Object.entries(this.adj)) {\n      const { entered, result } = vertex\n      const currResult = this.reduxStore.getCellResult(location)\n\n      locationKeys.delete(location)\n\n      if (result !== currResult) {\n        this.reduxStore.setCellData(location, entered, result)\n      }\n    }\n\n    for (let location of locationKeys) {\n      this.reduxStore.clearCellData(location)\n    }\n  }\n\n  addVertex(location, entered, willRecalculate=true) {\n    const vertex = new Vertex(entered)\n    const interpreter = new Interpreter(location)\n    const oldVertex = this.hasVertex(location) && this.getVertex(location)\n\n    if (oldVertex && oldVertex.entered === entered) {\n      return\n    }\n\n    try {\n      this.adj[location] = vertex\n      vertex.ast = interpreter.getAST(entered)\n    } catch (error) {\n      vertex.error = vertex.result = error.message\n    }\n\n    willRecalculate && this.recalculate(location)\n    return vertex\n  }\n\n  hasVertex(location) {\n    return location in this.adj\n  }\n\n  getVertex(location) {\n    this.testMissingLocation(location)\n    return this.adj[location]\n  }\n\n  delVertex(location) {\n    if (location in this.adj) {\n      delete this.adj[location]\n      this.recalculate()\n    }\n  }\n\n  resetAll() {\n    this.adj = {}\n    this.pending = null\n    this.visited = null\n    this.reduxStore = new ReduxStore()\n  }\n\n  testMissingLocation(location) {\n    if (!this.hasVertex(location)) {\n      throw new Error('Missing location')\n    }\n  }\n}\n\nconst graph = new Graph()\n\n\nexport default graph\nexport {\n  Vertex,\n  Graph,\n}\n","import ReduxConnector from '~/library/ReduxConnector'\nimport { setCellData, clearCellData } from '~/actions/tableDataActions'\nimport { setActiveCell } from '~/actions/globalActions'\n\n\nconst reduxConnect = new ReduxConnector()\n\nreduxConnect.registerFunctions({\n  clearCellData,\n  setActiveCell,\n  setCellData,\n})\n\nexport default reduxConnect\n","import reduxConnect from '../reduxConnect'\n\n\nclass ReduxActions {\n  static reduxConnect = reduxConnect\n\n  get reduxConnect() {\n    return ReduxActions.reduxConnect\n  }\n\n  getCellData(location) {\n    return this.reduxConnect.getState().tableData[location]\n  }\n}\n\nexport default ReduxActions\n","import ReduxActions from './ReduxActions'\n\n\nclass AddFormula extends ReduxActions {\n  constructor(location, oldVertex, newVertex) {\n    super()\n    this.location = location\n    this.entered = newVertex.entered\n    this.result = newVertex.result\n    this.previous = oldVertex && {\n      entered: oldVertex.entered,\n      result: oldVertex.result,\n    }\n  }\n\n  execute() {\n    this.reduxConnect.fn.setCellData(this.location, this.entered, this.result)\n    this.reduxConnect.fn.setActiveCell(this.location)\n  }\n\n  unexecute() {\n    if (this.previous) {\n      const { entered, result } = this.previous\n      this.reduxConnect.fn.setCellData(this.location, entered, result)\n    } else {\n      this.reduxConnect.fn.clearCellData(this.location)\n    }\n\n    this.reduxConnect.fn.setActiveCell(this.location)\n  }\n}\n\nexport default AddFormula\n","import ReduxActions from './ReduxActions'\n\n\nclass ClearFormula extends ReduxActions {\n  constructor(location) {\n    super()\n    this.previous = this.getCellData(location)\n    this.location = location\n  }\n\n  execute() {\n    this.reduxConnect.fn.clearCellData(this.location)\n    this.reduxConnect.fn.setActiveCell(this.location)\n  }\n\n  unexecute() {\n    if (!this.previous) { return }\n    const { entered, result } = this.previous\n    this.reduxConnect.fn.setCellData(this.location, entered, result)\n    this.reduxConnect.fn.setActiveCell(this.location)\n  }\n}\n\nexport default ClearFormula","class Command {\n  undo() {\n    throw new Error('abstract method not implemented')\n  }\n\n  redo() {\n    throw new Error('abstract method not implemented')\n  }\n}\n\nexport default Command\n","import Command from './Command'\n\n\nclass AddFormulaCommand extends Command {\n  constructor(addFormula) {\n    super()\n    this.addFormula = addFormula\n  }\n\n  undo() {\n    this.addFormula.unexecute()\n  }\n\n  redo() {\n    this.addFormula.execute()\n  }\n}\n\nexport default AddFormulaCommand\n","import Command from './Command'\n\n\nclass ClearFormulaCommand extends Command {\n  constructor(clearFormula) {\n    super()\n    this.clearFormula = clearFormula\n  }\n\n  undo() {\n    this.clearFormula.unexecute()\n  }\n\n  redo() {\n    this.clearFormula.execute()\n  }\n}\n\nexport default ClearFormulaCommand\n","import graph from '~/formulas/graph'\nimport reduxConnect from './reduxConnect'\nimport { debounce } from '~/library/utils'\nimport AddFormula from './actions/AddFormula'\nimport ClearFormula from './actions/ClearFormula'\nimport AddFormulaCommand from './commands/AddFormulaCommand'\nimport ClearFormulaCommand from './commands/ClearFormulaCommand'\n\n\nclass TableHistory {\n  constructor(graph, rc=reduxConnect) {\n    this.reduxConnect = rc\n    this.graph = graph\n    this._undo = []\n    this._redo = []\n    this.maxUndo = 30\n  }\n\n  push(type, ...args) {\n    const command = this.getEvent(type, ...args)\n    this.truncateHistory()\n    this._undo.push(command)\n  }\n\n  getEvent(type, ...args) {\n    switch (type) { // eslint-disable-line\n      case 'add':\n        const addFormula = new AddFormula(...args)\n        return new AddFormulaCommand(addFormula)\n      case 'clear':\n        const clearFormula = new ClearFormula(...args)\n        return new ClearFormulaCommand(clearFormula)\n    }\n  }\n\n  undo() {\n    if (this._undo.length > 0) {\n      const command = this._undo.pop()\n      this._redo.push(command)\n      command.undo()\n    }\n\n    this.recalcGraph()\n  }\n\n  redo() {\n    if (this._redo.length > 0) {\n      const command = this._redo.pop()\n      this._undo.push(command)\n      command.redo()\n    }\n\n    this.recalcGraph()\n  }\n\n  recalcGraph = debounce(() => {\n    const table = this.reduxConnect.getState().tableData\n\n    graph.resetAll()\n\n    Object.entries(table).forEach(([location, data]) => {\n      const { entered } = data\n      graph.addVertex(location, entered, false)\n    })\n\n    graph.recalculate()\n  }, 300, false)\n\n  truncateHistory() {\n    if (this._undo.length === this.maxUndo) {\n      this._undo.shift()\n    }\n\n    if (this._redo.length > 0) {\n      this._redo.length = 0\n    }\n  }\n}\n\nconst history = new TableHistory(graph)\n\nexport default history\nexport { TableHistory }\n","import Lexer, { TOKENS as t } from '~/formulas/Lexer'\nimport graph from '~/formulas/graph'\nimport history from '../Table/TableHistory/TableHistory'\n\n\nclass CellValueSetter {\n  constructor(props) {\n    this.props = props\n  }\n\n  run() {\n    const { location } = this.props\n    const inputValue = this.props.valueEvent.value\n    let cellValue\n\n    if (this.isWhitespace(inputValue)) {\n      if (this.props.entered.length > 0) {\n        history.push('clear', location)\n        graph.delVertex(location)\n      }\n\n      return\n    }\n\n    if (this.isFormula(inputValue)) {\n      cellValue = this.sanitizeValue(inputValue)\n    } else {\n      cellValue = inputValue\n    }\n\n    const oldVertex = graph.adj[location]\n    const newVertex = graph.addVertex(location, cellValue)\n    history.push('add', location, oldVertex, newVertex)\n  }\n\n  isFormula(text) {\n    return text.length > 0 && text[0] === '='\n  }\n\n  isWhitespace(text) {\n    return text.length === 0 || Boolean(text.match(/^\\s+$/))\n  }\n\n  sanitizeValue(value) {\n    const lexer = new Lexer(value)\n    const tokens = lexer.getTokens()\n\n    return tokens\n      .map(token => {\n        const value = this.getTokenValue(token)\n        const whitespace = token.whitespace >= 1 ? ' ' : ''\n        return whitespace + value\n      })\n      .join('')\n  }\n\n  getTokenValue(token) {\n    switch (token.type) {\n      case t.FUNCTION:\n        return token.text.toUpperCase()\n      case t.NUMBER:\n        return token.value\n      default:\n        return token.text\n    }\n  }\n}\n\nexport default CellValueSetter\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { connect } from 'react-redux'\n\nimport { setCellData } from '~/actions/tableDataActions'\nimport CellValueSetter from './CellValueSetter'\n\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n`\n\nfunction Wrapper(props) {\n\n  const cellValueSetter = new CellValueSetter(props)\n  const refRoot = React.createRef()\n\n  function setNewCellValue(event) {\n    if (refRoot.current.contains(event.targetElement)) { return }\n    if (props.keyEvent.key === 'Escape') { return }\n    cellValueSetter.run()\n  }\n\n  function handleOnBlur(event) {\n    setNewCellValue(event)\n    props.onCommit()\n  }\n\n  return (\n    <Root\n      ref={refRoot}\n      onBlur={handleOnBlur}\n    >\n      {props.children}\n    </Root>\n  )\n}\n\nWrapper.propTypes = {\n  children: PropTypes.any,\n  entered: PropTypes.string.isRequired,\n  keyEvent: PropTypes.object.isRequired,\n  location: PropTypes.string.isRequired,\n  onCommit: PropTypes.func,\n  setCellData: PropTypes.func.isRequired,\n  valueEvent: PropTypes.object.isRequired,\n}\n\nfunction mapStateToProps(state) {\n  const {\n    global: {\n      inputter: {\n        valueEvent,\n      },\n    }\n  } = state\n\n  return {\n    valueEvent,\n  }\n}\n\nconst mapDispatchToProps = {\n  setCellData,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Wrapper)\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { jsx, css } from '@emotion/core' // eslint-disable-line\n\n\nexport const Input = styled.input`\n  height: 100%;\n  outline: none;\n  width: 100%;\n  z-index: 100;\n`\n\nfunction InputTag({ fwdRef, value, style, props, onChange, onKeyDown }) {\n  return (\n    <Input\n      ref={fwdRef}\n      css={style}\n      value={value}\n      onChange={onChange}\n      onKeyDown={onKeyDown}\n      {...props}\n    />\n  )\n}\n\nInputTag.propTypes = {\n  fwdRef: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func.isRequired,\n  props: PropTypes.object,\n  style: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.func,\n  ]),\n  value: PropTypes.string.isRequired,\n}\n\nInputTag.defaultProps = {\n  style: {},\n  props: {},\n}\n\nexport default InputTag\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { jsx, css } from '@emotion/core'\n\nimport formulaFuncs from '~/formulas/formulaFunctions'\nimport { InputContext } from './InputContext'\n\n\nconst Root = styled.div`\n  background: ${props => props.theme.colors.dropdown.normal};\n  margin-top: 1px;\n  box-shadow: 0 0 5px ${props => props.theme.colors.shadow};\n  border: 1px solid ${props => props.theme.colors.dropdown.active};\n  width: 300px;\n  padding: 6px 8px;\n  position: fixed;\n`\n\nconst Pre = styled.pre`\n  line-height: 1em;\n  padding-bottom: 3px;\n  font-size: 14px;\n`\n\nconst Subtitle = styled.div`\n  padding-top: 12px;\n  font-size: 12px;\n`\n\nconst P = styled.p`\n  line-height: 1em;\n  font-size: 13px;\n`\n\nconst Hr = styled.hr`\n  border: 0;\n  border-top: 1px solid ${props => props.theme.colors.dropdown.active};\n`\n\nclass FuncDescription extends React.PureComponent {\n\n  static contextType = InputContext\n\n  static propTypes = {\n    cursorPos: PropTypes.number,\n    fnScopes: PropTypes.array,\n  }\n\n  getFnScope() {\n    const { fnScopes, cursorPos } = this.props\n    let currScope\n\n    for (let scope of fnScopes) {\n      if (cursorPos >= scope.startIndex + 1) {\n        currScope = scope\n      } else {\n        break\n      }\n    }\n\n    if (currScope && currScope.endIndex === null) { return currScope}\n    if (currScope && cursorPos <= currScope.endIndex) { return currScope }\n    return null\n  }\n\n  getFnNode(scope) {\n    const key = scope.fnName.toUpperCase()\n    return formulaFuncs[key]\n  }\n\n  render() {\n    const scope = this.getFnScope()\n    const { inputRect } = this.context\n    let fnNode\n\n    if (!scope) { return null }\n    fnNode = this.getFnNode(scope)\n\n    return (\n      <Root\n        css={css`\n          top: ${inputRect.bottom}px;\n          left: ${inputRect.left}px;\n        `}\n      >\n        <Pre\n          css={css`\n            padding-bottom: 6px;\n          `}\n        >\n          {fnNode.definition}\n        </Pre>\n        <Hr />\n        <Subtitle>Example</Subtitle>\n        <Pre>{fnNode.example}</Pre>\n        <Subtitle>Summary</Subtitle>\n        <P>{fnNode.summary}</P>\n      </Root>\n    )\n  }\n}\n\nFuncDescription.propTypes = {\n  cursorPos: PropTypes.number,\n  fnScopes: PropTypes.array,\n}\n\nexport default FuncDescription\n\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { jsx, css } from '@emotion/core' // eslint-disable-line\nimport styled from '@emotion/styled'\n\n\nconst NoOp = () => {}\n\nconst Li = styled.li`\n  outline: none;\n`\n\nfunction DropdownItem({ item, index, isActive, onMouseEnter }) {\n  return (\n    <Li\n      tabIndex={0}\n      onMouseEnter={() => onMouseEnter(index)}\n    >\n      {isActive && item.active ? item.active : item.base}\n    </Li>\n  )\n}\n\nDropdownItem.propTypes = {\n  item: PropTypes.shape({\n    base: PropTypes.node.isRequired,\n    active: PropTypes.node,\n  }),\n  index: PropTypes.number.isRequired,\n  isActive: PropTypes.bool.isRequired,\n  onMouseEnter: PropTypes.func,\n}\n\nDropdownItem.defaultProps = {\n  onMouseEnter: NoOp,\n}\n\nexport default DropdownItem\n","\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\n\nimport InteractiveListItem from './InteractiveListItem'\n\n\nconst Ul = styled.ul`\n  margin: 0;\n  padding: 0;\n  list-style: none;\n`\n\nclass InteractiveList extends React.PureComponent {\n\n  static propsTypes = {\n    onMouseEnter: PropTypes.func,\n    items: PropTypes.array.isRequired,\n    styles: PropTypes.shape({\n      ul: PropTypes.object,\n      li: PropTypes.object,\n    }),\n  }\n\n  renderListItems() {\n    return this.props.items\n      .map((item, index) => (\n        <InteractiveListItem\n          key={index}\n          index={index}\n          item={item.item}\n          style={{...this.props.styles.li}}\n          isActive={item.isActive}\n          onMouseEnter={this.props.onMouseEnter}\n        />\n      ))\n  }\n\n  render() {\n    const { items, styles } = this.props\n\n    if (items.length === 0) { return null }\n\n    return (\n      <Ul\n        tabIndex={-1}\n        style={styles.ul}\n      >\n        {this.renderListItems()}\n      </Ul>\n    )\n  }\n}\n\nexport default InteractiveList\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { jsx, css } from '@emotion/core'\n\nimport formulaFuncs from '~/formulas/formulaFunctions'\nimport InteractiveList from '~/library/InteractiveList'\nimport Token from '~/formulas/Token'\nimport { InputContext } from './InputContext'\nimport { withTheme } from 'emotion-theming'\n\n\nconst Root = styled.div`\n  border: 0;\n  position: fixed;\n`\n\nconst baseItemStyle = css`\n  padding: 6px 8px;\n`\n\nconst ItemBaseRoot = styled.div`\n  ${baseItemStyle}\n  background: ${props => props.theme.colors.dropdown.normal};\n`\n\nconst ItemActiveRoot = styled.div`\n  ${baseItemStyle}\n  background: ${props => props.theme.colors.dropdown.active};\n`\n\nconst Pre = styled.pre`\n  line-height: 1em;\n  padding-bottom: 3px;\n  font-size: 14px;\n`\n\nconst Subtitle = styled.div`\n  font-size: 12px;\n`\n\nclass FuncSelector extends React.Component {\n\n  static contextType = InputContext\n\n  static propTypes = {\n    token: PropTypes.instanceOf(Token),\n    colors: PropTypes.object,\n    theme: PropTypes.object,\n  }\n\n  state = {\n    listItems: [],\n    itemIndex: 0,\n    keyEvent: null,\n    isVisible: false,\n  }\n\n  constructor() {\n    super()\n    this.handleOnClick = this.handleOnClick.bind(this)\n    this.setIndex = this.setIndex.bind(this)\n  }\n\n  componentDidMount() {\n    this.setState({ itemIndex: 0 }, () => {\n      this.setListItems()\n    })\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.state.listItems !== nextState.listItems\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.updateContextData(prevState)\n    this.updateListItems(prevProps)\n    this.keyActions()\n  }\n\n  componentWillUnmount() {\n    this.context.setIsFuncSelectorVisible(false)\n  }\n\n  updateListItems(prevProps) {\n    if (prevProps.token === this.props.token) { return }\n\n    this.setState({ itemIndex: 0 }, () => {\n      this.setListItems()\n    })\n  }\n\n  updateContextData(prevState) {\n    const { keyEvent } = this.context\n\n    if (prevState.keyEvent !== keyEvent) {\n      this.setState({ keyEvent })\n      this.keyEventSetIndex(keyEvent)\n    }\n  }\n\n  keyActions() {\n    const { keyEvent } = this.context\n    if (this.state.keyEvent === keyEvent) { return }\n    if (['Enter', 'Tab'].includes(keyEvent.key) && this.state.isVisible) {\n      this.setInputterValueEvent()\n    }\n  }\n\n  setInputterValueEvent() {\n    const currInputValue = this.context.valueEvent.value\n    const { token } = this.props\n    const { fnName } = this.state.listItems[this.state.itemIndex]\n    const rightChunkIndex = token.index + token.text.length\n    const leftChunk = currInputValue.slice(0, token.index)\n    const rightChunk = currInputValue.slice(rightChunkIndex)\n    const value = `${leftChunk}${fnName}()${rightChunk}`\n    const cursorPos = leftChunk.length + fnName.length + 1\n    this.context.setInputterValueEvent(value, cursorPos)\n  }\n\n  setListItems() {\n    const { token } = this.props\n    const text = token.text.toUpperCase()\n    const listItems = Object\n      .keys(formulaFuncs)\n      .filter(fnName => fnName.startsWith(text))\n      .sort()\n      .map(fnName => ({\n        item: {\n          base: this.itemBase(fnName),\n          active: this.itemActive(fnName),\n        },\n        isActive: false,\n        fnName,\n      }))\n    let isVisible = false\n    let itemIndex\n\n    itemIndex = Math.max(Math.min(listItems.length - 1, this.state.itemIndex), 0)\n\n    if (listItems.length > 0) {\n      listItems[itemIndex].isActive = isVisible = true\n    }\n\n    this.context.setIsFuncSelectorVisible(isVisible)\n    this.setState({ listItems, itemIndex, isVisible })\n  }\n\n  keyEventSetIndex(keyEvent) {\n    let itemIndex = this.state.itemIndex\n\n    switch (keyEvent.key) { // eslint-disable-line default-case\n      case 'ArrowUp':\n          itemIndex = this.state.itemIndex - 1\n        break\n      case 'ArrowDown':\n          itemIndex = this.state.itemIndex + 1\n        break\n    }\n\n    this.setState({ itemIndex }, () => {\n      this.setListItems()\n    })\n  }\n\n  setIndex(itemIndex) {\n    this.setState({ itemIndex }, () => {\n      this.setListItems()\n    })\n  }\n\n  itemBase(fnName) {\n    return (\n      <ItemBaseRoot>\n        <Pre>\n          {fnName}\n        </Pre>\n      </ItemBaseRoot>\n    )\n  }\n\n  itemActive(fnName) {\n    return (\n      <ItemActiveRoot>\n        <Pre>\n          {fnName}\n        </Pre>\n        <Subtitle>\n          {formulaFuncs[fnName].summary}\n        </Subtitle>\n      </ItemActiveRoot>\n    )\n  }\n\n  getListStyles() {\n    const { theme } = this.props\n\n    return {\n      ul: {\n        marginTop: 1,\n        boxShadow: `0 0 5px ${theme.colors.shadow}`,\n        border: `1px solid ${theme.colors.dropdown.active}`,\n        width: 300,\n      }\n    }\n  }\n\n  handleOnClick(event) {\n    event.nativeEvent.stopPropagation()\n    this.setInputterValueEvent()\n  }\n\n  render() {\n    const { listItems, isVisible } = this.state\n    const { inputRect } = this.context\n\n    return (\n      <Root\n        css={css`\n          top: ${inputRect.bottom}px;\n          left: ${inputRect.left}px;\n        `}\n        open={isVisible}\n        onClick={this.handleOnClick}\n      >\n        <InteractiveList\n          items={listItems}\n          styles={this.getListStyles()}\n          onMouseEnter={this.setIndex}\n        />\n      </Root>\n    )\n  }\n}\n\nexport default withTheme(FuncSelector)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { TOKENS as t } from '~/formulas/Lexer'\nimport FuncDescription from './FuncDescription'\nimport FuncSelector from './FuncSelector'\n\n\nclass Suggestions extends React.PureComponent {\n\n  static propTypes = {\n    tokens: PropTypes.array.isRequired,\n    cursorPos: PropTypes.number,\n  }\n\n  state = {\n    fnScopes: [],\n  }\n\n  componentDidMount() {\n    this.setFnScopes()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.tokens !== this.props.tokens) {\n      this.setFnScopes()\n    }\n  }\n\n  setFnScopes() {\n    const stack = []\n    const fnScopes = []\n\n    for (let token of this.props.tokens) {\n      if (token.type === t.FUNCTION) {\n        const scope = { fnName: token.text, startIndex: token.index, endIndex: null }\n        stack.push(scope)\n        fnScopes.push(scope)\n      } else if (token.type === t.LPAREN) {\n        stack.push('(')\n      } else if (token.type === t.RPAREN) {\n        stack.pop()\n        if (stack.length > 0 && stack[stack.length - 1] !== '(') {\n          const scope = stack.pop()\n          scope.endIndex = token.index\n        }\n      }\n    }\n\n    fnScopes.sort((a, b) => a.startIndex - b.startIndex)\n    this.setState({ fnScopes })\n  }\n\n  getCurrTokenIndex(tokens, cursorPos) {\n    let index\n\n    for (index = 0; index < tokens.length; index++) {\n      const token = tokens[index]\n      const endIndex = token.index + token.text.length\n\n      if (cursorPos > token.index && cursorPos <= endIndex) {\n        break\n      }\n    }\n\n    return index\n  }\n\n  getCompareTokens() {\n    const { tokens, cursorPos } = this.props\n    const index = this.getCurrTokenIndex(tokens, cursorPos)\n    const tokenBefore = index > 0 && tokens[index - 1]\n    const tokenCurr = tokens[index]\n    const tokenAfter = index < tokens.length - 2 && tokens[index + 1]\n    return [ tokenBefore, tokenCurr, tokenAfter ]\n  }\n\n  canSelectFunc(tokenBefore, tokenCurr, tokenAfter) {\n    // =func or =5+func\n    if (\n      tokenBefore\n      && tokenCurr\n      && !tokenAfter\n      && (tokenBefore.type === t.EQUALS || tokenBefore.category === 'operator')\n      && [t.UNKNOWN, t.FUNCTION].includes(tokenCurr.type)\n    ) { return true }\n\n    // =SUM(func or =SUM(func1, func2\n    if (\n      tokenBefore\n      && tokenCurr\n      && !tokenAfter\n      && [t.LPAREN, t.COMMA].includes(tokenBefore.type)\n      && [t.UNKNOWN, t.FUNCTION].includes(tokenCurr.type)\n    ) { return true }\n\n    // =5+func+7 or =func+5\n    if (\n      tokenBefore\n      && tokenCurr\n      && tokenAfter\n      && (tokenBefore.type === t.EQUALS || tokenBefore.category === 'operator')\n      && [t.UNKNOWN, t.FUNCTION].includes(tokenCurr.type)\n      && tokenAfter.category === 'operator'\n    ) { return true }\n\n    // =SUM(func1, func2)\n    if (\n      tokenBefore\n      && tokenCurr\n      && tokenAfter\n      && [t.LPAREN, t.COMMA].includes(tokenBefore.type)\n      && [t.UNKNOWN, t.FUNCTION].includes(tokenCurr.type)\n      && [t.RPAREN, t.COMMA].includes(tokenAfter.type)\n    ) { return true }\n\n    return false\n  }\n\n  getFuncSelector() {\n    const [ tokenBefore, tokenCurr, tokenAfter ] = this.getCompareTokens()\n\n    if (this.props.tokens.length < 2) { return null }\n\n    if (this.canSelectFunc(tokenBefore, tokenCurr, tokenAfter)) {\n      return {\n        token: tokenCurr\n      }\n    }\n  }\n\n  render() {\n    if (this.props.cursorPos === undefined) { return null }\n\n    const funcSelectorProps = this.getFuncSelector()\n\n    if (funcSelectorProps) {\n      return <FuncSelector {...funcSelectorProps} />\n    } else {\n      return (\n        <FuncDescription\n          cursorPos={this.props.cursorPos}\n          fnScopes={this.state.fnScopes}\n        />\n      )\n    }\n  }\n}\n\nexport default Suggestions\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\n\nimport { setInputterValueEvent, resetInputterValueEvent } from '~/actions/globalActions'\nimport { InputContext } from './InputContext'\nimport Lexer from '~/formulas/Lexer'\nimport KeyboardActions from './KeyboardActions'\nimport KeyboardFocuser from './KeyboardFocuser'\nimport InputterHistory from './InputterHistory'\nimport Wrapper from './Wrapper'\nimport InputTag from './InputTag'\nimport Suggestions from './Suggestions'\n\n\nconst NoOp = () => {}\n\nexport class Inputter extends React.PureComponent {\n\n  static propTypes = {\n    // props\n    isInteractive: PropTypes.bool,\n    // redux\n    columns: PropTypes.number.isRequired,\n    entered: PropTypes.string.isRequired,\n    inputTagProps: PropTypes.object,\n    location: PropTypes.string.isRequired,\n    resetInputterValueEvent: PropTypes.func.isRequired,\n    rows: PropTypes.number.isRequired,\n    setInputterValueEvent: PropTypes.func.isRequired,\n    valueEvent: PropTypes.object.isRequired,\n    // lifecycle functions\n    onCommit: PropTypes.func,\n    onEscape: PropTypes.func,\n    onMount: PropTypes.func,\n  }\n\n  static defaultProps = {\n    inputTagProps: {},\n    isInteractive: false,\n    onCommit: NoOp,\n    onEscape: NoOp,\n    onMount: NoOp,\n  }\n\n  constructor(props) {\n    super(props)\n    this.handleOnChange = this.handleOnChange.bind(this)\n    this.handleOnKeyDown = this.handleOnKeyDown.bind(this)\n    this.keyboardActions = new KeyboardActions(this)\n    this.keyboardFocuser = new KeyboardFocuser(this)\n    this.setInputWidth = this.setInputWidth.bind(this)\n    this.setIsFuncSelectorVisible = this.setIsFuncSelectorVisible.bind(this)\n  }\n\n  state = {\n    tokens: [],\n    isFuncSelectorVisible: false,\n    keyEvent: { key: '' },\n    width: null,\n  }\n\n  refInput = React.createRef()\n  history = new InputterHistory(this, 20, 150)\n\n  componentDidMount() {\n    this.props.onMount(this.props, this.state, this.refInput.current)\n    this.history.reset()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.location !== this.props.location) {\n      this.history.reset()\n    }\n\n    if (prevProps.valueEvent !== this.props.valueEvent) {\n      this.focusInputTag()\n      this.tokenizeInputValue()\n      this.history.push(this.props.valueEvent)\n    }\n    \n    if (prevState.keyEvent !== this.state.keyEvent) {\n      this.history.keyAction()\n      this.keyboardActions.run()\n      this.keyboardFocuser.run()\n    }\n  }\n\n  setInputWidth(width) {\n    if (this.state.width !== width) {\n      this.setState({ width })\n    }\n  }\n\n  tokenizeInputValue() {\n    const { value } = this.props.valueEvent\n    const lexer = new Lexer(value)\n    const tokens = lexer.getTokens()\n    this.setState({ tokens })\n  }\n\n  setIsFuncSelectorVisible(isFuncSelectorVisible) {\n    this.setState({ isFuncSelectorVisible })\n  }\n\n  focusInputTag() {\n    if (!this.props.isInteractive) { return }\n\n    const inputEl = this.refInput.current\n    const { cursorPos } = this.props.valueEvent\n\n    inputEl.focus()\n\n    if (inputEl.selectionEnd !== cursorPos) {\n      inputEl.selectionStart = cursorPos\n      inputEl.selectionEnd = cursorPos\n    }\n  }\n\n  setValueEvent(event) {\n    const { target: { value, selectionStart } } = event\n    this.props.setInputterValueEvent(value, selectionStart)\n  }\n\n  setKeyEvent(event) {\n    const { key, altKey, ctrlKey, shiftKey, metaKey } = event\n\n    // important so the correct cursor position is captured\n    setTimeout(() => {\n      const input = this.refInput.current\n      const cursorPos = input.selectionStart\n      const keyEvent = { key, altKey, ctrlKey, shiftKey, metaKey, cursorPos }\n\n      this.setState({ keyEvent })\n    }, 0)\n  }\n\n  keyDownEventBehavior(event) {\n    const { key, metaKey, ctrlKey } = event\n\n    if (['Tab', 'Enter'].includes(key)) {\n      event.preventDefault()\n    } else if (key === 'z' && (metaKey || ctrlKey)) {\n      event.preventDefault()\n    }\n  }\n\n  handleOnChange(event) {\n    this.setValueEvent(event)\n  }\n\n  handleOnKeyDown(event) {\n    this.keyDownEventBehavior(event)\n    this.setKeyEvent(event)\n  }\n\n  renderSuggestions() {\n    if (!this.props.isInteractive) { return null }\n\n    return (\n      <Suggestions\n        tokens={this.state.tokens}\n        cursorPos={this.state.keyEvent.cursorPos}\n      />\n    )\n  }\n\n  render() {\n    const inputEl = this.refInput.current\n    const inputRect = inputEl && inputEl.getBoundingClientRect()\n\n    return (\n      <InputContext.Provider\n        value={{\n          inputRect,\n          setIsFuncSelectorVisible: this.setIsFuncSelectorVisible,\n          keyEvent: this.state.keyEvent,\n          valueEvent: this.props.valueEvent,\n          setInputterValueEvent: this.props.setInputterValueEvent\n        }}\n      >\n        <Wrapper\n          entered={this.props.entered}\n          keyEvent={this.state.keyEvent}\n          location={this.props.location}\n          onCommit={this.props.onCommit}\n        >\n          <InputTag\n            fwdRef={this.refInput}\n            props={this.props.inputTagProps.props}\n            style={this.props.inputTagProps.style}\n            value={this.props.valueEvent.value}\n            onChange={this.handleOnChange}\n            onKeyDown={this.handleOnKeyDown}\n          />\n          {this.renderSuggestions()}\n        </Wrapper>\n      </InputContext.Provider>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  const {\n    global: {\n      activeCell: {\n        entered,\n        location,\n      },\n      inputter: {\n        valueEvent,\n      },\n      rows,\n      columns,\n    }\n  } = state\n\n  return {\n    columns,\n    entered,\n    location,\n    rows,\n    valueEvent,\n  }\n}\n\nconst mapDispatchToProps = {\n  resetInputterValueEvent,\n  setInputterValueEvent,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Inputter)\n","export const DEFAULT_COL_WIDTH = 140\nexport const MIN_COL_WIDTH = 12\nexport const MAX_COL_WIDTH = 800\nexport const DEFAULT_ROW_HEIGHT = 28\nexport const MIN_ROW_HEIGHT = 12\nexport const MAX_ROW_HEIGHT = 600\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { jsx, css } from '@emotion/core'\nimport { connect } from 'react-redux'\n\nimport { setRowHeight } from '~/actions/tableMetaActions'\nimport { DEFAULT_ROW_HEIGHT, MIN_ROW_HEIGHT, MAX_ROW_HEIGHT } from '~/library/constants'\nimport { debounce, clamp } from '~/library/utils'\n\n\nexport const ROW_HEADER_WIDTH = 50\n\nconst Root = styled.div`\n  position: sticky;\n  left: 0;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-right: 1px solid ${props => props.theme.colors.table.borderDark};\n  border-bottom: 1px solid ${props => props.theme.colors.table.borderDark};\n  background: ${props => props.theme.colors.table.labelBkg};\n`\n\nconst BtnHeight = styled.button`\n  background: transparent;\n  cursor: row-resize;\n  outline: none;\n  position: absolute;\n  width: 100%;\n  height: 6px;\n  margin: 0 0 -3px 0;\n  border: 0;\n  padding: 0;\n  left: 0;\n  bottom: 0;\n  z-index: 1;\n\n  :hover {\n    background: ${props => props.theme.colors.primary.light};\n  }\n`\n\nclass RowHeader extends React.PureComponent {\n\n  static propTypes = {\n    label: PropTypes.number.isRequired,\n    setRowHeight: PropTypes.func.isRequired,\n    height: PropTypes.number,\n  }\n\n  constructor() {\n    super()\n    this.handleBtnHeightOnMouseDown = this.handleBtnHeightOnMouseDown.bind(this)\n    this.handleDocumentMouseMove = this.handleDocumentMouseMove.bind(this)\n    this.handleDocumentMouseUp = this.handleDocumentMouseUp.bind(this)\n    this.debSetRowHeight = this.debSetRowHeight.bind(this)\n  }\n\n  state = {\n    pageY: 0,\n    height: 0,\n    btnBottom: 0,\n    isResizing: false,\n  }\n\n  refRoot = React.createRef()\n\n  getRootStyle() {\n    const { height } = this.props\n    const style = {\n      width: ROW_HEADER_WIDTH\n    }\n\n    if (height) {\n      style.height = height\n    } else {\n      style.minHeight = DEFAULT_ROW_HEIGHT\n      style.height = 'auto'\n    }\n\n    return style\n  }\n\n  getBtnHeightStyle() {\n    if (!this.state.isResizing) { return }\n\n    const newBottom = this.state.btnBottom\n    const minBottom = MIN_ROW_HEIGHT - this.state.height\n    const maxBottom = MAX_ROW_HEIGHT - this.state.height\n    const bottom = -(clamp(newBottom, minBottom, maxBottom) - 4)\n\n    return (theme) => css`\n      height: 1.5px;\n      width: 95vw;\n      bottom: ${bottom}px;\n      background: ${theme.colors.primary.light};\n    `\n  }\n\n  debSetRowHeight = debounce((event) => {\n    const delta = event.pageY - this.state.pageY\n    this.setState({ btnBottom: delta, })\n  }, 40)\n\n  handleDocumentMouseMove(event) {\n    this.debSetRowHeight(event)\n  }\n\n  handleDocumentMouseUp(event) {\n    const delta = event.pageY - this.state.pageY\n    const height = this.state.height + delta\n\n    this.props.setRowHeight(this.props.label, height)\n    this.setState({ btnBottom: 0, isResizing: false })\n    document.removeEventListener('mousemove', this.handleDocumentMouseMove)\n    document.removeEventListener('mouseup', this.handleDocumentMouseUp)\n  }\n\n  handleBtnHeightOnMouseDown(event) {\n    event.preventDefault()\n\n    this.setState({\n      pageY: event.pageY,\n      height: this.props.height || this.refRoot.current.getBoundingClientRect().height,\n      isResizing: true,\n    })\n\n    document.addEventListener('mousemove', this.handleDocumentMouseMove)\n    document.addEventListener('mouseup', this.handleDocumentMouseUp)\n  }\n\n  render() {\n    const { label } = this.props\n\n    return (\n      <Root\n        ref={this.refRoot}\n        data-row={label}\n        className='row-header-width'\n        css={this.getRootStyle()}\n      >\n        {label}\n        <BtnHeight\n          css={this.getBtnHeightStyle()}\n          tabIndex='-1'\n          onMouseDown={this.handleBtnHeightOnMouseDown}\n          onMouseMove={this.handleBtnHeightOnMouseMove}\n          onMouseUp={this.handleBtnHeightOnMouseUp}\n        />\n      </Root>\n    )\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const height = state.tableMeta.rowHeights[ownProps.label]\n  return { height }\n}\n\nconst mapDispatchToProps = { setRowHeight }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RowHeader)\n","import { clamp } from '~/library/utils'\nimport {\n  MIN_COL_WIDTH,\n  MAX_COL_WIDTH,\n  MIN_ROW_HEIGHT,\n  MAX_ROW_HEIGHT,\n} from '~/library/constants'\n\n\nexport function setColWidth(colLabel, width) {\n  if (typeof width !== 'number') {\n    throw new Error('width is not a number')\n  }\n\n  return {\n    type: 'SET_COL_WIDTH',\n    payload: { colLabel, width: clamp(width, MIN_COL_WIDTH, MAX_COL_WIDTH) }\n  }\n}\n\nexport function setRowHeight(rowLabel, height) {\n  if (typeof height !== 'number') {\n    throw new Error('height is not a number')\n  }\n\n  return {\n    type: 'SET_ROW_HEIGHT',\n    payload: { rowLabel, height: clamp(height, MIN_ROW_HEIGHT, MAX_ROW_HEIGHT) }\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { connect } from 'react-redux'\n\nimport { scheduleFloatingInputter, closeFloatingInputter } from '~/actions/globalActions'\nimport inputTagProps from './inputTagProps'\nimport Inputter from '../Inputter/Inputter'\nimport { ROW_HEADER_WIDTH } from '../cell/RowHeader'\n\n\nconst Root = styled.div`\n  display: flex;\n  border-width: 2px 2px 0;\n  border-style: solid;\n  border-color: ${props => props.theme.colors.table.borderDark};\n  position: relative;\n  height: 30px;\n  width: 100%;\n  z-index: 10;\n`\n\nconst Fx = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-right: 1px solid ${props => props.theme.colors.table.borderDark};\n  width: ${ROW_HEADER_WIDTH + 3}px;\n  color: ${props => props.theme.colors.table.borderDark};\n  font-style: italic;\n`\n\nclass FormulaBar extends React.PureComponent {\n\n  static propTypes = {\n    location: PropTypes.string,\n    scheduleFloatingInputter: PropTypes.func.isRequired,\n    closeFloatingInputter: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n    this.handleOnFocus = this.handleOnFocus.bind(this)\n    this.handleOnBlur = this.handleOnBlur.bind(this)\n  }\n\n  state = {\n    isInteractive: false,\n  }\n\n  refRoot = React.createRef()\n\n  handleOnFocus() {\n    this.setState({ isInteractive: true })\n    this.props.scheduleFloatingInputter(false)\n  }\n\n  handleOnBlur(event) {\n    if (!this.refRoot.current.contains(event.relatedTarget)) {\n      this.props.closeFloatingInputter()\n      this.setState({ isInteractive: false })\n    }\n  }\n\n  render() {\n    return (\n      <Root\n        ref={this.refRoot}\n        onFocus={this.handleOnFocus}\n        onBlur={this.handleOnBlur}\n      >\n        <Fx>x</Fx>\n        <Inputter\n          isInteractive={this.state.isInteractive}\n          inputTagProps={inputTagProps}\n        />\n      </Root>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  const {\n    global: {\n      activeCell: {\n        location,\n      },\n    }\n  } = state\n\n  return { location }\n}\n\nconst mapDispatchtoProps = { scheduleFloatingInputter, closeFloatingInputter }\n\nexport default connect(mapStateToProps, mapDispatchtoProps)(FormulaBar)\n","\n/* @jsx jsx */\nimport React from 'react' // eslint-disable-line\nimport { jsx, css } from '@emotion/core'\n\n\nconst style = theme => css`\n  align-items: center;\n  background-color: white;\n  border: 2px solid salmon;\n  box-shadow: 0 0 5px ${theme.colors.shadow};\n  box-sizing: border-box;\n  display: flex;\n  font-size: 13px;\n  padding: 0 8px 0 2px;\n`\nconst props = {\n  'data-inputter': 'floating',\n}\n\nexport default { style, props }\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { css, jsx } from '@emotion/core' // eslint-disable-line\n\nimport { Input as BaseInput } from '../Inputter/InputTag'\n\n\nconst NoOp = () => {}\nconst PADDING_COMPARE = 3\nconst PADDING_SIZE = 7\n\nconst Input = styled(BaseInput)`\n  position: absolute;\n  margin-top: -200vh;\n  visibility: hidden;\n`\n\nclass InputSizer extends React.PureComponent {\n\n  static propTypes = {\n    // props\n    setInputWidth: PropTypes.func.isRequired,\n    style: PropTypes.func,\n    // redux\n    cellRect: PropTypes.object,\n    valueEvent: PropTypes.object,\n  }\n\n  static defaultProps = {\n    style: NoOp,\n  }\n\n  refInput = React.createRef()\n\n  componentDidMount() {\n    this.setInputWidth()\n  }\n\n  componentDidUpdate(prevProps, prevState) { // eslint-disable-line\n    if (prevProps.valueEvent !== this.props.valueEvent) {\n      this.setInputWidth()\n    }\n  }\n\n  setInputWidth() {\n    const inputEl = this.refInput.current\n    const textWidth = inputEl.scrollWidth\n    const width = textWidth + PADDING_COMPARE > this.props.cellRect.width\n      ? Math.ceil(textWidth) + PADDING_SIZE\n      : this.props.cellRect.width\n\n    this.props.setInputWidth(width)\n  }\n\n  render() {\n    return (\n      <Input\n        readOnly\n        ref={this.refInput}\n        value={this.props.valueEvent.value}\n        css={theme => {\n          const style1 = this.props.style(theme)\n          const style2 = `width: ${this.props.cellRect.width}px;`\n          return [style1, style2]\n        }}\n      />\n    )\n  }\n}\n\nexport default InputSizer\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { jsx, css } from '@emotion/core' // eslint-disable-line\nimport { connect } from 'react-redux'\n\nimport { closeFloatingInputter, setFloatingInputterInteractive } from '~/actions/globalActions'\nimport inputTagProps from './inputTagProps'\nimport Inputter from '../Inputter/Inputter'\nimport InputSizer from './InputSizer'\n\n\nconst Root = styled.div`\n  position: fixed;\n`\n\nexport class FloatingInputter extends React.PureComponent {\n\n  static propTypes = {\n    // redux\n    cellRect: PropTypes.object,\n    closeFloatingInputter: PropTypes.func.isRequired,\n    setFloatingInputterInteractive: PropTypes.func.isRequired,\n    inputter: PropTypes.shape({\n      isOpen: PropTypes.bool.isRequired,\n      isInteractive: PropTypes.bool.isRequired,\n    }),\n    isInputterOpen: PropTypes.bool,\n  }\n\n  static defaultProps = {\n    cellRect: {},\n    isInputterOpen: false,\n  }\n\n  constructor(props) {\n    super(props)\n    this.handleOnFocus = this.handleOnFocus.bind(this)\n    this.handleOnMount = this.handleOnMount.bind(this)\n    this.setInputWidth = this.setInputWidth.bind(this)\n  }\n\n  state = {\n    width: 'auto',\n  }\n\n  refRoot = React.createRef()\n\n  setInputWidth(width) {\n    if (this.state.width !== width) {\n      this.setState({ width })\n    }\n  }\n\n  handleOnMount(props, state, inputEl) {\n    if (this.props.inputter.isInteractive) {\n      inputEl.focus()\n      inputEl.selectionEnd = inputEl.value.length\n    }\n  }\n\n  handleOnFocus() {\n    if (!this.props.inputter.isInteractive) {\n      this.props.setFloatingInputterInteractive(true)\n    }\n  }\n\n  render() {\n    if (!this.props.inputter.isOpen) { return null }\n\n    const { top, left, height } = this.props.cellRect\n    const { width } = this.state\n\n    return (\n      <Root\n        css={{ top, left, width, height }}\n        onFocus={this.handleOnFocus}\n        ref={this.refRoot}\n      >\n        <InputSizer\n          cellRect={this.props.cellRect}\n          setInputWidth={this.setInputWidth}\n          style={inputTagProps.style}\n          valueEvent={this.props.valueEvent}\n        />\n        <Inputter\n          inputTagProps={inputTagProps}\n          isInteractive={this.props.inputter.isInteractive}\n          onCommit={this.props.closeFloatingInputter}\n          onEscape={this.props.closeFloatingInputter}\n          onMount={this.handleOnMount}\n        />\n      </Root>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  const {\n    global: {\n      activeCell: {\n        location,\n      },\n      inputter: {\n        valueEvent,\n      },\n      floatingInputter: {\n        cellRect,\n        isOpen,\n        isInteractive,\n      }\n    }\n  } = state\n\n  const inputter = {\n    isOpen,\n    isInteractive,\n  }\n\n  return { cellRect, valueEvent, location, inputter }\n}\n\nconst mapDispatchToProps = { closeFloatingInputter, setFloatingInputterInteractive }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FloatingInputter)\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { jsx, css } from '@emotion/core' // eslint-disable-line\nimport { connect } from 'react-redux'\n\nimport { setColWidth } from '~/actions/tableMetaActions'\nimport { DEFAULT_COL_WIDTH, MIN_COL_WIDTH, MAX_COL_WIDTH } from '~/library/constants'\nimport { debounce, clamp } from '~/library/utils'\n\n\nlet Root = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-right: 1px solid ${props => props.theme.colors.table.borderDark};\n  border-bottom: 1px solid ${props => props.theme.colors.table.borderDark};\n  background: ${props => props.theme.colors.table.labelBkg};\n  font-size: 12px;\n`\n\nconst BtnWidth = styled.button`\n  background: transparent;\n  cursor: col-resize;\n  outline: none;\n  position: absolute;\n  height: 100%;\n  margin: 0 -3px 0 0;\n  width: 6px;\n  border: 0;\n  padding: 0;\n  right: 0;\n  top: 0;\n  z-index: 2;\n\n  :hover {\n    background: ${props => props.theme.colors.primary.light};\n  }\n`\n\nclass ColHeader extends React.PureComponent {\n\n  static propTypes = {\n    label: PropTypes.string.isRequired,\n    setColWidth: PropTypes.func.isRequired,\n    width: PropTypes.number.isRequired,\n  }\n\n  static defaultProps = {\n    width: DEFAULT_COL_WIDTH,\n  }\n\n  constructor() {\n    super()\n    this.handleBtnWidthOnMouseDown = this.handleBtnWidthOnMouseDown.bind(this)\n    this.handleDocumentMouseMove = this.handleDocumentMouseMove.bind(this)\n    this.handleDocumentMouseUp = this.handleDocumentMouseUp.bind(this)\n    this.debSetColWidth = this.debSetColWidth.bind(this)\n  }\n\n  state = {\n    pageX: 0,\n    width: 0,\n    btnRight: 0,\n    isResizing: false,\n  }\n\n  getBtnWidthStyle() {\n    if (!this.state.isResizing) { return }\n\n    const newRight = this.state.btnRight\n    const minRight = MIN_COL_WIDTH - this.state.width\n    const maxRight = MAX_COL_WIDTH - this.state.width\n    const right = -(clamp(newRight, minRight, maxRight) - 4)\n\n    return (theme) => css`\n      width: 1.5px;\n      height: 90vh;\n      right: ${right}px;\n      background: ${theme.colors.primary.light};\n    `\n  }\n\n  debSetColWidth = debounce((event) => {\n    const delta = event.pageX - this.state.pageX\n    this.setState({ btnRight: delta, })\n  }, 40)\n\n  handleDocumentMouseMove(event) {\n    this.debSetColWidth(event)\n  }\n\n  handleDocumentMouseUp(event) {\n    const delta = event.pageX - this.state.pageX\n    const width = this.state.width + delta\n\n    this.props.setColWidth(this.props.label, width)\n    this.setState({ btnRight: 0, isResizing: false })\n    document.removeEventListener('mousemove', this.handleDocumentMouseMove)\n    document.removeEventListener('mouseup', this.handleDocumentMouseUp)\n  }\n\n  handleBtnWidthOnMouseDown(event) {\n    event.preventDefault()\n\n    this.setState({\n      pageX: event.pageX,\n      width: this.props.width,\n      isResizing: true,\n    })\n\n    document.addEventListener('mousemove', this.handleDocumentMouseMove)\n    document.addEventListener('mouseup', this.handleDocumentMouseUp)\n  }\n\n  render() {\n    const { label, width } = this.props\n\n    return (\n      <Root\n        data-col={label}\n        className='col-label-height'\n        css={css`\n          width: ${width}px;\n          height: 26px;\n        `}\n      >\n        {label}\n        <BtnWidth\n          css={this.getBtnWidthStyle()}\n          tabIndex='-1'\n          onMouseDown={this.handleBtnWidthOnMouseDown}\n          onMouseMove={this.handleBtnWidthOnMouseMove}\n          onMouseUp={this.handleBtnWidthOnMouseUp}\n        />\n      </Root>\n    )\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const width = state.tableMeta.colWidths[ownProps.label]\n  return { width }\n}\n\nconst mapDispatchToProps = { setColWidth }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ColHeader)\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { jsx, css } from '@emotion/core'\n\nimport ColHeader from '../cell/ColHeader'\nimport { ROW_HEADER_WIDTH } from '../cell/RowHeader'\n\n\nconst Row = styled.div`\n  display: flex;\n  width: fit-content;\n  position: sticky;\n  top: 0;\n`\n\nconst InnerBorder = styled.div`\n  position: sticky;\n  top: 0;\n  left: 0;\n  z-index: 20;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-right: 1px solid ${props => props.theme.colors.table.borderDark};\n  border-bottom: 1px solid ${props => props.theme.colors.table.borderDark};\n  background: ${props => props.theme.colors.table.labelBkg};\n`\n\nfunction ColHeaderRow({ colLabels }) {\n  const renderCornerCell = () => (\n    <InnerBorder\n      css={css`\n        width: ${ROW_HEADER_WIDTH}px;\n        height: 26px;\n      `}\n    />\n  )\n\n  const renderLabelCells = () => (\n    new Array(colLabels.length).fill(0).map((_, i) => (\n      <ColHeader\n        key={i}\n        label={colLabels[i]}\n      />\n    )\n  ))\n\n  return (\n    <Row\n      data-row='header'\n    >\n      {renderCornerCell()}\n      {renderLabelCells()}\n    </Row>\n  )\n}\n\nColHeaderRow.propTypes = {\n  colLabels: PropTypes.arrayOf(PropTypes.string)\n}\n\nexport default ColHeaderRow\n\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { jsx, css } from '@emotion/core' // eslint-disable-line\n\n\nconst Root = styled.div`\n  display: flex;\n  align-items: center;\n  border: 2px solid transparent;\n  line-height: 1.1em;\n  height: 100%;\n  width: 100%;\n  padding: 2px;\n`\n\nfunction Datum({\n  fwdRef,\n  isActive,\n  location,\n  onClick,\n  onDoubleClick,\n  onFocus,\n  onKeyDown,\n  result,\n}) {\n\n  const getStyle = () => {\n    let style = {}\n\n    if (typeof result === 'number') {\n      style = {\n        whiteSpace: 'nowrap',\n        textOverflow: 'clip',\n        overflow: 'hidden',\n      }\n    }\n\n    if (isActive) {\n      style.border = '2px solid salmon'\n    }\n\n    return style\n  }\n\n  return (\n    <Root\n      ref={fwdRef}\n      data-cell='result'\n      data-location={location}\n      css={getStyle()}\n      tabIndex='0'\n      onClick={onClick}\n      onKeyDown={onKeyDown}\n      onDoubleClick={onDoubleClick}\n      onFocus={onFocus}\n    >\n    {result}\n  </Root>\n  )\n}\n\nDatum.propTypes = {\n  fwdRef: PropTypes.object.isRequired,\n  result: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]).isRequired,\n  isActive: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func.isRequired,\n  onDoubleClick: PropTypes.func.isRequired,\n  onFocus: PropTypes.func.isRequired,\n}\n\nexport default Datum\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport graph from '~/formulas/graph'\nimport history from '../Table/TableHistory/TableHistory'\n\nimport { unscheduleFloatingInputter } from '~/actions/globalActions'\nimport { openFloatingInputter, setActiveCell } from '~/actions/globalActions'\nimport Datum from './Datum'\n\n\nexport class Result extends React.PureComponent {\n\n  static propTypes = {\n    // props\n    location: PropTypes.string.isRequired,\n    fwdRef: PropTypes.object.isRequired,\n    isActive: PropTypes.bool.isRequired,\n    openFloatingInputter: PropTypes.func.isRequired,\n    result: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number,\n    ]).isRequired,\n    scheduledFloatingInputter: PropTypes.shape({\n      willOpen: PropTypes.bool,\n      isInteractive: PropTypes.bool,\n    }).isRequired,\n    setActiveCell: PropTypes.func.isRequired,\n    unscheduleFloatingInputter: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n    this.handleOnClick = this.handleOnClick.bind(this)\n    this.handleOnDoubleClick = this.handleOnDoubleClick.bind(this)\n    this.handleOnFocus = this.handleOnFocus.bind(this)\n    this.handleOnKeyDown = this.handleOnKeyDown.bind(this)\n    this.refDatum = props.fwdRef\n  }\n\n  history = history\n\n  componentDidUpdate(prevProps) {\n    this.scheduledFloatingInputter()\n    this.focus(prevProps)\n  }\n\n  scheduledFloatingInputter() {\n    if (!this.props.isActive) { return }\n    if (!this.props.scheduledFloatingInputter.willOpen) { return }\n\n    const { isInteractive } = this.props.scheduledFloatingInputter\n    this.props.unscheduleFloatingInputter()\n    this.openFloatingInputter(isInteractive)\n  }\n\n  openFloatingInputter(isInteractive, replaceValue) {\n    const datumRect = this.refDatum.current.getBoundingClientRect()\n    const cellRect = JSON.parse(JSON.stringify(datumRect))\n    this.props.openFloatingInputter(cellRect, isInteractive, replaceValue)\n  }\n\n  focus(prevProps) {\n    if (!prevProps.isActive && this.props.isActive) {\n      const element = this.props.fwdRef.current\n\n      if (document.activeElement !== element) {\n        element.focus()\n      }\n    }\n  }\n\n  handleOnFocus() {\n    this.props.setActiveCell(this.props.location)\n  }\n\n  handleOnClick(event) {\n    event.stopPropagation()\n  }\n\n  handleOnDoubleClick(event) {\n    event.stopPropagation()\n    this.openFloatingInputter(true)\n  }\n\n  handleOnKeyDown(event) {\n    const { key, metaKey, ctrlKey } = event\n\n    if (['Delete', 'Backspace'].includes(key)) {\n      const valueStr = '' + this.props.result\n\n      if (valueStr.length > 0) {\n        const { location } = this.props\n        history.push('clear', location)\n        graph.delVertex(location)\n      }\n      // key pressed is a printable symbol, ex: 'a', '1', ','\n      // can be further refined, but for now it's fine\n    } else if (key.length === 1 && !(metaKey || ctrlKey)) {\n      this.openFloatingInputter(true, key)\n    }\n  }\n\n  render() {\n    return (\n      <Datum\n        fwdRef={this.refDatum}\n        location={this.props.location}\n        result={this.props.result}\n        isActive={this.props.isActive}\n        onClick={this.handleOnClick}\n        onDoubleClick={this.handleOnDoubleClick}\n        onFocus={this.handleOnFocus}\n        onKeyDown={this.handleOnKeyDown}\n      />\n    )\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const isActive = state.global.activeCell.location === ownProps.location\n  const { scheduledFloatingInputter } = state.global\n  const cell = state.tableData[ownProps.location]\n  const result = cell ? cell.result : ''\n  return { result, isActive, scheduledFloatingInputter }\n}\n\nconst mapDispatchToProps = {\n  openFloatingInputter,\n  setActiveCell,\n  unscheduleFloatingInputter,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Result)\n","/* @jsx jsx */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { jsx, css } from '@emotion/core' // eslint-disable-line\nimport { connect } from 'react-redux'\n\nimport { DEFAULT_COL_WIDTH } from '~/library/constants'\n\n\nconst Root = styled.div`\n  cursor: cell;\n  overflow: hidden;\n  font-size: 13px;\n  border-right: 1px solid ${props => props.theme.colors.table.border};\n  border-bottom: 1px solid ${props => props.theme.colors.table.border};\n  outline: none;\n`\n\nexport function OutterBorder({ width, height, onClick, onDoubleClick, children }) {\n  return (\n    <Root\n      data-cell='border'\n      onClick={onClick}\n      onDoubleClick={onDoubleClick}\n      css={{\n        width,\n        height: height && height\n      }}\n    >\n      {children}\n    </Root>\n  )\n}\n\nOutterBorder.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  onDoubleClick: PropTypes.func.isRequired,\n  location: PropTypes.string.isRequired,\n  width: PropTypes.number,\n  height: PropTypes.number,\n}\n\nOutterBorder.defaultProps = {\n  width: DEFAULT_COL_WIDTH,\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const [colLabel, rowLabel] = ownProps.location.split('-')\n  const width = state.tableMeta.colWidths[colLabel]\n  const height = state.tableMeta.rowHeights[rowLabel]\n  return { width, height }\n}\n\nexport default connect(mapStateToProps)(OutterBorder)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Result from './Result'\nimport OutterBorder from './OutterBorder'\n\n\nclass ResultCell extends React.PureComponent {\n\n  static propTypes = {\n    location: PropTypes.string.isRequired,\n  }\n\n  refDatum = React.createRef()\n\n  constructor() {\n    super()\n    this.handleOnClick = this.handleOnClick.bind(this)\n    this.handleOnDoubleClick = this.handleOnDoubleClick.bind(this)\n  }\n\n  focusDatum() {\n    setTimeout(() => this.refDatum.current.focus(), 0)\n  }\n\n  handleOnClick() {\n    this.focusDatum()\n  }\n\n  handleOnDoubleClick() {\n    this.focusDatum()\n  }\n\n  render() {\n    const { location } = this.props\n\n    return (\n      <OutterBorder\n        location={location}\n        onClick={this.handleOnClick}\n        onDoubleClick={this.handleOnDoubleClick}\n      >\n        <Result\n          location={location}\n          fwdRef={this.refDatum}\n        />\n      </OutterBorder>\n    )\n  }\n}\n\nexport default ResultCell\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\n\nimport RowHeader from '../cell/RowHeader'\nimport ResultCell from '../ResultCell/ResultCell'\n\n\nconst Row = styled.div`\n  display: flex;\n  width: fit-content;\n`\n\nfunction DataRow({ rowNumber, colLabels }) {\n  const dataCells = () => (\n    new Array(colLabels.length).fill(0).map((_, i) => {\n      const location = `${colLabels[i]}-${rowNumber}`\n      return (\n        <ResultCell\n          key={i}\n          location={location}\n        />\n      )\n    })\n  )\n\n  return (\n    <Row\n      data-row={rowNumber}\n    >\n      <RowHeader\n        label={rowNumber}\n      />\n      {dataCells()}\n    </Row>\n  )\n}\n\nDataRow.propTypes = {\n  rowNumber: PropTypes.number,\n  colLabels: PropTypes.arrayOf(PropTypes.string),\n}\n\nexport default DataRow\n\n","import { Machine, assign } from 'xstate'\n\nimport { parseLocation, getColumnLabel } from '~/library/utils'\n\n\nfunction getTargetLocation({ rows, columns, rowIndex, colIndex, keyEvent }) {\n  const { key, altKey, ctrlKey, shiftKey } = keyEvent // eslint-disable-line\n\n  if (key === 'ArrowUp') {\n    rowIndex = Math.max(0, rowIndex - 1)\n  } else if (key === 'ArrowRight' || (key === 'Tab' && !shiftKey)) {\n    colIndex = Math.min(columns - 1, colIndex + 1)\n  } else if (['ArrowDown', 'Enter'].includes(key)) {\n    rowIndex = Math.min(rows - 1, rowIndex + 1)\n  } else if (key === 'ArrowLeft' || (key === 'Tab' && shiftKey)) {\n    colIndex = Math.max(0, colIndex - 1)\n  } else {\n    return null\n  }\n\n  const colLabel = getColumnLabel(colIndex)\n  const rowLabel = '' + (rowIndex + 1)\n\n  return `${colLabel}-${rowLabel}`\n}\n\nfunction focusTargetCell(ctx) {\n  if (!ctx.endLocation) { return Promise.resolve(false) }\n\n  return new Promise(resolve => {\n    setTimeout(() => {\n      const id = `[data-location=\"${ctx.endLocation}\"]`\n      const cell = document.querySelector(id)\n      if (cell) { cell.focus() }\n      resolve(true)\n    }, 0)\n  })\n}\n\nconst state = {\n  id: 'keyboardNav',\n  initial: 'idle',\n  context: {\n    columns: null,\n    rows: null,\n    keyEvent: null,\n    colIndex: null,\n    rowIndex: null,\n    endLocation: null,\n    wasFocused: false,\n  },\n  states: {\n    idle: {\n      on: {\n        'MOVE_FOCUS': {\n          actions: ['setNewContext', 'calcTargetLocation'],\n          target: 'focusTarget',\n        }\n      }\n    },\n    focusTarget: {\n      invoke: {\n        src: focusTargetCell,\n        onDone: {\n          actions: assign({ wasFocused: (ctx, event) => event.data }),\n          target: 'idle',\n        },\n      },\n    },\n  },\n}\n\nconst actions = {\n  actions: {\n    setNewContext: assign((ctx, { keyEvent, location }) => {\n      const [colIndex, rowIndex] = parseLocation(location)\n      return { colIndex, rowIndex, keyEvent }\n    }),\n    calcTargetLocation: assign({\n      endLocation: (ctx) => {\n        return getTargetLocation(ctx)\n      }\n    }),\n  },\n}\n\nfunction getKeyboardFocusMachine(rows, columns) {\n  const newContext = {\n    ...state.context,\n    columns,\n    rows,\n  }\n\n  return Machine(state, actions, newContext)\n}\n\nexport {\n  state,\n  actions,\n  getTargetLocation,\n  focusTargetCell,\n}\n\nexport default getKeyboardFocusMachine\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\nimport { connect } from 'react-redux'\nimport { interpret } from 'xstate'\n\nimport { setActiveCell } from '~/actions/globalActions'\nimport ColHeaderRow from './ColHeaderRow'\nimport DataRow from './DataRow'\nimport { getColumnNames } from '~/library/utils'\nimport getKeyboardFocusMachine from './keyboardFocusMachine'\nimport history from '../Table/TableHistory/TableHistory'\n\n\nconst Grid = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 60vh;\n  min-height: 300px;\n  border-top: 2px solid ${props => props.theme.colors.table.borderDark};\n  border-left: 2px solid ${props => props.theme.colors.table.borderDark};\n  border-right: 1px solid ${props => props.theme.colors.table.borderDark};\n  border-bottom: 1px solid ${props => props.theme.colors.table.borderDark};\n  overflow: scroll;\n\n  * {\n    box-sizing: border-box;\n  }\n`\n\nexport class Table extends React.PureComponent {\n  static propTypes = {\n    rows: PropTypes.number.isRequired,\n    columns: PropTypes.number.isRequired,\n    setActiveCell: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n    this.handleOnClick = this.handleOnClick.bind(this)\n    this.handleOnKeyDown = this.handleOnKeyDown.bind(this)\n    this.colLabels = getColumnNames(props.columns)\n  }\n\n  keyboardFocusMachine = getKeyboardFocusMachine(this.props.rows, this.props.columns)\n  keyboardFocusService = interpret(this.keyboardFocusMachine)\n  refGrid = React.createRef()\n\n  componentDidMount() {\n    this.keyboardFocusService.start()\n    this.props.setActiveCell('A-1')\n    this.focusA_1()\n  }\n\n  componentWillUnmount() {\n    this.keyboardFocusService.stop()\n  }\n\n  focusA_1() {\n    const el = document.querySelector('[data-location=\"A-1\"]')\n    el && el.focus()\n  }\n\n  handleOnClick(event) {\n    event.stopPropagation()\n  }\n\n  handleOnKeyDown(event) {\n    event.stopPropagation()\n    event.preventDefault()\n\n    this.keyListenerService(event)\n    this.focusService(event)\n  }\n\n  keyListenerService(event) {\n    const { key, shiftKey, metaKey, ctrlKey } = event\n    \n    if (key === 'z' && shiftKey && (metaKey || ctrlKey)) {\n      history.redo()\n    } else if (key === 'z' && (metaKey || ctrlKey)) {\n      history.undo()\n    }\n  }\n\n  focusService(event) {\n    const { location } = event.target.dataset\n\n    if (!location) { return }\n\n    const { key, altKey, ctrlKey, shiftKey } = event\n    const keyEvent = { key, altKey, ctrlKey, shiftKey }\n    this.keyboardFocusService.send({ type: 'MOVE_FOCUS', keyEvent, location })\n  }\n\n  renderColHeaderRow(i) {\n    return (\n      <ColHeaderRow\n        key={i}\n        rows={this.props.rows}\n        colLabels={this.colLabels}\n      />\n    )\n  }\n\n  renderDataRows(rowNumber) {\n    return (\n      <DataRow\n        key={rowNumber}\n        rowNumber={rowNumber}\n        colLabels={this.colLabels}\n      />\n    )\n  }\n\n  renderRows() {\n    return new Array(this.props.rows + 1).fill(0).map((_, i) => {\n      if (i === 0) {\n        return this.renderColHeaderRow(i)\n      } else {\n        return this.renderDataRows(i)\n      }\n    })\n  }\n\n  render() {\n    return (\n      <Grid\n        ref={this.refGrid}\n        data-table='app'\n        onClick={this.handleOnClick}\n        onKeyDown={this.handleOnKeyDown}\n      >\n        {this.renderRows()}\n      </Grid>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { rows, columns } = state.global\n  return { rows, columns }\n}\n\nconst mapDisptachToProps = { setActiveCell }\n\nexport default connect(mapStateToProps, mapDisptachToProps)(Table)\n","import React from 'react'\nimport styled from '@emotion/styled'\n\n\nconst Root = styled.div`\n  width: 400px;\n  padding-left: 60px;\n`\n\nconst Title = styled.h3`\n  padding-bottom: 15px;\n`\n\nconst Ul = styled.ul`\n  list-style: none;\n  column-count: 3;\n`\n\nconst Li = styled.li`\n  font-size: 14px;\n`\n\nfunction FunctionList() {\n  return (\n    <Root>\n      <Title>Available Functions</Title>\n      <Ul>\n        <Li>AVERAGE</Li>\n        <Li>AVG</Li>\n        <Li>CONCAT</Li>\n        <Li>COUNT</Li>\n        <Li>MAX</Li>\n        <Li>MIN</Li>\n        <Li>POW</Li>\n        <Li>POWER</Li>\n        <Li>SQRT</Li>\n        <Li>SUM</Li>\n      </Ul>\n    </Root>\n  )\n}\n\nexport default FunctionList\n","import React from 'react'\nimport styled from '@emotion/styled'\n\nimport srcGithubLogo from '~/assets/github_logo.png'\n\n\nconst Root = styled.div`\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n`\n\nconst Img = styled.img`\n  width: 52px;\n  margin-top: -4px;\n`\n\nfunction SourceCode() {\n  return (\n    <Root>\n      Source code on \n      <a\n        href='https://github.com/julianhr/app-spreadsheet'\n        rel='noopener noreferrer'\n        target='_blank'\n      >\n        <Img\n          src={srcGithubLogo}\n          alt='GitHub source code'\n        />\n      </a>\n    </Root>\n  )\n}\n\nexport default SourceCode\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport FunctionList from './FunctionList'\nimport SourceCode from './SourceCode'\n\n\nconst Root = styled.div`\n  display: flex;\n  padding: 40px;\n  justify-content: space-evenly;\n`\n\nfunction Instructions() {\n  return (\n    <Root>\n      <FunctionList />\n      <SourceCode />\n    </Root>\n  )\n}\n\nexport default Instructions\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from '@emotion/styled'\n\nimport Header from './components/header/Header'\nimport FormulaBar from './components/FormulaBar/FormulaBar'\nimport FloatingInputter from './components/FloatingInputter/FloatingInputter'\nimport Table from './components/Table/Table'\nimport Instructions from './components/Instructions/Instructions'\n\n\n\nconst Container = styled.div`\n  display: grid;\n  grid:\n    \"left-blank main right-blank\" 100vh\n    / auto minmax(auto, 1000px) auto;\n`\n\nconst Main = styled.main`\n  grid-area: main;\n`\n\nfunction App() {\n  return (\n    <Container>\n      <Main>\n        <FloatingInputter />\n        <div data-dummy-focus-stop tabIndex=\"0\" />\n        <Header />\n        <FormulaBar />\n        <Table />\n        <Instructions />\n      </Main>\n    </Container>\n  )\n}\n\nApp.propTypes = {\n  setActiveCell: PropTypes.func,\n}\n\nexport default App\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter } from 'react-router-dom'\nimport { ThemeProvider } from 'emotion-theming'\nimport { Global } from '@emotion/core'\nimport 'sanitize.css'\n\nimport appStore from './reducers/'\nimport globalStyles from './styles/globalStyles'\nimport theme from './styles/theme'\nimport App from './App'\n\n\nfunction Root() {\n  return (\n    <Provider store={appStore}>\n      <BrowserRouter>\n        <ThemeProvider theme={theme}>\n          <Global styles={globalStyles} />\n          <App />\n        </ThemeProvider>\n      </BrowserRouter>\n    </Provider>\n  )\n}\n\nexport default Root\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Root from './Root'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<Root />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}