(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{49:function(e,t,n){e.exports=n(65)},65:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(31),i=n.n(r),l=n(14),c=n(45),s=n(42),u=n(12),d=(n(58),n(15)),p=Object(d.c)({activeCell:null,rows:5,columns:5},{SET_ACTIVE_CELL:function(e,t){var n=t.payload;e.activeCell=n}}),h=Object(d.c)({},{SET_CELL_VALUE:function(e,t){var n=t.payload,a=n.location,o=n.text,r=n.formula;e[a]={text:o,formula:r}},DELETE_CELL_VALUE:function(e,t){delete e[t.payload]}}),m=function(){return Object(d.a)({reducer:{global:p,table:h}})},b={xs:0,sm:420,md:900,lg:1200},f={xs:"sm",sm:"md",md:"lg"},v={xs:"@media (max-width: ".concat(b.sm-1,"px)"),sm:"@media (min-width: ".concat(b.sm,"px) and (max-width: ").concat(b.md-1,"px)"),md:"@media (min-width: ".concat(b.md,"px) and (max-width: ").concat(b.lg-1,"px)"),lg:"@media (min-width: ".concat(b.lg,"px)"),from:function(e){return"@media (min-width: ".concat(b[e],"px)")},upTo:function(e){return"@media (max-width: ".concat(b[f[e]]-1,"px)")}},y={colors:{text:"#3D3D3D",cell:{border:"lightgray"},primary:{strong:"#E10D75"},field:{background:"#F0F0F0"}},breaks:b,queries:v},O=Object(u.c)("body{color:",y.colors.text,";line-height:1.3em;}table,th,td{border:0;border-spacing:0;border-collapse:collapse;}td{padding:0;line-height:1.2em;}p,h1,h2,h3,h4,h5,h6{margin:0;}"),g=n(8),w=Object(d.b)("SET_ACTIVE_CELL"),x=Object(g.a)("header",{target:"e1mq5pli0"})({name:"1rn5ure",styles:"width:100%;display:flex;flex-direction:column;align-items:center;padding:30px 0 30px;"});var E=function(){return o.a.createElement(x,null,o.a.createElement("h3",null,"Spreadsheet App"))},k=n(20),j=n(21),C=n(23),T=n(22),D=n(7),L=n(24),S=n(13),A=Object(S.a)({id:"cell",initial:"static",states:{static:{initial:"notFocused",states:{focused:{},notFocused:{}},on:{EDITABLE_MODIFY:{target:"editable.modify"},EDITABLE_REPLACE:{target:"editable.replace"}}},editable:{states:{modify:{},replace:{}},on:{STATIC_FOCUSED:{target:"static.focused"},STATIC:{target:"static"}}}}}),I=Object(d.b)("SET_CELL_VALUE");function K(e){return function(t,n){if(void 0===n().table[e])return Promise.resolve();var a={type:"DELETE_CELL_VALUE",payload:e};return Promise.resolve(t(a))}}var F=Object(g.a)("input",{target:"egik0ru0"})({name:"atryua",styles:"display:flex;align-items:center;outline:none;border:2px solid transparent;width:100%;height:100%;padding:0 2px;line-height:1em;:focus{border:2px solid salmon;}"}),V=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(C.a)(this,Object(T.a)(t).call(this))).refInput=o.a.createRef(),e.handleOnKeyDown=e.handleOnKeyDown.bind(Object(D.a)(e)),e.handleOnBlur=e.handleOnBlur.bind(Object(D.a)(e)),e}return Object(L.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.focusInputTag()}},{key:"focusInputTag",value:function(){var e=this.refInput.current;e.focus(),e.scrollLeft=e.scrollWidth}},{key:"setNewValue",value:function(e){var t=e.trim(),n=this.props.location;if(0!==t.length){var a={location:n,formula:t},o="="===t[0];a.text=o?this.evaluateFormula():t,this.props.setCellValue(a)}else this.props.clearCellValue(n)}},{key:"evaluateFormula",value:function(){return"pending evaluateFormula"}},{key:"handleOnKeyDown",value:function(e){var t=e.key;"Escape"===t?this.props.onEscape():"Enter"===t?(this.setNewValue(e.target.value),this.props.onCommit()):e.stopPropagation()}},{key:"handleOnBlur",value:function(e){this.setNewValue(e.target.value),this.props.onCommit()}},{key:"render",value:function(){var e=this.props.replaceValue?null:this.props.formula;return o.a.createElement(F,{ref:this.refInput,id:"f-".concat(this.props.location),defaultValue:e,onKeyDown:this.handleOnKeyDown,onBlur:this.handleOnBlur})}}]),t}(o.a.PureComponent);var _={setCellValue:I,clearCellValue:K},M=Object(l.b)(function(e,t){var n=e.table[t.location];return{formula:n?n.formula:""}},_)(V),P=Object(g.a)("div",{target:"e1anysog0"})({name:"10hpjg9",styles:"display:flex;align-items:center;outline:none;border:2px solid transparent;width:100%;height:100%;padding:0 2px;:focus{border:2px solid salmon;}"}),B=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(C.a)(this,Object(T.a)(t).call(this))).refText=o.a.createRef(),e.handleOnKeyDown=e.handleOnKeyDown.bind(Object(D.a)(e)),e}return Object(L.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.focusTextTag()}},{key:"focusTextTag",value:function(){this.props.isFocused&&this.refText.current.focus()}},{key:"handleOnKeyDown",value:function(e){var t=e.key;this.props.setActiveCell(this.props.location),["Delete","Backspace"].includes(t)?this.props.text.length>0&&this.props.clearCellValue(this.props.location):1===t.length&&this.props.onKeyDownEditable()}},{key:"render",value:function(){return o.a.createElement(P,{ref:this.refText,id:"t-".concat(this.props.location),tabIndex:"0",onKeyDown:this.handleOnKeyDown,onDoubleClick:this.props.onDoubleClick},this.props.text)}}]),t}(o.a.PureComponent);var U={clearCellValue:K,setActiveCell:w},N=Object(l.b)(function(e,t){var n=e.table[t.location];return{text:n?n.text:""}},U)(B),R=Object(g.a)("div",{target:"eoyj2860"})({name:"1wzsgjr",styles:"cursor:cell;width:100%;height:100%;font-size:13px;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;"}),W=function(e){function t(){var e;return Object(k.a)(this,t),(e=Object(C.a)(this,Object(T.a)(t).call(this))).state={displayState:A.initialState},e.displayService=Object(S.c)(A).onTransition(function(t){return e.setState({displayState:t})}),e.textTagOnDoubleClick=e.textTagOnDoubleClick.bind(Object(D.a)(e)),e.textTagOnKeyDownEditable=e.textTagOnKeyDownEditable.bind(Object(D.a)(e)),e.inputTagOnEscape=e.inputTagOnEscape.bind(Object(D.a)(e)),e.inputTagOnCommit=e.inputTagOnCommit.bind(Object(D.a)(e)),e}return Object(L.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.displayService.start()}},{key:"componentWillUnmount",value:function(){this.displayService.stop()}},{key:"textTagOnDoubleClick",value:function(){this.displayService.send("EDITABLE_MODIFY")}},{key:"textTagOnKeyDownEditable",value:function(){this.displayService.send("EDITABLE_REPLACE")}},{key:"inputTagOnEscape",value:function(){this.displayService.send("STATIC_FOCUSED")}},{key:"inputTagOnCommit",value:function(){this.displayService.send("STATIC")}},{key:"renderData",value:function(){var e=this.state.displayState;return e.matches("editable")?o.a.createElement(M,{replaceValue:e.matches("editable.replace"),location:this.props.location,onEscape:this.inputTagOnEscape,onCommit:this.inputTagOnCommit}):o.a.createElement(N,{location:this.props.location,onDoubleClick:this.textTagOnDoubleClick,onKeyDownEditable:this.textTagOnKeyDownEditable,isFocused:e.matches("static.focused")})}},{key:"render",value:function(){return o.a.createElement(R,null,this.renderData())}}]),t}(o.a.PureComponent),q=n(46),z=n(27),J="A".codePointAt(0);function Y(e){for(var t=[],n=[""],a=e;a>0;){var o=[];e:for(var r=0,i=n;r<i.length;r++){var l=i[r],c=!0,s=!1,u=void 0;try{for(var d,p="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var h=d.value;if(0===a)break e;o.push("".concat(l).concat(h)),a-=1}}catch(m){s=!0,u=m}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}}n=o,t=[].concat(Object(q.a)(t),o)}return t}function G(e){var t=e.split("-"),n=Object(z.a)(t,3),a=(n[0],n[1]),o=n[2];return[function(e){var t=e.split("-"),n=Object(z.a)(t,2),a=n[0];return n[1],a.split("").reduce(function(e,t){return 26*e+t.charCodeAt(0)-J+1},0)-1}(a),+o-1]}var H=n(47);function Q(e){var t=e.rows,n=e.columns,a=e.rowIndex,o=e.colIndex;switch(e.key){case"ArrowUp":a=Math.max(0,a-1);break;case"ArrowRight":o=Math.min(n-1,o+1);break;case"ArrowDown":case"Enter":a=Math.min(t-1,a+1);break;case"ArrowLeft":o=Math.max(0,o-1);break;default:return null}var r=function(e){var t=[],n=J,a=e+1;do{var o=n+(a-=1)%26,r=String.fromCodePoint(o);t.push(r),a=Math.floor(a/26)}while(a>0);return t.reverse().join("")}(o),i=""+(a+1);return"t-".concat(r,"-").concat(i)}var X={id:"keyboardNav",initial:"idle",context:{columns:null,rows:null,key:null,colIndex:null,rowIndex:null,endLocation:null,wasFocused:!1},states:{idle:{on:{MOVE_FOCUS:{actions:["setNewContext","calcTargetLocation"],target:"focusTarget"}}},focusTarget:{invoke:{src:function(e){return e.endLocation?new Promise(function(t){setTimeout(function(){var n="#".concat(e.endLocation),a=document.querySelector(n);a&&a.focus(),t(!0)},0)}):Promise.resolve(!1)},onDone:{actions:Object(S.b)({wasFocused:function(e,t){return t.data}}),target:"idle"}}}}},Z={actions:{setNewContext:Object(S.b)(function(e,t){var n=t.key,a=G(t.location),o=Object(z.a)(a,2);return{colIndex:o[0],rowIndex:o[1],key:n}}),calcTargetLocation:Object(S.b)({endLocation:function(e){return Q(e)}})}};var $=function(e,t){var n=Object(H.a)({},X.context,{columns:t,rows:e});return Object(S.a)(X,Z,n)},ee=Object(g.a)("table",{target:"e1tmjcr20"})("border-top:2px solid ",function(e){return e.theme.colors.cell.border},";border-left:2px solid ",function(e){return e.theme.colors.cell.border},";border-right:1px solid ",function(e){return e.theme.colors.cell.border},";border-bottom:1px solid ",function(e){return e.theme.colors.cell.border},";"),te=Object(g.a)("td",{target:"e1tmjcr21"})({name:"1jom3qt",styles:"width:130px;height:26px;"}),ne=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(C.a)(this,Object(T.a)(t).call(this,e))).keyboardNavMachine=$(n.props.rows,n.props.columns),n.focusService=Object(S.c)(n.keyboardNavMachine),n.handleTableOnClick=n.handleTableOnClick.bind(Object(D.a)(n)),n.handleTableOnKeyDown=n.handleTableOnKeyDown.bind(Object(D.a)(n)),n.columnNames=Y(e.columns),n}return Object(L.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.focusService.start()}},{key:"componentWillUnmount",value:function(){this.focusService.stop()}},{key:"handleTableOnClick",value:function(e){e.stopPropagation()}},{key:"handleTableOnKeyDown",value:function(e){e.stopPropagation(),this.moveFocus(e.key,e.target.id)}},{key:"moveFocus",value:function(e,t){this.focusService.send({type:"MOVE_FOCUS",key:e,location:t})}},{key:"renderDataCells",value:function(e){var t=this;return new Array(this.props.columns).fill(0).map(function(n,a){var r="".concat(t.columnNames[a],"-").concat(e);return o.a.createElement(te,{key:r},o.a.createElement(W,{isActive:t.props.activeCell===r,location:r}))})}},{key:"renderRows",value:function(){var e=this;return new Array(this.props.rows).fill(0).map(function(t,n){return o.a.createElement("tr",{key:n},e.renderDataCells(n+1))})}},{key:"render",value:function(){return o.a.createElement(ee,{onClick:this.handleTableOnClick,onKeyDown:this.handleTableOnKeyDown},o.a.createElement("tbody",null,this.renderRows()))}}]),t}(o.a.PureComponent),ae=Object(l.b)(function(e){var t=e.global;return{activeCell:t.activeCell,rows:t.rows,columns:t.columns}})(ne),oe=Object(g.a)("div",{target:"e4x97se0"})({name:"pl3zfx",styles:'display:grid;grid:"left-blank main right-blank" 100vh / auto minmax(auto,1000px) auto;'}),re=Object(g.a)("main",{target:"e4x97se1"})({name:"n7iznt",styles:"grid-area:main;"});var ie={setActiveCell:w},le=Object(l.b)(null,ie)(function(e){var t=e.setActiveCell;return o.a.createElement(oe,{onClick:function(){t(null)}},o.a.createElement(re,null,o.a.createElement(E,null),o.a.createElement(ae,null)))}),ce=m();var se=function(){return o.a.createElement(l.a,{store:ce},o.a.createElement(c.a,null,o.a.createElement(s.a,{theme:y},o.a.createElement(u.a,{styles:O}),o.a.createElement(le,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[49,1,2]]]);
//# sourceMappingURL=main.ce66b4ad.chunk.js.map